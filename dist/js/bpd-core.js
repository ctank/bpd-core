!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[];function i(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}function o(e,t){var n=!0;for(var r in e)e[r]!==t[r]&&(n=!1);return n}setInterval((function(){for(var e=0;e<r.length;e++){var t=r[e].el,n={width:i(t,"width"),height:i(t,"height")};o(n,r[e].style)||(r[e].style={width:n.width,height:n.height},r[e].callback&&r[e].callback())}}),200),t.default={bind:function(e,t){var n={el:e,callback:t,style:{width:i(e,"width"),height:i(e,"height")}};r.push(n)},remove:function(e){r.splice(r.indexOf(e)),-1!==r.indexOf(e)&&r.splice(r.indexOf(e),1)}}},function(e,t,n){"use strict";(function(t){var n,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}
/**
 * Tiny stack for browser or server
 *
 * @author Jason Mulligan <jason.mulligan@avoidwork.com>
 * @copyright 2018
 * @license BSD-3-Clause
 * @link http://avoidwork.github.io/tiny-stack
 * @version 1.1.0
 */"undefined"!=typeof window&&window,n=function(){function e(){i(this,e);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];this.data=[null].concat(n),this.top=this.data.length-1}return r(e,[{key:"clear",value:function(){return this.data.length=1,this.top=0,this}},{key:"empty",value:function(){return 0===this.top}},{key:"length",value:function(){return this.top}},{key:"peek",value:function(){return this.data[this.top]}},{key:"pop",value:function(){var e=void 0;return this.top>0&&(e=this.data.pop(),this.top--),e}},{key:"push",value:function(e){return this.data[++this.top]=e,this}},{key:"search",value:function(e){var t=this.data.indexOf(e);return-1===t?-1:this.data.length-t}}]),e}(),e.exports=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(n,[null].concat(t)))}}).call(this,n(7))},function(e){e.exports=JSON.parse('{"name":"BPMN20","uri":"http://www.omg.org/spec/BPMN/20100524/MODEL","associations":[],"types":[{"name":"Interface","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"operations","type":"Operation","isMany":true},{"name":"implementationRef","type":"String","isAttr":true}]},{"name":"Operation","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"inMessageRef","type":"Message","isReference":true},{"name":"outMessageRef","type":"Message","isReference":true},{"name":"errorRef","type":"Error","isMany":true,"isReference":true},{"name":"implementationRef","type":"String","isAttr":true}]},{"name":"EndPoint","superClass":["RootElement"]},{"name":"Auditing","superClass":["BaseElement"]},{"name":"GlobalTask","superClass":["CallableElement"],"properties":[{"name":"resources","type":"ResourceRole","isMany":true}]},{"name":"Monitoring","superClass":["BaseElement"]},{"name":"Performer","superClass":["ResourceRole"]},{"name":"Process","superClass":["FlowElementsContainer","CallableElement"],"properties":[{"name":"processType","type":"ProcessType","isAttr":true},{"name":"isClosed","isAttr":true,"type":"Boolean"},{"name":"auditing","type":"Auditing"},{"name":"monitoring","type":"Monitoring"},{"name":"properties","type":"Property","isMany":true},{"name":"laneSets","type":"LaneSet","isMany":true,"replaces":"FlowElementsContainer#laneSets"},{"name":"flowElements","type":"FlowElement","isMany":true,"replaces":"FlowElementsContainer#flowElements"},{"name":"artifacts","type":"Artifact","isMany":true},{"name":"resources","type":"ResourceRole","isMany":true},{"name":"correlationSubscriptions","type":"CorrelationSubscription","isMany":true},{"name":"supports","type":"Process","isMany":true,"isReference":true},{"name":"definitionalCollaborationRef","type":"Collaboration","isAttr":true,"isReference":true},{"name":"isExecutable","isAttr":true,"type":"Boolean"}]},{"name":"LaneSet","superClass":["BaseElement"],"properties":[{"name":"lanes","type":"Lane","isMany":true},{"name":"name","isAttr":true,"type":"String"}]},{"name":"Lane","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"partitionElementRef","type":"BaseElement","isAttr":true,"isReference":true},{"name":"partitionElement","type":"BaseElement"},{"name":"flowNodeRef","type":"FlowNode","isMany":true,"isReference":true},{"name":"childLaneSet","type":"LaneSet","xml":{"serialize":"xsi:type"}}]},{"name":"GlobalManualTask","superClass":["GlobalTask"]},{"name":"ManualTask","superClass":["Task"]},{"name":"UserTask","superClass":["Task"],"properties":[{"name":"renderings","type":"Rendering","isMany":true},{"name":"implementation","isAttr":true,"type":"String"}]},{"name":"Rendering","superClass":["BaseElement"]},{"name":"HumanPerformer","superClass":["Performer"]},{"name":"PotentialOwner","superClass":["HumanPerformer"]},{"name":"GlobalUserTask","superClass":["GlobalTask"],"properties":[{"name":"implementation","isAttr":true,"type":"String"},{"name":"renderings","type":"Rendering","isMany":true}]},{"name":"Gateway","isAbstract":true,"superClass":["FlowNode"],"properties":[{"name":"gatewayDirection","type":"GatewayDirection","default":"Unspecified","isAttr":true}]},{"name":"EventBasedGateway","superClass":["Gateway"],"properties":[{"name":"instantiate","default":false,"isAttr":true,"type":"Boolean"},{"name":"eventGatewayType","type":"EventBasedGatewayType","isAttr":true,"default":"Exclusive"}]},{"name":"ComplexGateway","superClass":["Gateway"],"properties":[{"name":"activationCondition","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"default","type":"SequenceFlow","isAttr":true,"isReference":true}]},{"name":"ExclusiveGateway","superClass":["Gateway"],"properties":[{"name":"default","type":"SequenceFlow","isAttr":true,"isReference":true}]},{"name":"InclusiveGateway","superClass":["Gateway"],"properties":[{"name":"default","type":"SequenceFlow","isAttr":true,"isReference":true}]},{"name":"ParallelGateway","superClass":["Gateway"]},{"name":"RootElement","isAbstract":true,"superClass":["BaseElement"]},{"name":"Relationship","superClass":["BaseElement"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"direction","type":"RelationshipDirection","isAttr":true},{"name":"source","isMany":true,"isReference":true,"type":"Element"},{"name":"target","isMany":true,"isReference":true,"type":"Element"}]},{"name":"BaseElement","isAbstract":true,"properties":[{"name":"id","isAttr":true,"type":"String","isId":true},{"name":"documentation","type":"Documentation","isMany":true},{"name":"extensionDefinitions","type":"ExtensionDefinition","isMany":true,"isReference":true},{"name":"extensionElements","type":"ExtensionElements"}]},{"name":"Extension","properties":[{"name":"mustUnderstand","default":false,"isAttr":true,"type":"Boolean"},{"name":"definition","type":"ExtensionDefinition","isAttr":true,"isReference":true}]},{"name":"ExtensionDefinition","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"extensionAttributeDefinitions","type":"ExtensionAttributeDefinition","isMany":true}]},{"name":"ExtensionAttributeDefinition","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"type","isAttr":true,"type":"String"},{"name":"isReference","default":false,"isAttr":true,"type":"Boolean"},{"name":"extensionDefinition","type":"ExtensionDefinition","isAttr":true,"isReference":true}]},{"name":"ExtensionElements","properties":[{"name":"valueRef","isAttr":true,"isReference":true,"type":"Element"},{"name":"values","type":"Element","isMany":true},{"name":"extensionAttributeDefinition","type":"ExtensionAttributeDefinition","isAttr":true,"isReference":true}]},{"name":"Documentation","superClass":["BaseElement"],"properties":[{"name":"text","type":"String","isBody":true},{"name":"textFormat","default":"text/plain","isAttr":true,"type":"String"}]},{"name":"Event","isAbstract":true,"superClass":["FlowNode","InteractionNode"],"properties":[{"name":"properties","type":"Property","isMany":true}]},{"name":"IntermediateCatchEvent","superClass":["CatchEvent"]},{"name":"IntermediateThrowEvent","superClass":["ThrowEvent"]},{"name":"EndEvent","superClass":["ThrowEvent"]},{"name":"StartEvent","superClass":["CatchEvent"],"properties":[{"name":"isInterrupting","default":true,"isAttr":true,"type":"Boolean"}]},{"name":"ThrowEvent","isAbstract":true,"superClass":["Event"],"properties":[{"name":"dataInputs","type":"DataInput","isMany":true},{"name":"dataInputAssociations","type":"DataInputAssociation","isMany":true},{"name":"inputSet","type":"InputSet"},{"name":"eventDefinitions","type":"EventDefinition","isMany":true},{"name":"eventDefinitionRef","type":"EventDefinition","isMany":true,"isReference":true}]},{"name":"CatchEvent","isAbstract":true,"superClass":["Event"],"properties":[{"name":"parallelMultiple","isAttr":true,"type":"Boolean","default":false},{"name":"dataOutputs","type":"DataOutput","isMany":true},{"name":"dataOutputAssociations","type":"DataOutputAssociation","isMany":true},{"name":"outputSet","type":"OutputSet"},{"name":"eventDefinitions","type":"EventDefinition","isMany":true},{"name":"eventDefinitionRef","type":"EventDefinition","isMany":true,"isReference":true}]},{"name":"BoundaryEvent","superClass":["CatchEvent"],"properties":[{"name":"cancelActivity","default":true,"isAttr":true,"type":"Boolean"},{"name":"attachedToRef","type":"Activity","isAttr":true,"isReference":true}]},{"name":"EventDefinition","isAbstract":true,"superClass":["RootElement"]},{"name":"CancelEventDefinition","superClass":["EventDefinition"]},{"name":"ErrorEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"errorRef","type":"Error","isAttr":true,"isReference":true}]},{"name":"TerminateEndEvent","superClass":["EventDefinition"]},{"name":"EscalationEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"escalationRef","type":"Escalation","isAttr":true,"isReference":true}]},{"name":"Escalation","properties":[{"name":"structureRef","type":"ItemDefinition","isAttr":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"},{"name":"escalationCode","isAttr":true,"type":"String"}],"superClass":["RootElement"]},{"name":"CompensateEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"waitForCompletion","isAttr":true,"type":"Boolean","default":true},{"name":"activityRef","type":"Activity","isAttr":true,"isReference":true}]},{"name":"TimerEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"timeDate","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"timeCycle","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"timeDuration","type":"Expression","xml":{"serialize":"xsi:type"}}]},{"name":"LinkEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"target","type":"LinkEventDefinition","isAttr":true,"isReference":true},{"name":"source","type":"LinkEventDefinition","isMany":true,"isReference":true}]},{"name":"MessageEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"messageRef","type":"Message","isAttr":true,"isReference":true},{"name":"operationRef","type":"Operation","isAttr":true,"isReference":true}]},{"name":"ConditionalEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"condition","type":"Expression","xml":{"serialize":"xsi:type"}}]},{"name":"SignalEventDefinition","superClass":["EventDefinition"],"properties":[{"name":"signalRef","type":"Signal","isAttr":true,"isReference":true}]},{"name":"Signal","superClass":["RootElement"],"properties":[{"name":"structureRef","type":"ItemDefinition","isAttr":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"}]},{"name":"ImplicitThrowEvent","superClass":["ThrowEvent"]},{"name":"DataState","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"}]},{"name":"ItemAwareElement","superClass":["BaseElement"],"properties":[{"name":"itemSubjectRef","type":"ItemDefinition","isAttr":true,"isReference":true},{"name":"dataState","type":"DataState"}]},{"name":"DataAssociation","superClass":["BaseElement"],"properties":[{"name":"assignment","type":"Assignment","isMany":true},{"name":"sourceRef","type":"ItemAwareElement","isMany":true,"isReference":true},{"name":"targetRef","type":"ItemAwareElement","isReference":true},{"name":"transformation","type":"FormalExpression","xml":{"serialize":"property"}}]},{"name":"DataInput","superClass":["ItemAwareElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"isCollection","default":false,"isAttr":true,"type":"Boolean"},{"name":"inputSetRef","type":"InputSet","isVirtual":true,"isMany":true,"isReference":true},{"name":"inputSetWithOptional","type":"InputSet","isVirtual":true,"isMany":true,"isReference":true},{"name":"inputSetWithWhileExecuting","type":"InputSet","isVirtual":true,"isMany":true,"isReference":true}]},{"name":"DataOutput","superClass":["ItemAwareElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"isCollection","default":false,"isAttr":true,"type":"Boolean"},{"name":"outputSetRef","type":"OutputSet","isVirtual":true,"isMany":true,"isReference":true},{"name":"outputSetWithOptional","type":"OutputSet","isVirtual":true,"isMany":true,"isReference":true},{"name":"outputSetWithWhileExecuting","type":"OutputSet","isVirtual":true,"isMany":true,"isReference":true}]},{"name":"InputSet","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"dataInputRefs","type":"DataInput","isMany":true,"isReference":true},{"name":"optionalInputRefs","type":"DataInput","isMany":true,"isReference":true},{"name":"whileExecutingInputRefs","type":"DataInput","isMany":true,"isReference":true},{"name":"outputSetRefs","type":"OutputSet","isMany":true,"isReference":true}]},{"name":"OutputSet","superClass":["BaseElement"],"properties":[{"name":"dataOutputRefs","type":"DataOutput","isMany":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"},{"name":"inputSetRefs","type":"InputSet","isMany":true,"isReference":true},{"name":"optionalOutputRefs","type":"DataOutput","isMany":true,"isReference":true},{"name":"whileExecutingOutputRefs","type":"DataOutput","isMany":true,"isReference":true}]},{"name":"Property","superClass":["ItemAwareElement"],"properties":[{"name":"name","isAttr":true,"type":"String"}]},{"name":"DataInputAssociation","superClass":["DataAssociation"]},{"name":"DataOutputAssociation","superClass":["DataAssociation"]},{"name":"InputOutputSpecification","superClass":["BaseElement"],"properties":[{"name":"dataInputs","type":"DataInput","isMany":true},{"name":"dataOutputs","type":"DataOutput","isMany":true},{"name":"inputSets","type":"InputSet","isMany":true},{"name":"outputSets","type":"OutputSet","isMany":true}]},{"name":"DataObject","superClass":["FlowElement","ItemAwareElement"],"properties":[{"name":"isCollection","default":false,"isAttr":true,"type":"Boolean"}]},{"name":"InputOutputBinding","properties":[{"name":"inputDataRef","type":"InputSet","isAttr":true,"isReference":true},{"name":"outputDataRef","type":"OutputSet","isAttr":true,"isReference":true},{"name":"operationRef","type":"Operation","isAttr":true,"isReference":true}]},{"name":"Assignment","superClass":["BaseElement"],"properties":[{"name":"from","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"to","type":"Expression","xml":{"serialize":"xsi:type"}}]},{"name":"DataStore","superClass":["RootElement","ItemAwareElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"capacity","isAttr":true,"type":"Integer"},{"name":"isUnlimited","default":true,"isAttr":true,"type":"Boolean"}]},{"name":"DataStoreReference","superClass":["ItemAwareElement","FlowElement"],"properties":[{"name":"dataStoreRef","type":"DataStore","isAttr":true,"isReference":true}]},{"name":"DataObjectReference","superClass":["ItemAwareElement","FlowElement"],"properties":[{"name":"dataObjectRef","type":"DataObject","isAttr":true,"isReference":true}]},{"name":"ConversationLink","superClass":["BaseElement"],"properties":[{"name":"sourceRef","type":"InteractionNode","isAttr":true,"isReference":true},{"name":"targetRef","type":"InteractionNode","isAttr":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"}]},{"name":"ConversationAssociation","superClass":["BaseElement"],"properties":[{"name":"innerConversationNodeRef","type":"ConversationNode","isAttr":true,"isReference":true},{"name":"outerConversationNodeRef","type":"ConversationNode","isAttr":true,"isReference":true}]},{"name":"CallConversation","superClass":["ConversationNode"],"properties":[{"name":"calledCollaborationRef","type":"Collaboration","isAttr":true,"isReference":true},{"name":"participantAssociations","type":"ParticipantAssociation","isMany":true}]},{"name":"Conversation","superClass":["ConversationNode"]},{"name":"SubConversation","superClass":["ConversationNode"],"properties":[{"name":"conversationNodes","type":"ConversationNode","isMany":true}]},{"name":"ConversationNode","isAbstract":true,"superClass":["InteractionNode","BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"participantRefs","type":"Participant","isMany":true,"isReference":true},{"name":"messageFlowRefs","type":"MessageFlow","isMany":true,"isReference":true},{"name":"correlationKeys","type":"CorrelationKey","isMany":true}]},{"name":"GlobalConversation","superClass":["Collaboration"]},{"name":"PartnerEntity","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"participantRef","type":"Participant","isMany":true,"isReference":true}]},{"name":"PartnerRole","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"participantRef","type":"Participant","isMany":true,"isReference":true}]},{"name":"CorrelationProperty","superClass":["RootElement"],"properties":[{"name":"correlationPropertyRetrievalExpression","type":"CorrelationPropertyRetrievalExpression","isMany":true},{"name":"name","isAttr":true,"type":"String"},{"name":"type","type":"ItemDefinition","isAttr":true,"isReference":true}]},{"name":"Error","superClass":["RootElement"],"properties":[{"name":"structureRef","type":"ItemDefinition","isAttr":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"},{"name":"errorCode","isAttr":true,"type":"String"}]},{"name":"CorrelationKey","superClass":["BaseElement"],"properties":[{"name":"correlationPropertyRef","type":"CorrelationProperty","isMany":true,"isReference":true},{"name":"name","isAttr":true,"type":"String"}]},{"name":"Expression","superClass":["BaseElement"],"isAbstract":false,"properties":[{"name":"body","type":"String","isBody":true}]},{"name":"FormalExpression","superClass":["Expression"],"properties":[{"name":"language","isAttr":true,"type":"String"},{"name":"evaluatesToTypeRef","type":"ItemDefinition","isAttr":true,"isReference":true}]},{"name":"Message","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"itemRef","type":"ItemDefinition","isAttr":true,"isReference":true}]},{"name":"ItemDefinition","superClass":["RootElement"],"properties":[{"name":"itemKind","type":"ItemKind","isAttr":true},{"name":"structureRef","type":"String","isAttr":true},{"name":"isCollection","default":false,"isAttr":true,"type":"Boolean"},{"name":"import","type":"Import","isAttr":true,"isReference":true}]},{"name":"FlowElement","isAbstract":true,"superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"auditing","type":"Auditing"},{"name":"monitoring","type":"Monitoring"},{"name":"categoryValueRef","type":"CategoryValue","isMany":true,"isReference":true}]},{"name":"SequenceFlow","superClass":["FlowElement"],"properties":[{"name":"isImmediate","isAttr":true,"type":"Boolean"},{"name":"conditionExpression","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"sourceRef","type":"FlowNode","isAttr":true,"isReference":true},{"name":"targetRef","type":"FlowNode","isAttr":true,"isReference":true}]},{"name":"FlowElementsContainer","isAbstract":true,"superClass":["BaseElement"],"properties":[{"name":"laneSets","type":"LaneSet","isMany":true},{"name":"flowElements","type":"FlowElement","isMany":true}]},{"name":"CallableElement","isAbstract":true,"superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"ioSpecification","type":"InputOutputSpecification","xml":{"serialize":"property"}},{"name":"supportedInterfaceRef","type":"Interface","isMany":true,"isReference":true},{"name":"ioBinding","type":"InputOutputBinding","isMany":true,"xml":{"serialize":"property"}}]},{"name":"FlowNode","isAbstract":true,"superClass":["FlowElement"],"properties":[{"name":"incoming","type":"SequenceFlow","isMany":true,"isReference":true},{"name":"outgoing","type":"SequenceFlow","isMany":true,"isReference":true},{"name":"lanes","type":"Lane","isVirtual":true,"isMany":true,"isReference":true}]},{"name":"CorrelationPropertyRetrievalExpression","superClass":["BaseElement"],"properties":[{"name":"messagePath","type":"FormalExpression"},{"name":"messageRef","type":"Message","isAttr":true,"isReference":true}]},{"name":"CorrelationPropertyBinding","superClass":["BaseElement"],"properties":[{"name":"dataPath","type":"FormalExpression"},{"name":"correlationPropertyRef","type":"CorrelationProperty","isAttr":true,"isReference":true}]},{"name":"Resource","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"resourceParameters","type":"ResourceParameter","isMany":true}]},{"name":"ResourceParameter","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"isRequired","isAttr":true,"type":"Boolean"},{"name":"type","type":"ItemDefinition","isAttr":true,"isReference":true}]},{"name":"CorrelationSubscription","superClass":["BaseElement"],"properties":[{"name":"correlationKeyRef","type":"CorrelationKey","isAttr":true,"isReference":true},{"name":"correlationPropertyBinding","type":"CorrelationPropertyBinding","isMany":true}]},{"name":"MessageFlow","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"sourceRef","type":"InteractionNode","isAttr":true,"isReference":true},{"name":"targetRef","type":"InteractionNode","isAttr":true,"isReference":true},{"name":"messageRef","type":"Message","isAttr":true,"isReference":true}]},{"name":"MessageFlowAssociation","superClass":["BaseElement"],"properties":[{"name":"innerMessageFlowRef","type":"MessageFlow","isAttr":true,"isReference":true},{"name":"outerMessageFlowRef","type":"MessageFlow","isAttr":true,"isReference":true}]},{"name":"InteractionNode","isAbstract":true,"properties":[{"name":"incomingConversationLinks","type":"ConversationLink","isVirtual":true,"isMany":true,"isReference":true},{"name":"outgoingConversationLinks","type":"ConversationLink","isVirtual":true,"isMany":true,"isReference":true}]},{"name":"Participant","superClass":["InteractionNode","BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"interfaceRef","type":"Interface","isMany":true,"isReference":true},{"name":"participantMultiplicity","type":"ParticipantMultiplicity"},{"name":"endPointRefs","type":"EndPoint","isMany":true,"isReference":true},{"name":"processRef","type":"Process","isAttr":true,"isReference":true}]},{"name":"ParticipantAssociation","superClass":["BaseElement"],"properties":[{"name":"innerParticipantRef","type":"Participant","isAttr":true,"isReference":true},{"name":"outerParticipantRef","type":"Participant","isAttr":true,"isReference":true}]},{"name":"ParticipantMultiplicity","properties":[{"name":"minimum","default":0,"isAttr":true,"type":"Integer"},{"name":"maximum","default":1,"isAttr":true,"type":"Integer"}],"superClass":["BaseElement"]},{"name":"Collaboration","superClass":["RootElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"isClosed","isAttr":true,"type":"Boolean"},{"name":"participants","type":"Participant","isMany":true},{"name":"messageFlows","type":"MessageFlow","isMany":true},{"name":"artifacts","type":"Artifact","isMany":true},{"name":"conversations","type":"ConversationNode","isMany":true},{"name":"conversationAssociations","type":"ConversationAssociation"},{"name":"participantAssociations","type":"ParticipantAssociation","isMany":true},{"name":"messageFlowAssociations","type":"MessageFlowAssociation","isMany":true},{"name":"correlationKeys","type":"CorrelationKey","isMany":true},{"name":"choreographyRef","type":"Choreography","isMany":true,"isReference":true},{"name":"conversationLinks","type":"ConversationLink","isMany":true}]},{"name":"ChoreographyActivity","isAbstract":true,"superClass":["FlowNode"],"properties":[{"name":"participantRefs","type":"Participant","isMany":true,"isReference":true},{"name":"initiatingParticipantRef","type":"Participant","isAttr":true,"isReference":true},{"name":"correlationKeys","type":"CorrelationKey","isMany":true},{"name":"loopType","type":"ChoreographyLoopType","default":"None","isAttr":true}]},{"name":"CallChoreography","superClass":["ChoreographyActivity"],"properties":[{"name":"calledChoreographyRef","type":"Choreography","isAttr":true,"isReference":true},{"name":"participantAssociations","type":"ParticipantAssociation","isMany":true}]},{"name":"SubChoreography","superClass":["ChoreographyActivity","FlowElementsContainer"],"properties":[{"name":"artifacts","type":"Artifact","isMany":true}]},{"name":"ChoreographyTask","superClass":["ChoreographyActivity"],"properties":[{"name":"messageFlowRef","type":"MessageFlow","isMany":true,"isReference":true}]},{"name":"Choreography","superClass":["FlowElementsContainer","Collaboration"]},{"name":"GlobalChoreographyTask","superClass":["Choreography"],"properties":[{"name":"initiatingParticipantRef","type":"Participant","isAttr":true,"isReference":true}]},{"name":"TextAnnotation","superClass":["Artifact"],"properties":[{"name":"text","type":"String"},{"name":"textFormat","default":"text/plain","isAttr":true,"type":"String"}]},{"name":"Group","superClass":["Artifact"],"properties":[{"name":"categoryValueRef","type":"CategoryValue","isAttr":true,"isReference":true}]},{"name":"Association","superClass":["Artifact"],"properties":[{"name":"associationDirection","type":"AssociationDirection","isAttr":true},{"name":"sourceRef","type":"BaseElement","isAttr":true,"isReference":true},{"name":"targetRef","type":"BaseElement","isAttr":true,"isReference":true}]},{"name":"Category","superClass":["RootElement"],"properties":[{"name":"categoryValue","type":"CategoryValue","isMany":true},{"name":"name","isAttr":true,"type":"String"}]},{"name":"Artifact","isAbstract":true,"superClass":["BaseElement"]},{"name":"CategoryValue","superClass":["BaseElement"],"properties":[{"name":"categorizedFlowElements","type":"FlowElement","isVirtual":true,"isMany":true,"isReference":true},{"name":"value","isAttr":true,"type":"String"}]},{"name":"Activity","isAbstract":true,"superClass":["FlowNode"],"properties":[{"name":"isForCompensation","default":false,"isAttr":true,"type":"Boolean"},{"name":"default","type":"SequenceFlow","isAttr":true,"isReference":true},{"name":"ioSpecification","type":"InputOutputSpecification","xml":{"serialize":"property"}},{"name":"boundaryEventRefs","type":"BoundaryEvent","isMany":true,"isReference":true},{"name":"properties","type":"Property","isMany":true},{"name":"dataInputAssociations","type":"DataInputAssociation","isMany":true},{"name":"dataOutputAssociations","type":"DataOutputAssociation","isMany":true},{"name":"startQuantity","default":1,"isAttr":true,"type":"Integer"},{"name":"resources","type":"ResourceRole","isMany":true},{"name":"completionQuantity","default":1,"isAttr":true,"type":"Integer"},{"name":"loopCharacteristics","type":"LoopCharacteristics"}]},{"name":"ServiceTask","superClass":["Task"],"properties":[{"name":"implementation","isAttr":true,"type":"String"},{"name":"operationRef","type":"Operation","isAttr":true,"isReference":true}]},{"name":"SubProcess","superClass":["Activity","FlowElementsContainer","InteractionNode"],"properties":[{"name":"triggeredByEvent","default":false,"isAttr":true,"type":"Boolean"},{"name":"artifacts","type":"Artifact","isMany":true}]},{"name":"LoopCharacteristics","isAbstract":true,"superClass":["BaseElement"]},{"name":"MultiInstanceLoopCharacteristics","superClass":["LoopCharacteristics"],"properties":[{"name":"isSequential","default":false,"isAttr":true,"type":"Boolean"},{"name":"behavior","type":"MultiInstanceBehavior","default":"All","isAttr":true},{"name":"loopCardinality","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"loopDataInputRef","type":"ItemAwareElement","isReference":true},{"name":"loopDataOutputRef","type":"ItemAwareElement","isReference":true},{"name":"inputDataItem","type":"DataInput","xml":{"serialize":"property"}},{"name":"outputDataItem","type":"DataOutput","xml":{"serialize":"property"}},{"name":"complexBehaviorDefinition","type":"ComplexBehaviorDefinition","isMany":true},{"name":"completionCondition","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"oneBehaviorEventRef","type":"EventDefinition","isAttr":true,"isReference":true},{"name":"noneBehaviorEventRef","type":"EventDefinition","isAttr":true,"isReference":true}]},{"name":"StandardLoopCharacteristics","superClass":["LoopCharacteristics"],"properties":[{"name":"testBefore","default":false,"isAttr":true,"type":"Boolean"},{"name":"loopCondition","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"loopMaximum","type":"Integer","isAttr":true}]},{"name":"CallActivity","superClass":["Activity"],"properties":[{"name":"calledElement","type":"String","isAttr":true}]},{"name":"Task","superClass":["Activity","InteractionNode"]},{"name":"SendTask","superClass":["Task"],"properties":[{"name":"implementation","isAttr":true,"type":"String"},{"name":"operationRef","type":"Operation","isAttr":true,"isReference":true},{"name":"messageRef","type":"Message","isAttr":true,"isReference":true}]},{"name":"ReceiveTask","superClass":["Task"],"properties":[{"name":"implementation","isAttr":true,"type":"String"},{"name":"instantiate","default":false,"isAttr":true,"type":"Boolean"},{"name":"operationRef","type":"Operation","isAttr":true,"isReference":true},{"name":"messageRef","type":"Message","isAttr":true,"isReference":true}]},{"name":"ScriptTask","superClass":["Task"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"script","type":"String"}]},{"name":"BusinessRuleTask","superClass":["Task"],"properties":[{"name":"implementation","isAttr":true,"type":"String"}]},{"name":"AdHocSubProcess","superClass":["SubProcess"],"properties":[{"name":"completionCondition","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"ordering","type":"AdHocOrdering","isAttr":true},{"name":"cancelRemainingInstances","default":true,"isAttr":true,"type":"Boolean"}]},{"name":"Transaction","superClass":["SubProcess"],"properties":[{"name":"protocol","isAttr":true,"type":"String"},{"name":"method","isAttr":true,"type":"String"}]},{"name":"GlobalScriptTask","superClass":["GlobalTask"],"properties":[{"name":"scriptLanguage","isAttr":true,"type":"String"},{"name":"script","isAttr":true,"type":"String"}]},{"name":"GlobalBusinessRuleTask","superClass":["GlobalTask"],"properties":[{"name":"implementation","isAttr":true,"type":"String"}]},{"name":"ComplexBehaviorDefinition","superClass":["BaseElement"],"properties":[{"name":"condition","type":"FormalExpression"},{"name":"event","type":"ImplicitThrowEvent"}]},{"name":"ResourceRole","superClass":["BaseElement"],"properties":[{"name":"resourceRef","type":"Resource","isReference":true},{"name":"resourceParameterBindings","type":"ResourceParameterBinding","isMany":true},{"name":"resourceAssignmentExpression","type":"ResourceAssignmentExpression"},{"name":"name","isAttr":true,"type":"String"}]},{"name":"ResourceParameterBinding","properties":[{"name":"expression","type":"Expression","xml":{"serialize":"xsi:type"}},{"name":"parameterRef","type":"ResourceParameter","isAttr":true,"isReference":true}],"superClass":["BaseElement"]},{"name":"ResourceAssignmentExpression","properties":[{"name":"expression","type":"Expression","xml":{"serialize":"xsi:type"}}],"superClass":["BaseElement"]},{"name":"Import","properties":[{"name":"importType","isAttr":true,"type":"String"},{"name":"location","isAttr":true,"type":"String"},{"name":"namespace","isAttr":true,"type":"String"}]},{"name":"Definitions","superClass":["BaseElement"],"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"targetNamespace","isAttr":true,"type":"String"},{"name":"expressionLanguage","default":"http://www.w3.org/1999/XPath","isAttr":true,"type":"String"},{"name":"typeLanguage","default":"http://www.w3.org/2001/XMLSchema","isAttr":true,"type":"String"},{"name":"imports","type":"Import","isMany":true},{"name":"extensions","type":"Extension","isMany":true},{"name":"rootElements","type":"RootElement","isMany":true},{"name":"diagrams","isMany":true,"type":"bpmndi:BPMNDiagram"},{"name":"exporter","isAttr":true,"type":"String"},{"name":"relationships","type":"Relationship","isMany":true},{"name":"exporterVersion","isAttr":true,"type":"String"}]}],"enumerations":[{"name":"ProcessType","literalValues":[{"name":"None"},{"name":"Public"},{"name":"Private"}]},{"name":"GatewayDirection","literalValues":[{"name":"Unspecified"},{"name":"Converging"},{"name":"Diverging"},{"name":"Mixed"}]},{"name":"EventBasedGatewayType","literalValues":[{"name":"Parallel"},{"name":"Exclusive"}]},{"name":"RelationshipDirection","literalValues":[{"name":"None"},{"name":"Forward"},{"name":"Backward"},{"name":"Both"}]},{"name":"ItemKind","literalValues":[{"name":"Physical"},{"name":"Information"}]},{"name":"ChoreographyLoopType","literalValues":[{"name":"None"},{"name":"Standard"},{"name":"MultiInstanceSequential"},{"name":"MultiInstanceParallel"}]},{"name":"AssociationDirection","literalValues":[{"name":"None"},{"name":"One"},{"name":"Both"}]},{"name":"MultiInstanceBehavior","literalValues":[{"name":"None"},{"name":"One"},{"name":"All"},{"name":"Complex"}]},{"name":"AdHocOrdering","literalValues":[{"name":"Parallel"},{"name":"Sequential"}]}],"prefix":"bpmn","xml":{"tagAlias":"lowerCase","typePrefix":"t"}}')},function(e){e.exports=JSON.parse('{"name":"BPMNDI","uri":"http://www.omg.org/spec/BPMN/20100524/DI","types":[{"name":"BPMNDiagram","properties":[{"name":"plane","type":"BPMNPlane","redefines":"di:Diagram#rootElement"},{"name":"labelStyle","type":"BPMNLabelStyle","isMany":true}],"superClass":["di:Diagram"]},{"name":"BPMNPlane","properties":[{"name":"bpmnElement","isAttr":true,"isReference":true,"type":"bpmn:BaseElement","redefines":"di:DiagramElement#modelElement"}],"superClass":["di:Plane"]},{"name":"BPMNShape","properties":[{"name":"bpmnElement","isAttr":true,"isReference":true,"type":"bpmn:BaseElement","redefines":"di:DiagramElement#modelElement"},{"name":"isHorizontal","isAttr":true,"type":"Boolean"},{"name":"isExpanded","isAttr":true,"type":"Boolean"},{"name":"isMarkerVisible","isAttr":true,"type":"Boolean"},{"name":"label","type":"BPMNLabel"},{"name":"isMessageVisible","isAttr":true,"type":"Boolean"},{"name":"participantBandKind","type":"ParticipantBandKind","isAttr":true},{"name":"choreographyActivityShape","type":"BPMNShape","isAttr":true,"isReference":true}],"superClass":["di:LabeledShape"]},{"name":"BPMNEdge","properties":[{"name":"label","type":"BPMNLabel"},{"name":"bpmnElement","isAttr":true,"isReference":true,"type":"bpmn:BaseElement","redefines":"di:DiagramElement#modelElement"},{"name":"sourceElement","isAttr":true,"isReference":true,"type":"di:DiagramElement","redefines":"di:Edge#source"},{"name":"targetElement","isAttr":true,"isReference":true,"type":"di:DiagramElement","redefines":"di:Edge#target"},{"name":"messageVisibleKind","type":"MessageVisibleKind","isAttr":true,"default":"initiating"}],"superClass":["di:LabeledEdge"]},{"name":"BPMNLabel","properties":[{"name":"labelStyle","type":"BPMNLabelStyle","isAttr":true,"isReference":true,"redefines":"di:DiagramElement#style"}],"superClass":["di:Label"]},{"name":"BPMNLabelStyle","properties":[{"name":"font","type":"dc:Font"}],"superClass":["di:Style"]}],"enumerations":[{"name":"ParticipantBandKind","literalValues":[{"name":"top_initiating"},{"name":"middle_initiating"},{"name":"bottom_initiating"},{"name":"top_non_initiating"},{"name":"middle_non_initiating"},{"name":"bottom_non_initiating"}]},{"name":"MessageVisibleKind","literalValues":[{"name":"initiating"},{"name":"non_initiating"}]}],"associations":[],"prefix":"bpmndi"}')},function(e){e.exports=JSON.parse('{"name":"DC","uri":"http://www.omg.org/spec/DD/20100524/DC","types":[{"name":"Boolean"},{"name":"Integer"},{"name":"Real"},{"name":"String"},{"name":"Font","properties":[{"name":"name","type":"String","isAttr":true},{"name":"size","type":"Real","isAttr":true},{"name":"isBold","type":"Boolean","isAttr":true},{"name":"isItalic","type":"Boolean","isAttr":true},{"name":"isUnderline","type":"Boolean","isAttr":true},{"name":"isStrikeThrough","type":"Boolean","isAttr":true}]},{"name":"Point","properties":[{"name":"x","type":"Real","default":"0","isAttr":true},{"name":"y","type":"Real","default":"0","isAttr":true}]},{"name":"Bounds","properties":[{"name":"x","type":"Real","default":"0","isAttr":true},{"name":"y","type":"Real","default":"0","isAttr":true},{"name":"width","type":"Real","isAttr":true},{"name":"height","type":"Real","isAttr":true}]}],"prefix":"dc","associations":[]}')},function(e){e.exports=JSON.parse('{"name":"DI","uri":"http://www.omg.org/spec/DD/20100524/DI","types":[{"name":"DiagramElement","isAbstract":true,"properties":[{"name":"id","type":"String","isAttr":true,"isId":true},{"name":"extension","type":"Extension"},{"name":"owningDiagram","type":"Diagram","isReadOnly":true,"isVirtual":true,"isReference":true},{"name":"owningElement","type":"DiagramElement","isReadOnly":true,"isVirtual":true,"isReference":true},{"name":"modelElement","isReadOnly":true,"isVirtual":true,"isReference":true,"type":"Element"},{"name":"style","type":"Style","isReadOnly":true,"isVirtual":true,"isReference":true},{"name":"ownedElement","type":"DiagramElement","isReadOnly":true,"isVirtual":true,"isMany":true}]},{"name":"Node","isAbstract":true,"superClass":["DiagramElement"]},{"name":"Edge","isAbstract":true,"superClass":["DiagramElement"],"properties":[{"name":"source","type":"DiagramElement","isReadOnly":true,"isVirtual":true,"isReference":true},{"name":"target","type":"DiagramElement","isReadOnly":true,"isVirtual":true,"isReference":true},{"name":"waypoint","isUnique":false,"isMany":true,"type":"dc:Point","xml":{"serialize":"xsi:type"}}]},{"name":"Diagram","isAbstract":true,"properties":[{"name":"id","type":"String","isAttr":true,"isId":true},{"name":"rootElement","type":"DiagramElement","isReadOnly":true,"isVirtual":true},{"name":"name","isAttr":true,"type":"String"},{"name":"documentation","isAttr":true,"type":"String"},{"name":"resolution","isAttr":true,"type":"Real"},{"name":"ownedStyle","type":"Style","isReadOnly":true,"isVirtual":true,"isMany":true}]},{"name":"Shape","isAbstract":true,"superClass":["Node"],"properties":[{"name":"bounds","type":"dc:Bounds"}]},{"name":"Plane","isAbstract":true,"superClass":["Node"],"properties":[{"name":"planeElement","type":"DiagramElement","subsettedProperty":"DiagramElement-ownedElement","isMany":true}]},{"name":"LabeledEdge","isAbstract":true,"superClass":["Edge"],"properties":[{"name":"ownedLabel","type":"Label","isReadOnly":true,"subsettedProperty":"DiagramElement-ownedElement","isVirtual":true,"isMany":true}]},{"name":"LabeledShape","isAbstract":true,"superClass":["Shape"],"properties":[{"name":"ownedLabel","type":"Label","isReadOnly":true,"subsettedProperty":"DiagramElement-ownedElement","isVirtual":true,"isMany":true}]},{"name":"Label","isAbstract":true,"superClass":["Node"],"properties":[{"name":"bounds","type":"dc:Bounds"}]},{"name":"Style","isAbstract":true,"properties":[{"name":"id","type":"String","isAttr":true,"isId":true}]},{"name":"Extension","properties":[{"name":"values","type":"Element","isMany":true}]}],"associations":[],"prefix":"di","xml":{"tagAlias":"lowerCase"}}')},function(e,t,n){},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);n(6);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=Object.prototype.toString;function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=!!t,null===e)return"null";var n,o,a=r(e);if(t&&"number"===a&&isNaN(e))return"nan";if("object"!==a)return a;try{o=(n=i.call(e).slice(8,-1)).toLowerCase()}catch(e){return"object"}if("object"!==o){if(t){if("number"===o&&isNaN(e))return"NaN";if("number"===o||"boolean"===o||"string"===o)return n}return o}if(e.constructor==Object)return o;try{if(null===Object.getPrototypeOf(e)||null===e.__proto__)return"object"}catch(e){}try{var s=e.constructor.name;if("string"==typeof s)return s}catch(e){}return"unknown"}function s(e){var t=o(e);return"object"===t||"array"===t}function l(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!s(e))return e;try{return JSON.parse(JSON.stringify(e))}catch(e){if(!0===t)throw e;return t}}var u="com.yanhaijing.jsmini.clone"+(new Date).getTime();function c(){this.cacheArray=[]}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}c.prototype.set=function(e,t){this.cacheArray.push(e),e[u]=t},c.prototype.get=function(e){return e[u]},c.prototype.clear=function(){for(var e=0;e<this.cacheArray.length;e++){delete this.cacheArray[e][u]}this.cacheArray.length=0};var y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=document.createElement("span");n.innerHTML="&#xe810;",n.style.visibility="hidden",n.style.fontSize="500px",document.body.appendChild(n);var r=n.offsetWidth,i=n.offsetHeight;n.style.fontFamily=e;var o=setInterval((function(){n.offsetWidth===r&&n.offsetHeight===i||(clearInterval(o),document.body.removeChild(n),n=null,t())}),50)},m=function(e){return"function"==typeof e},g=function(e){return"[object Array]"===Object.prototype.toString.call(e)},v=function(e,t){return"uppercase"===t?e.substring(0,1).toUpperCase()+e.substring(1):e.substring(0,1).toLowerCase()+e.substring(1)},x=function(e,t){for(var n=[],r=e.concat(t),i=0;i<r.length;i++){for(var o=i+1;o<r.length;o++)r[i]===r[o]&&(o=++i);n.push(r[i])}return n},b=function(e){var t=e.data,n=e.plane,r=e.shape;if(t&&n&&r){var i=r.bpmnName,o=j.trigger("element.create",{name:t.name,id:t.id,type:i,prefix:"obj"});t.extensionElements&&(o.data.extensionElements.values=t.extensionElements.values||[]),t.eventDefinitions&&(o.data.eventDefinitions=t.eventDefinitions.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)}))),"SequenceFlow"!==i?(o.data.incoming=t.incoming?t.incoming:"",o.data.outgoing=t.outgoing?t.outgoing:"",t.calledElement&&(o.data.calledElement=t.calledElement||""),j.trigger("model.create",{descriptor:"dc:Bounds",attrs:{height:n.bounds.height,width:n.bounds.width,x:n.bounds.x,y:n.bounds.y}},(function(e){o.plane.bounds=e}))):(o.plane.waypoint=l(n.waypoint),o.data.sourceRef=t.sourceRef?t.sourceRef:"",o.data.targetRef=t.targetRef?t.targetRef:"");var a=j.trigger("shape.create",{type:i,element:o});return"SequenceFlow"===i?a.shape.points=l(r.points):a.shape.shapeStyle=l(r.shapeStyle),a}return null},w=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("object"===p(t)){var r={};for(var i in t)r[i]=t[i],"number"==typeof t[i]&&(r[i]=e(r[i],n));return r}return t*n},S=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if("object"===p(t)){var r={};for(var i in t)r[i]=t[i],"number"==typeof t[i]&&(r[i]=e(r[i],n));return r}return t/n},E=function(e){return e.indexOf(":")>=0?e.substr(e.indexOf(":")+1):""},C={font:function(e,t,n){var r=t.fontStyle,i=t.fontVariant,o=t.fontWeight,a=t.fontSize,s=t.fontFamily,l=t.content,u=t.fontColor,c=t.textAlign,p=t.textBaseline,f=t.x,h=t.y;c&&(e.textAlign=c),p&&(e.textBaseline=p),n.lineStyle&&n.lineStyle.lineColor?e.fillStyle=P(n.lineStyle.lineColor):u&&(e.fillStyle=P(u)),e.font=r+" "+i+" "+o+" "+a+" "+s,e.fillText(l,f,h)},move:function(e,t){e.moveTo(t.x,t.y)},line:function(e,t){e.lineTo(t.x,t.y)},curve:function(e,t){e.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y)},quadraticCurve:function(e,t){e.quadraticCurveTo(t.x1,t.y1,t.x,t.y)},close:function(e){e.closePath()}},k=function(e,t,n){var r="";return e.forEach((function(n,i){t.indexOf(n)<0&&(r+=n+(i!==e.length?",":""))})),-1===r.indexOf(n)},A=function(e){var t={};if(!e)return!1;if("bpmn:Process"===e.$type)t.id=e.id,t.extensions=R(e.extensionElements.values||[]);else{var n=e.data,r=e.shape;for(var i in t.bpmnName=r.bpmnName,t.groupName=r.groupName,n)switch(i){case"$type":case"$instanceOf":break;case"extensionElements":t.extensions=R(n[i].values||[]);break;case"eventDefinitions":t.events=R(n[i]||[]);break;default:t[i]=n[i]}}return t},R=function(e){for(var t=[],n=0;n<e.length;n+=1){var r=Object.assign({},l(e[n]),e[n].$attrs);r.$type&&(r.name=r.$type,delete r.$type),t.push(r)}return t},P=function(e){var t=e.replace(/rgba?\(/,"").replace(/\)/,"").replace(/[\s+]/g,"").split(","),n=parseFloat(t[3]||1),r=Math.floor(n*parseInt(t[0])+255*(1-n)),i=Math.floor(n*parseInt(t[1])+255*(1-n)),o=Math.floor(n*parseInt(t[2])+255*(1-n));return"#"+("0"+r.toString(16)).slice(-2)+("0"+i.toString(16)).slice(-2)+("0"+o.toString(16)).slice(-2)};function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}var N=function(e){return null==e?null:(e=e.replace(/^\s+|\s+$/g,"")).length>0?e.toLowerCase():null},D=function(){function e(){T(this,e),this.fns=[],this.datas=[]}return M(e,[{key:"add",value:function(e,t){this.fns.push(e),this.datas.push(t)}},{key:"remove",value:function(e){var t=this.fns.indexOf(e);t>=0&&(this.fns.splice(t,1),this.datas.splice(t,1))}},{key:"invoke",value:function(e,t){var n=this,r=null;return this.fns.forEach((function(i,o){try{r=i(e,t,n.datas[o])}catch(e){}})),r}}]),e}(),j=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(this,e),this.handers=t}return M(e,[{key:"on",value:function(e,t,n){if(null==(e=N(e)))throw new Error("事件名无效");if(!m(n)){var r=n;n=t,t=r}if(!m(n))throw new Error("必须提供事件函数");var i=this.handers[e];null==i&&(i=new D,this.handers[e]=i),i.add(n,t)}},{key:"off",value:function(e,t){if(null!=(e=N(e))){var n=this.handers[e];null!=n&&(null==t?delete this.handers[e]:n.remove(t))}}},{key:"destroy",value:function(){this.handers={}}},{key:"trigger",value:function(e,t,n){if(null!=(e=N(e))){var r=this.handers[e];return null!=r?r.invoke(t,n):void 0}}}]),e}());function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){var t=Math.PI;return e>=t/4&&e<t/4*3?1:e>=t/4*3&&e<t/4*5?2:e>=t/4*5&&e<t/4*7?3:4},_=function(e,t){var n=Math.atan(Math.abs(e.y-t.y)/Math.abs(e.x-t.x));return t.x<=e.x&&t.y>e.y?n=Math.PI-n:t.x<e.x&&t.y<=e.y?n=Math.PI+n:t.x>=e.x&&t.y<e.y&&(n=2*Math.PI-n),n},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,n=e.split(","),r=parseInt(n[0]),i=parseInt(n[1]),o=parseInt(n[2]),a=Math.round(r-r/255*t);a<0&&(a=0);var s=Math.round(i-i/255*t);s<0&&(s=0);var l=Math.round(o-o/255*t);return l<0&&(l=0),a+","+s+","+l},z=function(e,t,n,r){if(null!=n)return{x:e.x-r*Math.cos(e.angle),y:e.y-r*Math.sin(e.angle)};var i=Math.abs(e.y-t.y),o=Math.abs(e.x-t.x),a=Math.atan(i/o),s={};return e.x<=t.x?s.x=e.x+r*Math.cos(a):s.x=e.x-r*Math.cos(a),e.y<=t.y?s.y=e.y+r*Math.sin(a):s.y=e.y-r*Math.sin(a),s},q=function(e){var t=e.plane,n=e.shape,r=[];if("curve"!==n.linkerType)r.push(t.waypoint[0]),r=r.concat(n.points);else for(var i=0;i<=1;){var o={x:(1-i)*(1-i)*(1-i)*n.points[0].x+3*(1-i)*(1-i)*i*n.points[1].x+3*(1-i)*i*i*n.points[2].x+i*i*i*n.points[n.points.length-1].x,y:(1-i)*(1-i)*(1-i)*n.points[0].y+3*(1-i)*(1-i)*i*n.points[1].y+3*(1-i)*i*i*n.points[2].y+i*i*i*n.points[n.points.length-1].y};r.push(o),i+=.05}return r.push(t.waypoint[t.waypoint.length-1]),r},W=function(e){for(var t=q(e),n=t[0].x,r=t[0].y,i=t[0].x,o=t[0].y,a=0;a<t.length;a+=1){var s=t[a];s.x<n?n=s.x:s.x>i&&(i=s.x),s.y<r?r=s.y:s.y>o&&(o=s.y)}return{x:n,y:r,width:i-n,height:o-r}},H=function(e,t,n,r,i){for(var o=e.find('.shape-box[data-id="'+t+'"]'),a=o.position(),s=o.find(".shape-canvas")[0].getContext("2d"),l=function(e,t,n){for(var r=Math.PI/18,i=[],o=0;o<36;o+=1){var a=r*o,s={x:e-Math.cos(a)*n,y:t-Math.sin(a)*n,angle:a};i.push(s)}return i}(n=w(n)-a.left,r=w(r)-a.top,i),u=l.length,c=!1,p=0;p<u;p+=1){var f=l[p];s.isPointInPath(f.x,f.y)?(f.inPath=!0,c=!0):f.inPath=!1}if(!1===c)return null;for(var h=null,d=null,y=0;y<u;y+=1){var m=l[y];if(!m.inPath&&(null==h&&l[(y-1+u)%u].inPath&&(h=m.angle),null==d&&l[(y+1+u)%u].inPath&&(d=m.angle),null!=h&&null!=d))break}return(h+(2*Math.PI+d-h)%(2*Math.PI)/2)%(2*Math.PI)},G=function(e,t,n){if(0===t)return e;n||(n={x:e.x+e.width/2,y:e.y+e.height/2});var r=V(n,{x:e.x,y:e.y},t),i=V(n,{x:e.x+e.width,y:e.y},t),o=V(n,{x:e.x+e.width,y:e.y+e.height},t),a=V(n,{x:e.x,y:e.y+e.height},t),s=Math.min(r.x,i.x,o.x,a.x),l=Math.min(r.y,i.y,o.y,a.y);return{x:s,y:l,width:Math.max(r.x,i.x,o.x,a.x)-s,height:Math.max(r.y,i.y,o.y,a.y)-l}},V=function(e,t,n){var r=X(e,t);if(0===r||0===n)return t;var i=Math.atan(Math.abs(t.x-e.x)/Math.abs(e.y-t.y));t.x>=e.x&&t.y>=e.y?i=Math.PI-i:t.x<=e.x&&t.y>=e.y?i=Math.PI+i:t.x<=e.x&&t.y<=e.y&&(i=2*Math.PI-i);var o=((i%=2*Math.PI)+n)%(2*Math.PI);return{x:e.x+Math.sin(o)*r,y:e.y-Math.cos(o)*r}},U=function(e){var t=e.plane,n=e.shape;return G(t.bounds,n.shapeStyle.angle)},X=function(e,t){var n=t.y-e.y,r=t.x-e.x;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))},K=function(e,t,n){return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},Y=function(e,t,n){for(var r=q(t),i={x:e.x-n,y:e.y},o={x:e.x+n,y:e.y},a={x:e.x,y:e.y-n},s={x:e.x,y:e.y+n},l=1;l<r.length;l+=1){var u=r[l-1],c=r[l],p=J(i,o,u,c);if(p)return l;if(p=J(a,s,u,c))return l}return-1},J=function(e,t,n,r){var i=!1,o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(0!==o){var a=((e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y))/o,s=((e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y))/o;a>=0&&a<=1&&s>=0&&s<=1&&(i=!0)}return i},Q={getAngle:_,getAngleDir:L,getBounding:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},n=0;n<e.length;n+=1){var r=e[n],i=void 0;i="SequenceFlow"===r.shape.bpmnName?W(r):r.plane.bounds,(null==t.x1||i.x<t.x1)&&(t.x1=i.x),(null==t.y1||i.y<t.y1)&&(t.y1=i.y),(null==t.x2||i.x+i.width>t.x2)&&(t.x2=i.x+i.width),(null==t.y2||i.y+i.height>t.y2)&&(t.y2=i.y+i.height)}return{x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}},getConnectionLength:function(e){for(var t=q(e),n=0,r=1;r<t.length;r+=1){var i=t[r-1],o=t[r];n+=X(i,o)}return n},getConnectionMidpoint:function(e){var t={},n=e.plane.waypoint,r=n[0],i=n[n.length-1];if("normal"===e.linkerType)t.x=.5*r.x+.5*i.x,t.y=.5*r.y+.5*i.y;else if("curve"===e.linkerType)t.x=.125*r.x+.375*e.points[0].x+.375*e.points[1].x+.125*i.x,t.y=.125*r.y+.375*e.points[0].y+.375*e.points[1].y+.125*i.y;else{var o=[];o.push(r),(o=o.concat(e.points)).push(i);for(var a=0,s=1;s<o.length;s+=1)a+=X(o[s-1],o[s]);for(var l=a/2,u=0,c=1;c<o.length;c+=1){var p=o[c-1],f=o[c],h=u+X(p,f);if(h>l){var d=(l-u)/h;t.x=(1-d)*p.x+d*f.x,t.y=(1-d)*p.y+d*f.y;break}u=h}}return t},getConnectionPoints:function(e,t){var n=e.data,r=n.sourceRef,i=n.targetRef,o=t[r],a=t[i],s=e.plane.waypoint,l=s[0],u=s[s.length-1],c=[];if("broken"===e.linkerType){var p,f,h,d,y,m=Math.abs(u.x-l.x),g=Math.abs(u.y-l.y),v=Math.PI,x=30,b=!1;if(null!=r&&null!=i){var w=L(l.angle),S=L(u.angle);1===w&&1===S?(l.y<u.y?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n){var r=30,i=[],o=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),a=o.x,s=o.width,l={};return t.x>=a-r&&t.x<=a+s+r?(t.x<a+s/2?l.x=a-r:l.x=a+s+r,l.y=e.y-r,i.push({x:e.x,y:l.y}),i.push({x:l.x,y:l.y}),l.y=t.y-r,i.push({x:l.x,y:l.y}),i.push({x:t.x,y:l.y})):(l.y=e.y-r,i.push({x:e.x,y:l.y}),i.push({x:t.x,y:l.y})),i}(p,f,h)):3===w&&3===S?(l.y>u.y?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n){var r=30,i=[],o=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),a=o.x,s=o.width,l={};return t.x>=a-r&&t.x<=a+s+r?(t.x<a+s/2?l.x=a-r:l.x=a+s+r,l.y=e.y+r,i.push({x:e.x,y:l.y}),i.push({x:l.x,y:l.y}),l.y=t.y+r,i.push({x:l.x,y:l.y}),i.push({x:t.x,y:l.y})):(l.y=e.y+r,i.push({x:e.x,y:l.y}),i.push({x:t.x,y:l.y})),i}(p,f,h)):2===w&&2===S?(l.y>u.y?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n){var r=30,i=[],o=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),a=o.y,s=o.height,l={};return t.y>=a-r&&t.y<=a+s+r?(l.x=e.x+r,t.y<a+s/2?l.y=a-r:l.y=a+s+r,i.push({x:l.x,y:e.y}),i.push({x:l.x,y:l.y}),l.x=t.x+r,i.push({x:l.x,y:l.y}),i.push({x:l.x,y:t.y})):(l.x=e.x+r,i.push({x:l.x,y:e.y}),i.push({x:l.x,y:t.y})),i}(p,f,h)):4===w&&4===S?(l.x<u.x?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n){var r=30,i=[],o=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),a=o.y,s=o.height,l={};return t.y>=a-r&&t.y<=a+s+r?(l.x=e.x+r,t.y<a+s/2?l.y=a-r:l.y=a+s+r,i.push({x:l.x,y:e.y}),i.push({x:l.x,y:l.y}),l.x=t.x-r,i.push({x:l.x,y:l.y}),i.push({x:l.x,y:t.y})):(l.x=e.x-r,i.push({x:l.x,y:e.y}),i.push({x:l.x,y:t.y})),i}(p,f,h)):1===w&&3===S||3===w&&1===S?(1===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r,i){var o=30,a=[],s=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),l=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),u={};if(t.y<=e.y)u.y=e.y-i/2,a.push({x:e.x,y:u.y}),a.push({x:t.x,y:u.y});else{var c=s.x+s.width,p=l.x+l.width;if(u.y=e.y-o,p>=s.x&&l.x<=c){var f=s.x+s.width/2;t.x<f?u.x=s.x<l.x?s.x-o:l.x-o:u.x=c>p?c+o:p+o,l.y<e.y&&(u.y=l.y-o)}else t.x<e.x?u.x=p+(s.x-p)/2:u.x=c+(l.x-c)/2;a.push({x:e.x,y:u.y}),a.push({x:u.x,y:u.y}),u.y=t.y+o,a.push({x:u.x,y:u.y}),a.push({x:t.x,y:u.y})}return a}(p,f,h,d,g)):2===w&&4===S||4===w&&2===S?(2===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r,i){var o=30,a=[],s=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),l=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),u={};if(t.x>e.x)u.x=e.x+i/2,a.push({x:u.x,y:e.y}),a.push({x:u.x,y:t.y});else{var c=s.y+s.height,p=l.y+l.height;if(u.x=e.x+o,p>=s.y&&l.y<=c){var f=s.y+s.height/2;t.y<f?u.y=s.y<l.y?s.y-o:l.y-o:u.y=c>p?c+o:p+o,l.x+l.width>e.x&&(u.x=l.x+l.width+o)}else t.y<e.y?u.y=p+(s.y-p)/2:u.y=c+(l.y-c)/2;a.push({x:u.x,y:e.y}),a.push({x:u.x,y:u.y}),u.x=t.x-o,a.push({x:u.x,y:u.y}),a.push({x:u.x,y:t.y})}return a}(p,f,h,d,m)):1===w&&2===S||2===w&&1===S?(2===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r){var i=30,o=[],a=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),s=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),l={};if(t.x>e.x&&t.y>e.y)o.push({x:t.x,y:e.y});else if(t.x>e.x&&s.x>e.x)s.x-e.x<60?l.x=e.x+(s.x-e.x)/2:l.x=e.x+i,l.y=t.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y});else if(t.x<=e.x&&t.y>a.y+a.height){var u=a.y+a.height;l.x=e.x+i,t.y-u<60?l.y=u+(t.y-u)/2:l.y=t.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})}else{var c=s.x+s.width;c>e.x?l.x=c+i:l.x=e.x+i,t.y<a.y?l.y=t.y-i:l.y=a.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})}return o}(p,f,h,d)):1===w&&4===S||4===w&&1===S?(4===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r){var i=30,o=[],a=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),s=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),l={},u=s.x+s.width;if(t.x<e.x&&t.y>e.y)o.push({x:t.x,y:e.y});else if(t.x<e.x&&u<e.x)e.x-u<60?l.x=u+(e.x-u)/2:l.x=e.x-i,l.y=t.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y});else if(t.x>=e.x&&t.y>a.y+a.height){var c=a.y+a.height;l.x=e.x-i,t.y-c<60?l.y=c+(t.y-c)/2:l.y=t.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})}else s.x<e.x?l.x=s.x-i:l.x=e.x-i,t.y<a.y?l.y=t.y-i:l.y=a.y-i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y});return o}(p,f,h,d)):2===w&&3===S||3===w&&2===S?(2===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r){var i=30,o=[],a=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),s=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),l={};if(t.x>e.x&&t.y<e.y)o.push({x:t.x,y:e.y});else if(t.x>e.x&&s.x>e.x)s.x-e.x<60?l.x=e.x+(s.x-e.x)/2:l.x=e.x+i,l.y=t.y+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y});else if(t.x<=e.x&&t.y<a.y)l.x=e.x+i,a.y-t.y<60?l.y=t.y+(a.y-t.y)/2:l.y=t.y+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y});else{var u=s.x+s.width;u>e.x?l.x=u+i:l.x=e.x+i,t.y>a.y+a.height?l.y=t.y+i:l.y=a.y+a.height+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})}return o}(p,f,h,d)):(3===w&&4===S||4===w&&3===S)&&(4===w?(p=l,f=u,h=o,d=a,b=!1):(p=u,f=l,h=a,d=o,b=!0),c=function(e,t,n,r){var i=30,o=[],a=n?n.plane.bounds:B(B({},e),{},{width:0,height:0}),s=r?r.plane.bounds:B(B({},t),{},{width:0,height:0}),l={},u=s.x+s.width;return t.x<e.x&&t.y<e.y?o.push({x:t.x,y:e.y}):t.x<e.x&&u<e.x?(e.x-u<60?l.x=u+(e.x-u)/2:l.x=e.x-i,l.y=t.y+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})):t.x>=e.x&&t.y<a.y?(l.x=e.x-i,a.y-t.y<60?l.y=t.y+(a.y-t.y)/2:l.y=t.y+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})):(s.x<e.x?l.x=s.x-i:l.x=e.x-i,t.y>a.y+a.height?l.y=t.y+i:l.y=a.y+a.height+i,o.push({x:l.x,y:e.y}),o.push({x:l.x,y:l.y}),o.push({x:t.x,y:l.y})),o}(p,f,h,d)),b&&c.reverse()}else if(null!=r||null!=i){null!=r?(p=l,f=u,h=o,d=a,b=!1,y=l.angle):(p=u,f=l,h=a,d=o,b=!0,y=u.angle);var E=h.plane.bounds;if(y>=v/4&&y<v/4*3)if(f.y<p.y)if(m>=g)c.push({x:p.x,y:f.y});else{var C=g/2;c.push({x:p.x,y:p.y-C}),c.push({x:f.x,y:p.y-C})}else if(c.push({x:p.x,y:p.y-x}),m>=g)if(f.x>=E.x-x&&f.x<=E.x+E.width+x){var k=E.x+E.width/2;f.x<k?(c.push({x:E.x-x,y:p.y-x}),c.push({x:E.x-x,y:f.y})):(c.push({x:E.x+E.width+x,y:p.y-x}),c.push({x:E.x+E.width+x,y:f.y}))}else f.x<E.x?(c.push({x:f.x+x,y:p.y-x}),c.push({x:f.x+x,y:f.y})):(c.push({x:f.x-x,y:p.y-x}),c.push({x:f.x-x,y:f.y}));else if(f.x>=E.x-x&&f.x<=E.x+E.width+x){var A=E.x+E.width/2;f.x<A?(c.push({x:E.x-x,y:p.y-x}),c.push({x:E.x-x,y:f.y-x}),c.push({x:f.x,y:f.y-x})):(c.push({x:E.x+E.width+x,y:p.y-x}),c.push({x:E.x+E.width+x,y:f.y-x}),c.push({x:f.x,y:f.y-x}))}else c.push({x:f.x,y:p.y-x});else if(y>=v/4*3&&y<v/4*5)if(f.x>p.x)m>=g?(c.push({x:p.x+m/2,y:p.y}),c.push({x:p.x+m/2,y:f.y})):c.push({x:f.x,y:p.y});else if(c.push({x:p.x+x,y:p.y}),m>=g)if(f.y>=E.y-x&&f.y<=E.y+E.height+x){var R=E.y+E.height/2;f.y<R?(c.push({x:p.x+x,y:E.y-x}),c.push({x:f.x+x,y:E.y-x}),c.push({x:f.x+x,y:f.y})):(c.push({x:p.x+x,y:E.y+E.height+x}),c.push({x:f.x+x,y:E.y+E.height+x}),c.push({x:f.x+x,y:f.y}))}else c.push({x:p.x+x,y:f.y});else if(f.y>=E.y-x&&f.y<=E.y+E.height+x){var P=E.y+E.height/2;f.y<P?(c.push({x:p.x+x,y:E.y-x}),c.push({x:f.x,y:E.y-x})):(c.push({x:p.x+x,y:E.y+E.height+x}),c.push({x:f.x,y:E.y+E.height+x}))}else f.y<p.y?(c.push({x:p.x+x,y:f.y+x}),c.push({x:f.x,y:f.y+x})):(c.push({x:p.x+x,y:f.y-x}),c.push({x:f.x,y:f.y-x}));else if(y>=v/4*5&&y<v/4*7)if(f.y>p.y)m>=g?c.push({x:p.x,y:f.y}):(c.push({x:p.x,y:p.y+g/2}),c.push({x:f.x,y:p.y+g/2}));else if(c.push({x:p.x,y:p.y+x}),m>=g)if(f.x>=E.x-x&&f.x<=E.x+E.width+x){var T=E.x+E.width/2;f.x<T?(c.push({x:E.x-x,y:p.y+x}),c.push({x:E.x-x,y:f.y})):(c.push({x:E.x+E.width+x,y:p.y+x}),c.push({x:E.x+E.width+x,y:f.y}))}else f.x<E.x?(c.push({x:f.x+x,y:p.y+x}),c.push({x:f.x+x,y:f.y})):(c.push({x:f.x-x,y:p.y+x}),c.push({x:f.x-x,y:f.y}));else if(f.x>=E.x-x&&f.x<=E.x+E.width+x){var O=E.x+E.width/2;f.x<O?(c.push({x:E.x-x,y:p.y+x}),c.push({x:E.x-x,y:f.y+x}),c.push({x:f.x,y:f.y+x})):(c.push({x:E.x+E.width+x,y:p.y+x}),c.push({x:E.x+E.width+x,y:f.y+x}),c.push({x:f.x,y:f.y+x}))}else c.push({x:f.x,y:p.y+x});else if(f.x<p.x)m>=g?(c.push({x:p.x-m/2,y:p.y}),c.push({x:p.x-m/2,y:f.y})):c.push({x:f.x,y:p.y});else if(c.push({x:p.x-x,y:p.y}),m>=g)if(f.y>=E.y-x&&f.y<=E.y+E.height+x){var M=E.y+E.height/2;f.y<M?(c.push({x:p.x-x,y:E.y-x}),c.push({x:f.x-x,y:E.y-x}),c.push({x:f.x-x,y:f.y})):(c.push({x:p.x-x,y:E.y+E.height+x}),c.push({x:f.x-x,y:E.y+E.height+x}),c.push({x:f.x-x,y:f.y}))}else c.push({x:p.x-x,y:f.y});else if(f.y>=E.y-x&&f.y<=E.y+E.height+x){var N=E.y+E.height/2;f.y<N?(c.push({x:p.x-x,y:E.y-x}),c.push({x:f.x,y:E.y-x})):(c.push({x:p.x-x,y:E.y+E.height+x}),c.push({x:f.x,y:E.y+E.height+x}))}else f.y<p.y?(c.push({x:p.x-x,y:f.y+x}),c.push({x:f.x,y:f.y+x})):(c.push({x:p.x-x,y:f.y-x}),c.push({x:f.x,y:f.y-x}));b&&c.reverse()}else if(m>=g){var D=(u.x-l.x)/2;c.push({x:l.x+D,y:l.y}),c.push({x:l.x+D,y:u.y})}else{var j=(u.y-l.y)/2;c.push({x:l.x,y:l.y+j}),c.push({x:u.x,y:l.y+j})}}else if("curve"===e.linkerType){var I=.4*X(l,u);c.push(z(l,u,r,I)),c.push(z(u,l,i,I))}return c},getEndpointAngle:function(e,t){var n,r=e.data,i=(r.sourceRef,r.targetRef,e.plane.waypoint),o=i[0],a=i[i.length-1];if("normal"===e.linkerType)n="source"===t?a:o;else if("broken"===e.linkerType)n="source"===t?e.points[0]:e.points[e.points.length-1];else{var s,l=X(o,a);n={x:(1-(s="source"===t?12/l:1-12/l))*(1-s)*(1-s)*o.x+3*(1-s)*(1-s)*s*e.points[0].x+3*(1-s)*s*s*e.points[1].x+s*s*s*a.x,y:(1-s)*(1-s)*(1-s)*o.y+3*(1-s)*(1-s)*s*e.points[0].y+3*(1-s)*s*s*e.points[1].y+s*s*s*a.y}}return _(n,"source"===t?o:a)},getElementsBox:function(e){for(var t={x1:null,y1:null,x2:null,y2:null},n=0;n<e.length;n+=1){var r=e[n],i=j.trigger("element.get",r),o=(i.data,i.plane,void 0);o="SequenceFlow"===i.shape.bpmnName?W(i):U(i),(null==t.x1||o.x<t.x1)&&(t.x1=o.x),(null==t.y1||o.y<t.y1)&&(t.y1=o.y),(null==t.x2||o.x+o.width>t.x2)&&(t.x2=o.x+o.width),(null==t.y2||o.y+o.height>t.y2)&&(t.y2=o.y+o.height)}var a={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1};return a.x?a:null},getElementIdsByRange:function(e){var t=j.trigger("element.get"),n=[];for(var r in t){var i=t[r],o=i.plane.bounds;o="SequenceFlow"===i.shape.bpmnName?W(i):U(i),K(o.x,o.y,e)&&K(o.x+o.width,o.y,e)&&K(o.x+o.width,o.y+o.height,e)&&K(o.x,o.y+o.height,e)&&n.push(i.data.id)}return n},getConnectionBox:W,getLighterColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,n=e.split(","),r=parseInt(n[0]),i=parseInt(n[1]),o=parseInt(n[2]),a=Math.round(r+(255-r)/255*t);a>255&&(a=255);var s=Math.round(i+(255-i)/255*t);s>255&&(s=255);var l=Math.round(o+(255-o)/255*t);return l>255&&(l=255),a+","+s+","+l},getDarkerColor:F,getDarkestColor:function(e){return F(e,26)},getOutConnections:function(e){for(var t=[],n=[],r=j.trigger("shape.select.getIds"),i=0;i<e.length;i+=1){var o=e[i];if("SequenceFlow"!==o.shape.bpmnName){var a=j.trigger("connections.get",o.data.id);if(a&&a.length>0)for(var s=0;s<a.length;s+=1){var l=a[s];!(r.indexOf(l)>=0)&&n.indexOf(l)<0&&(t.push(j.trigger("element.get",l)),n.push(l))}}}return t},getPointAngle:H,getRelativePos:function(e,t,n,r){var i=n.offset(),o=n.children().position();return null==i&&(i.left=0,i.top=0),{x:e-i.left+Math.abs(o.left),y:t-i.top+Math.abs(o.top)}},getRotated:V,getRotatedBox:G,getSelectedConnectionIds:function(){for(var e=j.trigger("shape.select.get"),t=[],n=0;n<e.length;n+=1){var r=e[n];"SequenceFlow"===r.shape.bpmnName&&t.push(r.data.id)}return t},getShapeByPosition:function(e,t,n,r){var i=[],o=j.trigger("element.get");for(var a in o){var s=o[a],l=s.data,u=s.plane,c=s.shape,p=n.find('.shape-box[data-id="'+l.id+'"]'),f=p.position(),h=e-f.left,d=t-f.top,y=void 0,m=void 0,g={x:f.left,y:f.top,width:p.width(),height:p.height()},v=p.find(".shape-canvas")[0].getContext("2d"),x=K(e,t,g);if("SequenceFlow"===c.bpmnName){if(!x)continue;if(r)continue;m={x:e-(y=w(10)),y:t-y,width:2*y,height:2*y};var b={x:u.waypoint[0].x,y:u.waypoint[0].y},E={x:u.waypoint[u.waypoint.length-1].x,y:u.waypoint[u.waypoint.length-1].y};if(K(w(E.x),w(E.y),m)){var C={type:"sequence_point",point:"target",element:s};i.push(C);continue}if(K(w(b.x),w(b.y),m)){var k={type:"sequence_point",point:"source",element:s};i.push(k);continue}var A=p.find(".text-box"),R=A.position(),P={x:R.left,y:R.top,width:A.width(),height:A.height()};if(K(h,d,P)){var T={type:"sequence_text",element:s};i.push(T);continue}y=w(7);var O=Y({x:S(e),y:S(t)},s,y);if(O>-1){i.push({type:"sequence",element:s,pointIndex:O});continue}}else{if(x&&c.locked&&!r){v.isPointInPath(h,d)&&i.push({type:"shape",element:s});continue}if(y=w(7),x){m={x:e-y,y:t-y,width:2*y,height:2*y},g={x:u.bounds.x+u.bounds.width/2,y:u.bounds.y+u.bounds.height/2};for(var M=c.getAnchors(),N=null,D=0;D<M.length;D+=1){var I=V(g,{x:u.bounds.x+M[D].x,y:u.bounds.y+M[D].y},c.shapeStyle.angle);if(K(w(I.x),w(I.y),m)){I.angle=H(n,l.id,I.x,I.y,y),N={type:"bounds",element:s,anchor:I},v.isPointInPath(h,d)&&(N.inPath=!0);break}}if(null!=N){i.push(N);continue}}if(!x)continue;if(v.isPointInPath(h,d)){if(r){var B=c.getAnchors();if(B&&B.length){i.push({type:"shape",element:s});continue}continue}i.push({type:"shape",element:s});continue}}}i.sort((function(e,t){return t.element.shape.shapeStyle.zindex-e.element.shape.shapeStyle.zindex}));var $=null;if(1===i.length&&($=i[0]),i.length>1&&r)$=i[0];else if(i.length>1){if("bounds"===i[0].type&&"sequence_point"!==i[0].type&&"sequence"!==i[0].type)return i[0];for(var L=[],_=[],F=[],z=0;z<i.length;z+=1){var q=i[z];"bounds"===q.type?F.push(q):"sequence"===q.type?L.push(q):"sequence_point"===q.type&&_.push(q)}if(F.length>0&&_.length>0)for(var W=0;W<F.length;W+=1)if(F[W].inPath){$=F[W];break}null==$&&_.length>0&&(_.sort((function(e,t){return j.trigger("shape.select.check",e.element.data.id)&&!j.trigger("shape.select.check",t.element.data.id)?-1:!j.trigger("shape.select.check",e.element.data.id)&&j.trigger("shape.select.check",t.element.data.id)?1:t.element.shape.shapeStyle.zindex-e.element.shape.shapeStyle.zindex})),$=_[0]),null==$&&L.length>0&&(L.sort((function(e,t){return j.trigger("shape.select.check",e.element.data.id)&&!j.trigger("shape.select.check",t.element.data.id)?-1:!j.trigger("shape.select.check",e.element.data.id)&&j.trigger("shape.select.check",t.element.data.id)?1:t.element.shape.shapeStyle.zindex-e.element.shape.shapeStyle.zindex})),$=L[0]),null==$&&($=i[0])}return $},getShapeBox:U,checkRang:function(e,t){return!!(t.x>e.x&&t.x<e.x+e.width&&t.y>e.y&&t.y<e.y+e.height)},measureDistance:X,setLineDash:function(e,t){e.setLineDash||(e.setLineDash=function(){}),e.setLineDash(t),e.mozDash=t,e.webkitLineDash=t}};function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=function(){var e=[],t=window.document,n=Object.getPrototypeOf,r=e.slice,i=e.concat,o=e.push,a=e.indexOf,s={},l=s.toString,u=s.hasOwnProperty,c=u.toString,p=c.call(Object),f={},h=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},d=function(e){return null!=e&&e===e.window},y={type:!0,src:!0,noModule:!0};function m(e,n,r){var i,o=(n=n||t).createElement("script");if(o.text=e,r)for(i in y)r[i]&&(o[i]=r[i]);n.head.appendChild(o).parentNode.removeChild(o)}function g(e){return null==e?e+"":"object"===Z(e)||"function"==typeof e?s[l.call(e)]||"object":Z(e)}var v=function e(t,n){return new e.fn.Init(t,n)},x=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function b(e){var t=!!e&&"length"in e&&e.length,n=g(e);return!h(e)&&!d(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}v.fn=v.prototype={slimJQ:"3.3.1",constructor:v,length:0,toArray:function(){return r.call(this)},get:function(e){return null==e?r.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return v.each(this,e)},map:function(e){return this.pushStack(v.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:e.sort,splice:e.splice},v.extend=v.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"===Z(a)||h(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(v.isPlainObject(r)||(i=Array.isArray(r)))?(i?(i=!1,o=n&&Array.isArray(n)?n:[]):o=n&&v.isPlainObject(n)?n:{},a[t]=v.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},v.extend({expando:"SlimJQ"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==l.call(e))&&(!(t=n(e))||"function"==typeof(r=u.call(t,"constructor")&&t.constructor)&&c.call(r)===p)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){m(e)},each:function(e,t){var n,r=0;if(b(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(x,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?v.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,o,a=0,s=[];if(b(e))for(r=e.length;a<r;a++)null!=(o=t(e[a],a,n))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,n))&&s.push(o);return i.apply([],s)},guid:1,support:f}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=e[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){s["[object "+t+"]"]=t.toLowerCase()}));var w=function(e){var t,n,r,i,o,a,s,l,u,c,p,f,h,d,y,m,g,v,x,b="sizzle"+1*new Date,w=e.document,S=0,E=0,C=ae(),k=ae(),A=ae(),R=function(e,t){return e===t&&(p=!0),0},P={}.hasOwnProperty,T=[],O=T.pop,M=T.push,N=T.push,D=T.slice,j=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},I="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",$="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",L="\\["+B+"*("+$+")(?:"+B+"*([*^$|!~]?=)"+B+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+$+"))|)"+B+"*\\]",_=":("+$+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+L+")*)|.*)\\)|)",F=new RegExp(B+"+","g"),z=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),q=new RegExp("^"+B+"*,"+B+"*"),W=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),H=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),G=new RegExp(_),V=new RegExp("^"+$+"$"),U={ID:new RegExp("^#("+$+")"),CLASS:new RegExp("^\\.("+$+")"),TAG:new RegExp("^("+$+"|[*])"),ATTR:new RegExp("^"+L),PSEUDO:new RegExp("^"+_),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+I+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),ee=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ne=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},re=function(){f()},ie=ve((function(e){return!0===e.disabled&&("form"in e||"label"in e)}),{dir:"parentNode",next:"legend"});try{N.apply(T=D.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(e){N={apply:T.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function oe(e,t,r,i){var o,s,u,c,p,d,g,v=t&&t.ownerDocument,S=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==S&&9!==S&&11!==S)return r;if(!i&&((t?t.ownerDocument||t:w)!==h&&f(t),t=t||h,y)){if(11!==S&&(p=J.exec(e)))if(o=p[1]){if(9===S){if(!(u=t.getElementById(o)))return r;if(u.id===o)return r.push(u),r}else if(v&&(u=v.getElementById(o))&&x(t,u)&&u.id===o)return r.push(u),r}else{if(p[2])return N.apply(r,t.getElementsByTagName(e)),r;if((o=p[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))){if(1!==S)v=t,g=e;else if("object"!==t.nodeName.toLowerCase()){for((c=t.getAttribute("id"))?c=c.replace(te,ne):t.setAttribute("id",c=b),s=(d=a(e)).length;s--;)d[s]="#"+c+" "+ge(d[s]);g=d.join(","),v=Q.test(e)&&ye(t.parentNode)||t}if(g)try{return N.apply(r,v.querySelectorAll(g)),r}catch(e){}finally{c===b&&t.removeAttribute("id")}}}return l(e.replace(z,"$1"),t,r,i)}function ae(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function se(e){return e[b]=!0,e}function le(e){var t=h.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ue(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function pe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function he(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function de(e){return se((function(t){return t=+t,se((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=oe.support={},o=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},f=oe.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!==h&&9===a.nodeType&&a.documentElement?(d=(h=a).documentElement,y=!o(h),w!==h&&(i=h.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",re,!1):i.attachEvent&&i.attachEvent("onunload",re)),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(h.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Y.test(h.getElementsByClassName),n.getById=le((function(e){return d.appendChild(e).id=b,!h.getElementsByName||!h.getElementsByName(b).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(Z,ee);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&y)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=Y.test(h.querySelectorAll))&&(le((function(e){d.appendChild(e).innerHTML="<a id='"+b+"'></a><select id='"+b+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+B+"*(?:value|"+I+")"),e.querySelectorAll("[id~="+b+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+b+"+*").length||m.push(".#.+[+~]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=h.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+B+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),d.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Y.test(v=d.matches||d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&le((function(e){n.disconnectedMatch=v.call(e,"*"),v.call(e,"[s!='']:x"),g.push("!=",_)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=Y.test(d.compareDocumentPosition),x=t||Y.test(d.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},R=t?function(e,t){if(e===t)return p=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===h||e.ownerDocument===w&&x(w,e)?-1:t===h||t.ownerDocument===w&&x(w,t)?1:c?j(c,e)-j(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return p=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===h?-1:t===h?1:i?-1:o?1:c?j(c,e)-j(c,t):0;if(i===o)return ce(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ce(a[r],s[r]):a[r]===w?-1:s[r]===w?1:0},h):h},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==h&&f(e),t=t.replace(H,"='$1']"),n.matchesSelector&&y&&!A[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=v.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return oe(t,h,null,[e]).length>0},oe.contains=function(e,t){return(e.ownerDocument||e)!==h&&f(e),x(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==h&&f(e);var i=r.attrHandle[t.toLowerCase()],o=i&&P.call(r.attrHandle,t.toLowerCase())?i(e,t,!y):void 0;return void 0!==o?o:n.attributes||!y?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},oe.escape=function(e){return(e+"").replace(te,ne)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,r=[],i=0,o=0;if(p=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(R),p){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return c=null,e},i=oe.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=oe.selectors={cacheLength:50,createPseudo:se,match:U,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Z,ee),e[3]=(e[3]||e[4]||e[5]||"").replace(Z,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return U.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Z,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=C[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&C(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=oe.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,p,f,h,d,y=o!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),v=!l&&!s,x=!1;if(m){if(o){for(;y;){for(f=t;f=f[y];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;d=y="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?m.firstChild:m.lastChild],a&&v){for(x=(h=(u=(c=(p=(f=m)[b]||(f[b]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1])&&u[2],f=h&&m.childNodes[h];f=++h&&f&&f[y]||(x=h=0)||d.pop();)if(1===f.nodeType&&++x&&f===t){c[e]=[S,h,x];break}}else if(v&&(x=h=(u=(c=(p=(f=t)[b]||(f[b]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]||[])[0]===S&&u[1]),!1===x)for(;(f=++h&&f&&f[y]||(x=h=0)||d.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++x||(v&&((c=(p=f[b]||(f[b]={}))[f.uniqueID]||(p[f.uniqueID]={}))[e]=[S,x]),f!==t)););return(x-=i)===r||x%r==0&&x/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return i[b]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?se((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=j(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:se((function(e){var t=[],n=[],r=s(e.replace(z,"$1"));return r[b]?se((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:se((function(e){return function(t){return oe(e,t).length>0}})),contains:se((function(e){return e=e.replace(Z,ee),function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}})),lang:se((function(e){return V.test(e||"")||oe.error("unsupported lang: "+e),e=e.replace(Z,ee).toLowerCase(),function(t){var n;do{if(n=y?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===d},focus:function(e){return e===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:he(!1),disabled:he(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return X.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:de((function(){return[0]})),last:de((function(e,t){return[t-1]})),eq:de((function(e,t,n){return[n<0?n+t:n]})),even:de((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:de((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:de((function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e})),gt:de((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=pe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=fe(t);function me(){}function ge(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function ve(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=E++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var u,c,p,f=[S,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(c=(p=t[b]||(t[b]={}))[t.uniqueID]||(p[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((u=c[o])&&u[0]===S&&u[1]===s)return f[2]=u[2];if(c[o]=f,f[2]=e(t,n,l))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function be(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function we(e,t,n,r,i,o){return r&&!r[b]&&(r=we(r)),i&&!i[b]&&(i=we(i,o)),se((function(o,a,s,l){var u,c,p,f=[],h=[],d=a.length,y=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)oe(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?y:be(y,f,e,s,l),g=n?i||(o?e:d||r)?[]:a:m;if(n&&n(m,g,s,l),r)for(u=be(g,h),r(u,[],s,l),c=u.length;c--;)(p=u[c])&&(g[h[c]]=!(m[h[c]]=p));if(o){if(i||e){if(i){for(u=[],c=g.length;c--;)(p=g[c])&&u.push(m[c]=p);i(null,g=[],u,l)}for(c=g.length;c--;)(p=g[c])&&(u=i?j(o,p):f[c])>-1&&(o[u]=!(a[u]=p))}}else g=be(g===a?g.splice(d,g.length):g),i?i(null,a,g,l):N.apply(a,g)}))}function Se(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,c=ve((function(e){return e===t}),s,!0),p=ve((function(e){return j(t,e)>-1}),s,!0),f=[function(e,n,r){var i=!a&&(r||n!==u)||((t=n).nodeType?c(e,n,r):p(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])f=[ve(xe(f),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[b]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return we(l>1&&xe(f),l>1&&ge(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(z,"$1"),n,l<i&&Se(e.slice(l,i)),i<o&&Se(e=e.slice(i)),i<o&&ge(e))}f.push(n)}return xe(f)}return me.prototype=r.filters=r.pseudos,r.setFilters=new me,a=oe.tokenize=function(e,t){var n,i,o,a,s,l,u,c=k[e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=r.preFilter;s;){for(a in n&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=W.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(z," ")}),s=s.slice(n.length)),r.filter)!(i=U[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?oe.error(e):k(e,l).slice(0)},s=oe.compile=function(e,t){var n,i=[],o=[],s=A[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Se(t[n]))[b]?i.push(s):o.push(s);(s=A(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,c){var p,d,m,g=0,v="0",x=o&&[],b=[],w=u,E=o||i&&r.find.TAG("*",c),C=S+=null==w?1:Math.random()||.1,k=E.length;for(c&&(u=a===h||a||c);v!==k&&null!=(p=E[v]);v++){if(i&&p){for(d=0,a||p.ownerDocument===h||(f(p),s=!y);m=e[d++];)if(m(p,a||h,s)){l.push(p);break}c&&(S=C)}n&&((p=!m&&p)&&g--,o&&x.push(p))}if(g+=v,n&&v!==g){for(d=0;m=t[d++];)m(x,b,a,s);if(o){if(g>0)for(;v--;)x[v]||b[v]||(b[v]=O.call(l));b=be(b)}N.apply(l,b),c&&!o&&b.length>0&&g+t.length>1&&oe.uniqueSort(l)}return c&&(S=C,u=w),x};return n?se(o):o}(o,i))).selector=e}return s},l=oe.select=function(e,t,n,i){var o,l,u,c,p,f="function"==typeof e&&e,h=!i&&a(e=f.selector||e);if(n=n||[],1===h.length){if((l=h[0]=h[0].slice(0)).length>2&&"ID"===(u=l[0]).type&&9===t.nodeType&&y&&r.relative[l[1].type]){if(!(t=(r.find.ID(u.matches[0].replace(Z,ee),t)||[])[0]))return n;f&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=U.needsContext.test(e)?0:l.length;o--&&(u=l[o],!r.relative[c=u.type]);)if((p=r.find[c])&&(i=p(u.matches[0].replace(Z,ee),Q.test(l[0].type)&&ye(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&ge(l)))return N.apply(n,i),n;break}}return(f||s(e,h))(i,t,!y,n,!t||Q.test(e)&&ye(t.parentNode)||t),n},n.sortStable=b.split("").sort(R).join("")===b,n.detectDuplicates=!!p,f(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(h.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||ue("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||ue("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||ue(I,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),oe}(window);v.find=w,(v.expr=w.selectors)[":"]=v.expr.pseudos,v.uniqueSort=v.unique=w.uniqueSort,v.text=w.getText,v.isXMLDoc=w.isXML,v.contains=w.contains,v.escapeSelector=w.escape;var S=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&v(e).is(n))break;r.push(e)}return r},E=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},C=v.expr.match.needsContext;function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var A,R=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function P(e,t,n){return h(t)?v.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?v.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?v.grep(e,(function(e){return a.call(t,e)>-1!==n})):v.filter(t,e,n)}v.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?v.find.matchesSelector(r,e)?[r]:[]:v.find.matches(e,v.grep(t,(function(e){return 1===e.nodeType})))},v.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(v(e).filter((function(){for(t=0;t<r;t++)if(v.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)v.find(e,i[t],n);return r>1?v.uniqueSort(n):n},filter:function(e){return this.pushStack(P(this,e||[],!1))},not:function(e){return this.pushStack(P(this,e||[],!0))},is:function(e){return!!P(this,"string"==typeof e&&C.test(e)?v(e):e||[],!1).length}});var T=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(v.fn.Init=function(e,n,r){var i,o;if(!e)return this;if(r=r||A,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:T.exec(e))||!i[1]&&n)return!n||n.slimJQ?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof v?n[0]:n,v.merge(this,v.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:t,!0)),R.test(i[1])&&v.isPlainObject(n))for(i in n)h(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}return(o=t.getElementById(i[2]))&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):h(e)?void 0!==r.ready?r.ready(e):e(v):v.makeArray(e,this)}).prototype=v.fn,A=v(t);var O=/^(?:parents|prev(?:Until|All))/,M={children:!0,contents:!0,next:!0,prev:!0};function N(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.fn.extend({has:function(e){var t=v(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(v.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&v(e);if(!C.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&v.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?v.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?a.call(v(e),this[0]):a.call(this,e.slimJQ?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return S(e,"parentNode")},parentsUntil:function(e,t,n){return S(e,"parentNode",n)},next:function(e){return N(e,"nextSibling")},prev:function(e){return N(e,"previousSibling")},nextAll:function(e){return S(e,"nextSibling")},prevAll:function(e){return S(e,"previousSibling")},nextUntil:function(e,t,n){return S(e,"nextSibling",n)},prevUntil:function(e,t,n){return S(e,"previousSibling",n)},siblings:function(e){return E((e.parentNode||{}).firstChild,e)},children:function(e){return E(e.firstChild)},contents:function(e){return k(e,"iframe")?e.contentDocument:(k(e,"template")&&(e=e.content||e),v.merge([],e.childNodes))}},(function(e,t){v.fn[e]=function(n,r){var i=v.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=v.filter(r,i)),this.length>1&&(M[e]||v.uniqueSort(i),O.test(e)&&i.reverse()),this.pushStack(i)}}));var D=/[^\x20\t\r\n\f]+/g;function j(e){return e}function I(e){throw e}function B(e,t,n,r){var i;try{e&&h(i=e.promise)?i.call(e).done(t).fail(n):e&&h(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}v.Callbacks=function(e){var t,n,r,i;e="string"==typeof e?function(e){var t={};return v.each(e.match(D)||[],(function(e,n){t[n]=!0})),t}(e):v.extend({},e);var o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){v.each(n,(function(n,r){h(r)?e.unique&&u.has(r)||o.push(r):r&&r.length&&"string"!==g(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return v.each(arguments,(function(e,t){for(var n;(n=v.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?v.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!r}};return u},v.extend({Deferred:function(e){var t=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return v.Deferred((function(n){v.each(t,(function(t,r){var o=h(e[r[4]])&&e[r[4]];i[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&h(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var i=0;function o(e,t,n,r){return function(){var a=this,s=arguments,l=function(){var l,u;if(!(e<i)){if((l=n.apply(a,s))===t.promise())throw new TypeError("Thenable self-resolution");u=l&&("object"===Z(l)||"function"==typeof l)&&l.then,h(u)?r?u.call(l,o(i,t,j,r),o(i,t,I,r)):(i++,u.call(l,o(i,t,j,r),o(i,t,I,r),o(i,t,j,t.notifyWith))):(n!==j&&(a=void 0,s=[l]),(r||t.resolveWith)(a,s))}},u=r?l:function(){try{l()}catch(r){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(r,u.stackTrace),e+1>=i&&(n!==I&&(a=void 0,s=[r]),t.rejectWith(a,s))}};e?u():(v.Deferred.getStackHook&&(u.stackTrace=v.Deferred.getStackHook()),window.setTimeout(u))}}return v.Deferred((function(i){t[0][3].add(o(0,i,h(r)?r:j,i.notifyWith)),t[1][3].add(o(0,i,h(e)?e:j)),t[2][3].add(o(0,i,h(n)?n:I))})).promise()},promise:function(e){return null!=e?v.extend(e,r):r}},i={};return v.each(t,(function(e,o){var a=o[2],s=o[5];r[o[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(o[3].fire),i[o[0]]=function(){return i[o[0]+"With"](this===i?void 0:this,arguments),this},i[o[0]+"With"]=a.fireWith})),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,n=t,i=Array(n),o=r.call(arguments),a=v.Deferred(),s=function(e){return function(n){i[e]=this,o[e]=arguments.length>1?r.call(arguments):n,--t||a.resolveWith(i,o)}};if(t<=1&&(B(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||h(o[n]&&o[n].then)))return a.then();for(;n--;)B(o[n],s(n),a.reject);return a.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(e,t){window.console&&window.console.warn&&e&&$.test(e.name)&&window.console.warn("SlimJQ.Deferred exception: "+e.message,e.stack,t)},v.readyException=function(e){window.setTimeout((function(){throw e}))};var L=v.Deferred();function _(){t.removeEventListener("DOMContentLoaded",_),window.removeEventListener("load",_),v.ready()}v.fn.ready=function(e){return L.then(e).catch((function(e){v.readyException(e)})),this},v.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||L.resolveWith(t,[v]))}}),v.ready.then=L.then,"complete"===t.readyState||"loading"!==t.readyState&&!t.documentElement.doScroll?window.setTimeout(v.ready):(t.addEventListener("DOMContentLoaded",_),window.addEventListener("load",_));var F=function e(t,n,r,i,o,a,s){var l=0,u=t.length,c=null==r;if("object"===g(r))for(l in o=!0,r)e(t,n,l,r[l],!0,a,s);else if(void 0!==i&&(o=!0,h(i)||(s=!0),c&&(s?(n.call(t,i),n=null):(c=n,n=function(e,t,n){return c.call(v(e),n)})),n))for(;l<u;l++)n(t[l],r,s?i:i.call(t[l],l,n(t[l],r)));return o?t:c?n.call(t):u?n(t[0],r):a},z=/^-ms-/,q=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function H(e){return e.replace(z,"ms-").replace(q,W)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=v.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[H(t)]=n;else for(r in t)i[H(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][H(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(H):(t=H(t))in r?[t]:t.match(D)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||v.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!v.isEmptyObject(t)}};var U=new V,X=new V,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Y=/[A-Z]/g;function J(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Y,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:K.test(e)?JSON.parse(e):e)}(n)}catch(e){}X.set(e,t,n)}else n=void 0;return n}v.extend({hasData:function(e){return X.hasData(e)||U.hasData(e)},data:function(e,t,n){return X.access(e,t,n)},removeData:function(e,t){X.remove(e,t)},_data:function(e,t,n){return U.access(e,t,n)},_removeData:function(e,t){U.remove(e,t)}}),v.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=X.get(o),1===o.nodeType&&!U.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=H(r.slice(5)),J(o,r,i[r]));U.set(o,"hasDataAttrs",!0)}return i}return"object"===Z(e)?this.each((function(){X.set(this,e)})):F(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=X.get(o,e))||void 0!==(n=J(o,e))?n:void 0;this.each((function(){X.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){X.remove(this,e)}))}}),v.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=U.get(e,t),n&&(!r||Array.isArray(n)?r=U.access(e,t,v.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){var n=v.queue(e,t=t||"fx"),r=n.length,i=n.shift(),o=v._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){v.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return U.get(e,n)||U.access(e,n,{empty:v.Callbacks("once memory").add((function(){U.remove(e,[t+"queue",n])}))})}}),v.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?v.queue(this[0],e):void 0===t?this:this.each((function(){var n=v.queue(this,e,t);v._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&v.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){v.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=v.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=U.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ee=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),te=["Top","Right","Bottom","Left"],ne=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&v.contains(e.ownerDocument,e)&&"none"===v.css(e,"display")},re=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};var ie={};function oe(e){var t,n=e.ownerDocument,r=e.nodeName,i=ie[r];return i||(t=n.body.appendChild(n.createElement(r)),i=v.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ie[r]=i,i)}function ae(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=U.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ne(r)&&(i[o]=oe(r))):"none"!==n&&(i[o]="none",U.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}v.fn.extend({show:function(){return ae(this,!0)},hide:function(){return ae(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ne(this)?v(this).show():v(this).hide()}))}});var se=/^(?:checkbox|radio)$/i,le=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ue=/^$|^module$|\/(?:java|ecma)script/i,ce={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function pe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?v.merge([e],n):n}function fe(e,t){for(var n=0,r=e.length;n<r;n++)U.set(e[n],"globalEval",!t||U.get(t[n],"globalEval"))}ce.optgroup=ce.option,ce.tbody=ce.tfoot=ce.colgroup=ce.caption=ce.thead,ce.th=ce.td;var he,de,ye=/<|&#?\w+;/;function me(e,t,n,r,i){for(var o,a,s,l,u,c,p=t.createDocumentFragment(),f=[],h=0,d=e.length;h<d;h++)if((o=e[h])||0===o)if("object"===g(o))v.merge(f,o.nodeType?[o]:o);else if(ye.test(o)){for(a=a||p.appendChild(t.createElement("div")),s=(le.exec(o)||["",""])[1].toLowerCase(),l=ce[s]||ce._default,a.innerHTML=l[1]+v.htmlPrefilter(o)+l[2],c=l[0];c--;)a=a.lastChild;v.merge(f,a.childNodes),(a=p.firstChild).textContent=""}else f.push(t.createTextNode(o));for(p.textContent="",h=0;o=f[h++];)if(r&&v.inArray(o,r)>-1)i&&i.push(o);else if(u=v.contains(o.ownerDocument,o),a=pe(p.appendChild(o),"script"),u&&fe(a),n)for(c=0;o=a[c++];)ue.test(o.type||"")&&n.push(o);return p}he=t.createDocumentFragment().appendChild(t.createElement("div")),(de=t.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),he.appendChild(de),f.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue;var ge=t.documentElement,ve=/^key/,xe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Se(){return!1}function Ee(){try{return t.activeElement}catch(e){}}function Ce(e,t,n,r,i,o){var a,s;if("object"===Z(t)){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ce(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return v().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=v.guid++)),e.each((function(){v.event.add(this,t,i,r,n)}))}v.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,h,d,y,m=U.get(e);if(m)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&v.find.matchesSelector(ge,i),n.guid||(n.guid=v.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return void 0!==v&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(D)||[""]).length;u--;)h=y=(s=be.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),h&&(p=v.event.special[h]||{},h=(i?p.delegateType:p.bindType)||h,p=v.event.special[h]||{},c=v.extend({type:h,origType:y,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&v.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=l[h])||((f=l[h]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(e,r,d,a)||e.addEventListener&&e.addEventListener(h,a)),p.add&&(p.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),v.event.global[h]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,p,f,h,d,y,m=U.hasData(e)&&U.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(D)||[""]).length;u--;)if(h=y=(s=be.exec(t[u])||[])[1],d=(s[2]||"").split(".").sort(),h){for(p=v.event.special[h]||{},f=l[h=(r?p.delegateType:p.bindType)||h]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&y!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,p.remove&&p.remove.call(e,c));a&&!f.length&&(p.teardown&&!1!==p.teardown.call(e,d,m.handle)||v.removeEvent(e,h,m.handle),delete l[h])}else for(h in l)v.event.remove(e,h+t[u],n,r,!0);v.isEmptyObject(l)&&U.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=v.event.fix(e),l=new Array(arguments.length),u=(U.get(this,"events")||{})[s.type]||[],c=v.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(a=v.event.handlers.call(this,s,u),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((v.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,l))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?v(i,this).index(u)>-1:v.find(i,this,null,[u]).length),a[i]&&o.push(r);o.length&&s.push({elem:u,handlers:o})}return u=this,l<t.length&&s.push({elem:u,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(v.Event.prototype,e,{enumerable:!0,configurable:!0,get:h(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[v.expando]?e:new v.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ee()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&k(this,"input"))return this.click(),!1},_default:function(e){return k(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},v.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},(v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[v.expando]=!0}).prototype={constructor:v.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ve.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&xe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},v.event.addProp),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||v.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),v.fn.extend({on:function(e,t,n,r){return Ce(this,e,t,n,r)},one:function(e,t,n,r){return Ce(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,v(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===Z(e)){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each((function(){v.event.remove(this,e,n,t)}))}});var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ae=/<script|<style|<link/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Te(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&v(e).children("tbody")[0]||e}function Oe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(U.hasData(e)&&(o=U.access(e),a=U.set(t,o),u=o.events))for(i in delete a.handle,a.events={},u)for(n=0,r=u[i].length;n<r;n++)v.event.add(t,i,u[i][n]);X.hasData(e)&&(s=X.access(e),l=v.extend({},s),X.set(t,l))}}function De(e,t){var n=t.nodeName.toLowerCase();"input"===n&&se.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function je(e,t,n,r){var o,a,s,l,u,c;t=i.apply([],t);var p=0,d=e.length,y=d-1,g=t[0],x=h(g);if(x||d>1&&"string"==typeof g&&!f.checkClone&&Re.test(g))return e.each((function(i){var o=e.eq(i);x&&(t[0]=g.call(this,i,o.html())),je(o,t,n,r)}));if(d&&(a=(o=me(t,e[0].ownerDocument,!1,e,r)).firstChild,1===o.childNodes.length&&(o=a),a||r)){for(l=(s=v.map(pe(o,"script"),Oe)).length;p<d;p++)u=o,p!==y&&(u=v.clone(u,!0,!0),l&&v.merge(s,pe(u,"script"))),n.call(e[p],u,p);if(l)for(c=s[s.length-1].ownerDocument,v.map(s,Me),p=0;p<l;p++)u=s[p],ue.test(u.type||"")&&!U.access(u,"globalEval")&&v.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?v._evalUrl&&v._evalUrl(u.src):m(u.textContent.replace(Pe,""),c,u))}return e}function Ie(e,t,n){for(var r,i=t?v.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||v.cleanData(pe(r)),r.parentNode&&(n&&v.contains(r.ownerDocument,r)&&fe(pe(r,"script")),r.parentNode.removeChild(r));return e}v.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=v.contains(e.ownerDocument,e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(a=pe(s),r=0,i=(o=pe(e)).length;r<i;r++)De(o[r],a[r]);if(t)if(n)for(o=o||pe(e),a=a||pe(s),r=0,i=o.length;r<i;r++)Ne(o[r],a[r]);else Ne(e,s);return(a=pe(s,"script")).length>0&&fe(a,!l&&pe(e,"script")),s},cleanData:function(e){for(var t,n,r,i=v.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[U.expando]){if(t.events)for(r in t.events)i[r]?v.event.remove(n,r):v.removeEvent(n,r,t.handle);n[U.expando]=void 0}n[X.expando]&&(n[X.expando]=void 0)}}}),v.fn.extend({detach:function(e){return Ie(this,e,!0)},remove:function(e){return Ie(this,e)},text:function(e){return F(this,(function(e){return void 0===e?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return je(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Te(this,e).appendChild(e)}))},prepend:function(){return je(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Te(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return je(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(pe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return v.clone(this,e,t)}))},html:function(e){return F(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!ce[(le.exec(e)||["",""])[1].toLowerCase()]){e=v.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(v.cleanData(pe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return je(this,arguments,(function(t){var n=this.parentNode;v.inArray(this,e)<0&&(v.cleanData(pe(this)),n&&n.replaceChild(t,this))}),e)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){v.fn[e]=function(e){for(var n,r=[],i=v(e),a=i.length-1,s=0;s<=a;s++)n=s===a?this:this.clone(!0),v(i[s])[t](n),o.apply(r,n.get());return this.pushStack(r)}}));var Be=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),$e=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},Le=new RegExp(te.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||$e(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||v.contains(e.ownerDocument,e)||(a=v.style(e,t)),!f.pixelBoxStyles()&&Be.test(a)&&Le.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ge.appendChild(l).appendChild(u);var e=window.getComputedStyle(u);r="1%"!==e.top,s=12===n(e.marginLeft),u.style.right="60%",a=36===n(e.right),i=36===n(e.width),u.style.position="absolute",o=36===u.offsetWidth||"absolute",ge.removeChild(l),u=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,l=t.createElement("div"),u=t.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,v.extend(f,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),o}}))}();var ze,qe=/^(none|table(?!-c[ea]).+)/,We=/^--/,He={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},Ve=["Webkit","Moz","ms"],Ue=t.createElement("div").style;function Xe(e){var t=v.cssProps[e];return t||(t=v.cssProps[e]=function(e){if(e in Ue)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Ve.length;n--;)if((e=Ve[n]+t)in Ue)return e}(e)||e),t}function Ke(e,t,n){var r=ee.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ye(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=v.css(e,n+te[a],!0,i)),r?("content"===n&&(l-=v.css(e,"padding"+te[a],!0,i)),"margin"!==n&&(l-=v.css(e,"border"+te[a]+"Width",!0,i))):(l+=v.css(e,"padding"+te[a],!0,i),"padding"!==n?l+=v.css(e,"border"+te[a]+"Width",!0,i):s+=v.css(e,"border"+te[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))),l}function Je(e,t,n){var r=$e(e),i=_e(e,t,r),o="border-box"===v.css(e,"boxSizing",!1,r),a=o;if(Be.test(i)){if(!n)return i;i="auto"}return a=a&&(f.boxSizingReliable()||i===e.style[t]),("auto"===i||!parseFloat(i)&&"inline"===v.css(e,"display",!1,r))&&(i=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(i=parseFloat(i)||0)+Ye(e,t,n||(o?"border":"content"),a,r,i)+"px"}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=H(t),l=We.test(t),u=e.style;if(l||(t=Xe(s)),a=v.cssHooks[t]||v.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:u[t];"string"===(o=Z(n))&&(i=ee.exec(n))&&i[1]&&(n=function(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return v.css(e,t,"")},l=s(),u=n&&n[3]||(v.cssNumber[t]?"":"px"),c=(v.cssNumber[t]||"px"!==u&&+l)&&ee.exec(v.css(e,t));if(c&&c[3]!==u){for(l/=2,u=u||c[3],c=+l||1;a--;)v.style(e,t,c+u),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),c/=o;v.style(e,t,(c*=2)+u),n=n||[]}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(v.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,r){var i,o,a,s=H(t);return We.test(t)||(t=Xe(s)),(a=v.cssHooks[t]||v.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),v.each(["height","width"],(function(e,t){v.cssHooks[t]={get:function(e,n,r){if(n)return!qe.test(v.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,t,r):re(e,He,(function(){return Je(e,t,r)}))},set:function(e,n,r){var i,o=$e(e),a="border-box"===v.css(e,"boxSizing",!1,o),s=r&&Ye(e,t,r,a,o);return a&&f.scrollboxSize()===o.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Ye(e,t,"border",!1,o)-.5)),s&&(i=ee.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=v.css(e,t)),Ke(0,n,s)}}})),v.cssHooks.marginLeft=Fe(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-re(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),v.each({margin:"",padding:"",border:"Width"},(function(e,t){v.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+te[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(v.cssHooks[e+t].set=Ke)})),v.fn.extend({css:function(e,t){return F(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=v.css(e,t[a],!1,r);return o}return void 0!==n?v.style(e,t,n):v.css(e,t)}),e,t,arguments.length>1)}}),v.fn.delay=function(e,t){return e=v.fx&&v.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=window.setTimeout(t,e);n.stop=function(){window.clearTimeout(r)}}))},function(){var e=t.createElement("input"),n=t.createElement("select").appendChild(t.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=n.selected,(e=t.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var Qe=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return F(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){v.removeAttr(this,e)}))}}),v.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?v.prop(e,t,n):(1===o&&v.isXMLDoc(e)||(i=v.attrHooks[t.toLowerCase()]||(v.expr.match.bool.test(t)?ze:void 0)),void 0!==n?null===n?void v.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=v.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ze={set:function(e,t,n){return!1===t?v.removeAttr(e,n):e.setAttribute(n,n),n}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Qe[t]||v.find.attr;Qe[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=Qe[a],Qe[a]=i,i=null!=n(e,t,r)?a:null,Qe[a]=o),i}}));var Ze=/^(?:input|select|textarea|button)$/i,et=/^(?:a|area)$/i;function tt(e){return(e.match(D)||[]).join(" ")}function nt(e){return e.getAttribute&&e.getAttribute("class")||""}function rt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}v.fn.extend({prop:function(e,t){return F(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[v.propFix[e]||e]}))}}),v.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&v.isXMLDoc(e)||(t=v.propFix[t]||t,i=v.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=v.find.attr(e,"tabindex");return t?parseInt(t,10):Ze.test(e.nodeName)||et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this})),v.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,l=0;if(h(e))return this.each((function(t){v(this).addClass(e.call(this,t,nt(this)))}));if((t=rt(e)).length)for(;n=this[l++];)if(i=nt(n),r=1===n.nodeType&&" "+tt(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=tt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,l=0;if(h(e))return this.each((function(t){v(this).removeClass(e.call(this,t,nt(this)))}));if(!arguments.length)return this.attr("class","");if((t=rt(e)).length)for(;n=this[l++];)if(i=nt(n),r=1===n.nodeType&&" "+tt(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");i!==(s=tt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=Z(e),r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):h(e)?this.each((function(n){v(this).toggleClass(e.call(this,n,nt(this),t),t)})):this.each((function(){var t,i,o,a;if(r)for(i=0,o=v(this),a=rt(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=nt(this))&&U.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":U.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+tt(nt(n))+" ").indexOf(t)>-1)return!0;return!1}});var it=/\r/g;v.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=h(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,v(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=v.map(i,(function(e){return null==e?"":e+""}))),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=v.valHooks[i.type]||v.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(it,""):null==n?"":n:void 0}}),v.extend({valHooks:{option:{get:function(e){var t=v.find.attr(e,"value");return null!=t?t:tt(v.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=v(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=v.makeArray(t),a=i.length;a--;)((r=i[a]).selected=v.inArray(v.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=v.inArray(v(e).val(),t)>-1}},f.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in window;var ot=/^(?:focusinfocus|focusoutblur)$/,at=function(e){e.stopPropagation()};v.extend(v.event,{trigger:function(e,n,r,i){var o,a,s,l,c,p,f,y,m=[r||t],g=u.call(e,"type")?e.type:e,x=u.call(e,"namespace")?e.namespace.split("."):[];if(a=y=s=r=r||t,3!==r.nodeType&&8!==r.nodeType&&!ot.test(g+v.event.triggered)&&(g.indexOf(".")>-1&&(x=g.split("."),g=x.shift(),x.sort()),c=g.indexOf(":")<0&&"on"+g,(e=e[v.expando]?e:new v.Event(g,"object"===Z(e)&&e)).isTrigger=i?2:3,e.namespace=x.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+x.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:v.makeArray(n,[e]),f=v.event.special[g]||{},i||!f.trigger||!1!==f.trigger.apply(r,n))){if(!i&&!f.noBubble&&!d(r)){for(l=f.delegateType||g,ot.test(l+g)||(a=a.parentNode);a;a=a.parentNode)m.push(a),s=a;s===(r.ownerDocument||t)&&m.push(s.defaultView||s.parentWindow||window)}for(o=0;(a=m[o++])&&!e.isPropagationStopped();)y=a,e.type=o>1?l:f.bindType||g,(p=(U.get(a,"events")||{})[e.type]&&U.get(a,"handle"))&&p.apply(a,n),(p=c&&a[c])&&p.apply&&G(a)&&(e.result=p.apply(a,n),!1===e.result&&e.preventDefault());return e.type=g,i||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),n)||!G(r)||c&&h(r[g])&&!d(r)&&((s=r[c])&&(r[c]=null),v.event.triggered=g,e.isPropagationStopped()&&y.addEventListener(g,at),r[g](),e.isPropagationStopped()&&y.removeEventListener(g,at),v.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=v.extend(new v.Event,n,{type:e,isSimulated:!0});v.event.trigger(r,null,t)}}),v.fn.extend({trigger:function(e,t){return this.each((function(){v.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return v.event.trigger(e,t,n,!0)}}),f.focusin||v.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){v.event.simulate(t,e.target,v.event.fix(e))};v.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=U.access(r,t);i||r.addEventListener(e,n,!0),U.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=U.access(r,t)-1;i?U.access(r,t,i):(r.removeEventListener(e,n,!0),U.remove(r,t))}}}));var st,lt=/\[\]$/,ut=/\r?\n/g,ct=/^(?:submit|button|image|reset|file)$/i,pt=/^(?:input|select|textarea|keygen)/i;function ft(e,t,n,r){var i;if(Array.isArray(t))v.each(t,(function(t,i){n||lt.test(e)?r(e,i):ft(e+"["+("object"===Z(i)&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==g(t))r(e,t);else for(i in t)ft(e+"["+i+"]",t[i],n,r)}return v.param=function(e,t){var n,r=[],i=function(e,t){var n=h(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(e)||e.slimJQ&&!v.isPlainObject(e))v.each(e,(function(){i(this.name,this.value)}));else for(n in e)ft(n,e[n],t,i);return r.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=v.prop(this,"elements");return e?v.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!v(this).is(":disabled")&&pt.test(this.nodeName)&&!ct.test(e)&&(this.checked||!se.test(e))})).map((function(e,t){var n=v(this).val();return null==n?null:Array.isArray(n)?v.map(n,(function(e){return{name:t.name,value:e.replace(ut,"\r\n")}})):{name:t.name,value:n.replace(ut,"\r\n")}})).get()}}),v.fn.extend({wrapAll:function(e){var t;return this[0]&&(h(e)&&(e=e.call(this[0])),t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return h(e)?this.each((function(t){v(this).wrapInner(e.call(this,t))})):this.each((function(){var t=v(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=h(e);return this.each((function(n){v(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){v(this).replaceWith(this.childNodes)})),this}}),v.expr.pseudos.hidden=function(e){return!v.expr.pseudos.visible(e)},v.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},f.createHTMLDocument=((st=t.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===st.childNodes.length),v.parseHTML=function(e,n,r){return"string"!=typeof e?[]:("boolean"==typeof n&&(r=n,n=!1),n||(f.createHTMLDocument?((i=(n=t.implementation.createHTMLDocument("")).createElement("base")).href=t.location.href,n.head.appendChild(i)):n=t),a=!r&&[],(o=R.exec(e))?[n.createElement(o[1])]:(o=me([e],n,a),a&&a.length&&v(a).remove(),v.merge([],o.childNodes)));var i,o,a},v.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=v.css(e,"position"),c=v(e),p={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=v.css(e,"top"),l=v.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),h(t)&&(t=t.call(e,n,v.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):c.css(p)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){v.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===v.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===v.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=v(e).offset()).top+=v.css(e,"borderTopWidth",!0),i.left+=v.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-v.css(r,"marginTop",!0),left:t.left-i.left-v.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===v.css(e,"position");)e=e.offsetParent;return e||ge}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;v.fn[e]=function(r){return F(this,(function(e,r,i){var o;if(d(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),v.each(["top","left"],(function(e,t){v.cssHooks[t]=Fe(f.pixelPosition,(function(e,n){if(n)return n=_e(e,t),Be.test(n)?v(e).position()[t]+"px":n}))})),v.each({Height:"height",Width:"width"},(function(e,t){v.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){v.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return F(this,(function(t,n,i){var o;return d(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?v.css(t,n,s):v.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){v.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),v.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),v.proxy=function(e,t){var n,i,o;if("string"==typeof t&&(n=e[t],t=e,e=n),h(e))return i=r.call(arguments,2),(o=function(){return e.apply(t||this,i.concat(r.call(arguments)))}).guid=e.guid=e.guid||v.guid++,o},v.holdReady=function(e){e?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=k,v.isFunction=h,v.isWindow=d,v.camelCase=H,v.type=g,v.now=Date.now,v.isNumeric=function(e){var t=v.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},v}();function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oe=function(e){var t={};switch(e){case"ConditionalStartEvent":t.type="StartEvent",t.eventDefinitionType="ConditionalEventDefinition";break;case"MessageStartEvent":t.type="StartEvent",t.eventDefinitionType="MessageEventDefinition";break;case"SignalStartEvent":t.type="StartEvent",t.eventDefinitionType="SignalEventDefinition";break;case"TimerStartEvent":t.type="StartEvent",t.eventDefinitionType="TimerEventDefinition";break;default:t.type=e}return t},ae=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.$container=n,this.definitions=r,this.maxZIndex=0,this.elements={},this.oriElements={},this.groups={},this.connections={},this.orders=[],this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){var e=this;j.on("data.create",this.createData.bind(this)),j.on("element.create",this.createElement.bind(this)),j.on("element.get",this.getElement.bind(this)),j.on("element.add",this.addData.bind(this)),j.on("element.update",this.update.bind(this)),j.on("element.change",this.change.bind(this)),j.on("element.build",this.build.bind(this)),j.on("process.get",this.getProcess.bind(this)),j.on("connections.get",this.getShapeConnections.bind(this)),j.on("orders.get",(function(){return e.orders}))}},{key:"createData",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},r=null,i=null,o=this.$container.find(".bpd-layout"),a=o.find(".bpd-designer");o.on("mousemove.create",(function(n){var o=Q.getRelativePos(n.pageX,n.pageY,a),s=0,l=null;if(null==r){var u=oe(v(e,"uppercase"));(l=(r=j.trigger("element.create",ne({name:null,prefix:"obj",pos:o},u))).plane.bounds).x=S(o.x)-l.width/2,l.y=S(o.y)-l.height/2,s=Object.keys(t.elements),j.trigger("shape.render",{type:u.type,element:r}),(i=t.$container.find('.shape-box[data-id="'+r.data.id+'"]')).attr("class","shape-box-creating"),i.css({left:o.x-i.width()/2+"px",top:o.y-i.height()/2+"px","z-index":s.length})}else(l=r.plane.bounds).x=S(o.x)-l.width/2,l.y=S(o.y)-l.height/2;j.trigger("shape.snapline.show",{size:l,ids:[]}),i.css({left:w(l.x-10)+"px",top:w(l.y-10)+"px","z-index":s.length})}));var s=!1;o.on("mouseup.create",(function(){s=!0})),ee(document).on("mouseup.create",(function(){ee(document).off("mouseup.create"),a.off("mousemove.creating"),j.trigger("shape.snapline.hide"),o.off("mouseup.create").off("mousemove.create"),null!=r&&(!1===s?i.remove():(j.trigger("record.start"),i.attr("class","shape-box"),t.addData(r),n(r),j.trigger("record.end")))}))}},{key:"addData",value:function(e,t){e&&(g(e)?this.addDatas(e,t):this.addDatas([e],t))}},{key:"addDatas",value:function(e,t){void 0===t&&(t=!0);for(var n=[],r=0;r<e.length;r+=1){var i=e[r];n.push(i),this.elements[i.data.id]=b(i),this.oriElements[i.data.id]=b(i)}this.build(),j.trigger("record.push",{action:"create",content:n})}},{key:"getElement",value:function(e){return e?this.elements[e]:this.elements}},{key:"getProcess",value:function(){var e=null;return this.definitions&&delete(e=this.definitions.rootElements[0]).flowElements,e}},{key:"setShapeGroups",value:function(e,t){this.groups[e]||(this.groups[e]=[]),this.groups[e].indexOf(t)<0&&this.groups[e].push(t)}},{key:"getShapeConnections",value:function(e){return this.connections[e]}},{key:"setShapeConnections",value:function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].indexOf(t)<0&&this.connections[e].push(t)}},{key:"update",value:function(e){e&&(g(e)?this.updateMulti(e):this.updateMulti([e]))}},{key:"updateMulti",value:function(e){for(var t=[],n=[],r=0;r<e.length;r+=1){var i=e[r],o=i.data;i.plane,i.shape,this.elements[o.id]&&(this.elements[o.id]=b(e[r]),n.push(b(this.oriElements[o.id])),t.push(b(e[r])),this.oriElements[o.id]=b(e[r]))}this.build(),j.trigger("record.push",{action:"update",content:{elements:n,updates:t}})}},{key:"change",value:function(e){var t=e.target,n=e.type,r=t.data.id,i=j.trigger("i18n","bpmn."+n),o=j.trigger("element.create",{name:i,type:n,prefix:"obj",id:r});t.data=o.data,t.data.name=o.data.name,t.shape=o.shape,t.shape.data=t.data,t.shape.plane=t.plane,this.elements[r]=t,j.trigger("shape.render",{type:n,element:t})}},{key:"removeShapes",value:function(){j.trigger("shape.select.remove");var e=[];for(var t in this.elements)e.push(this.elements[t]);j.trigger("shape.remove",{elements:e})}},{key:"build",value:function(){for(var e in this.orders=[],this.connections={},this.elements){var t=this.elements[e],n=t.data,r=(t.plane,t.shape);this.orders.push({id:n.id,zindex:r.shapeStyle.zindex}),"SequenceFlow"===r.bpmnName&&(null!=n.sourceRef&&this.setShapeConnections(n.sourceRef,n.id),null!=n.targetRef&&this.setShapeConnections(n.targetRef,n.id)),r.group&&this.setShapeGroups(r.group,n.id)}this.orders.sort((function(e,t){return e.zindex-t.zindex}));for(var i=0;i<this.orders.length;i+=1){var o=this.orders[i],a=o.id,s=o.zindex;this.$container.find('.shape-box[data-id="'+a+'"]').css("z-index",s)}var l=0;this.orders.length>0&&(l=this.orders[this.orders.length-1].zindex),this.maxZIndex=l}},{key:"createAttrs",value:function(e,t,n){var r=this,i={data:{},plane:{}},o=e.id||"obj_"+this.options.ids.next();if(e)for(var a in e)switch(a){case"$instanceOf":case"$type":case"flowElements":case"sourceRef":case"targetRef":case"incoming":case"outgoing":break;case"eventDefinitions":i.data.eventDefinitions=this.createEventModel(e[a]||[]);break;case"extensionElements":i.data.extensionElements=this.createExtensionModel(e[a].values||[]);break;default:i.data[a]=e[a]}if(t)for(var s in t)switch(s){case"$instanceOf":case"$type":break;case"id":i.plane[s]=o+"_di";break;case"waypoint":"SequenceFlow"===n.bpmnName&&function(){var e=t[s][0],o=t[s][t[s].length-1],a=[];a.push(r.createModel({descriptor:"dc:Point",attrs:{x:e.x,y:e.y}})),n.points.forEach((function(e){a.push(r.createModel({descriptor:"dc:Point",attrs:{x:e.x,y:e.y}}))})),a.push(r.createModel({descriptor:"dc:Point",attrs:{x:o.x,y:o.y}})),i.plane[s]=a}();break;case"bounds":if("SequenceFlow"!==n.bpmnName){var l=t[s],u=l.height,c=l.width,p=l.x,f=l.y;i.plane[s]=this.createModel({descriptor:"dc:Bounds",attrs:{height:u,width:c,x:p,y:f}})}break;default:i.plane[s]=t[s]}return i}},{key:"createElement",value:function(e){var t=e.type,n=e.eventDefinitionType,r=e.prefix,i=e.name,o=e.pos,a=e.id,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},u=a||r+"_"+this.options.ids.next(),c=l(this.createModel({descriptor:"bpmn:"+t,attrs:{name:i,id:u,eventDefinitions:this.createEventModel(n),extensionElements:this.createExtensionModel()}})),p={};"SequenceFlow"===t?p=l(this.createModel({descriptor:"bpmndi:BPMNEdge",attrs:{id:u+"_di",waypoint:[]}})):(p=l(this.createModel({descriptor:"bpmndi:BPMNShape",attrs:{bounds:this.createModel({descriptor:"dc:Bounds",attrs:{x:0,y:0}}),bpmnElement:u,id:u+"_di"}})),o&&(p.bounds.x=S(o.x)-p.bounds.width,p.bounds.y=S(o.y)-p.bounds.height));var f={data:c,plane:p};return f=j.trigger("shape.create",{type:t,element:f}),this.maxZIndex=f.shape.shapeStyle.zindex=this.maxZIndex+1,s(f),f}},{key:"createDefinition",value:function(){var e=this;return this.definitions.rootElements.forEach((function(t,n){var r={};for(var i in e.elements){var o=e.elements[i],a=o.data,s=o.plane,l=o.shape;if("SequenceFlow"!==l.bpmnName){var u=e.createAttrs(a,s,l);u.data.incoming=[],u.data.outgoing=[];var c=e.createModel({descriptor:a.$type,attrs:u.data});u.plane.bpmnElement=c;var p=e.createModel({descriptor:s.$type,attrs:u.plane});r[c.id]={modelData:c,modelPlane:p}}}for(var f in e.elements){var h=e.elements[f],d=h.data,y=h.plane,m=h.shape;if("SequenceFlow"===m.bpmnName){var g=e.createAttrs(d,y,m);d.sourceRef&&(g.data.sourceRef=r[d.sourceRef].modelData),d.targetRef&&(g.data.targetRef=r[d.targetRef].modelData);var v=e.createModel({descriptor:d.$type,attrs:g.data});d.sourceRef&&r[d.sourceRef].modelData.outgoing.push(v),d.targetRef&&r[d.targetRef].modelData.incoming.push(v),g.plane.bpmnElement=v;var x=e.createModel({descriptor:y.$type,attrs:g.plane});r[v.id]={modelData:v,modelPlane:x}}}var b=[],w=[];for(var S in e.elements){var E=r[S],C=E.modelData,k=E.modelPlane;b.push(C),w.push(k)}e.definitions.diagrams[n].plane.planeElement=w,e.definitions.rootElements[n]=e.createModel({descriptor:t.$type,attrs:{id:t.id||e.options.ids.next(),extensionElements:e.createExtensionModel(t.extensionElements.values||[])}}),e.definitions.rootElements[n].flowElements=b})),this.definitions}},{key:"setProcessModel",value:function(){var e="process_"+this.options.ids.next(),t=[this.createModel({descriptor:"bpmn:Process",attrs:{id:e,flowElements:[],extensionElements:this.createExtensionModel([])}})],n=[this.createModel({descriptor:"bpmndi:BPMNDiagram",attrs:{id:e+"_di",plane:this.createModel({descriptor:"bpmndi:BPMNPlane",attrs:{id:e+"_pl",planeElement:[]}})}})];this.definitions.rootElements=t,this.definitions.diagrams=n}},{key:"createModel",value:function(e){var t=null;return j.trigger("model.create",e,(function(e){t=e})),t}},{key:"createExtensionModel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return t.forEach((function(t){var r=t.$type||t.name,i=Object.assign({},l(t),t.$attrs);delete i.$type,delete i.name;var o=e.createModel({descriptor:r,attrs:i});o&&n.push(o)})),this.createModel({descriptor:"bpmn:ExtensionElements",attrs:{values:n}})}},{key:"createEventModel",value:function(e){var t=this,n=[];return e&&("string"==typeof e?n.push(this.createModel({descriptor:"bpmn:"+e,attrs:{}})):e.forEach((function(e){var r=e.$type||e.name,i=Object.assign({},l(e),e.$attrs);delete i.$type,delete i.name;var o=t.createModel({descriptor:r,attrs:i});o&&n.push(o)}))),n}}])&&ie(t.prototype,n),r&&ie(t,r),e}(),se=function(e,t,n){return new ae(e,t,n)};function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state={state:null,reset:this.resetState.bind(this),change:this.changeState.bind(this)},this.canvasDragTimeout=null}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){if(this.$container){var e=this.$container.find(".bpd-layout");this.$container.find(".bpd-designer").off("mousedown.multiselect"),e.off("mousedown.connection").off("mousedown.createText").off("mousedown.dragCanvas"),j.trigger("destroy")}}},{key:"cancel",value:function(){this.destroy()}},{key:"move",value:function(e){var t=this.$container;if(t){var n=t.find(".bpd-designer"),r={state:this.state};if(null!=this.state.state)return;this.destroy();var i=Q.getRelativePos(e.pageX,e.pageY,t),o=Q.getShapeByPosition(i.x,i.y,t);if(null==o||this.options.readonly)n.css("cursor","default"),j.trigger("shape.multiSelect",r),j.trigger("hand.activate",{e:e,state:r.state});else if(j.trigger("hand.destroy"),r.element=o.element,r.anchor=o.anchor,r.point=o.point,"sequence"===o.type){n.css("cursor","pointer"),j.trigger("shape.hover",r);var a=o.element,s=o.pointIndex;"broken"===a.shape.linkerType&&s>1&&s<=a.shape.points.length||null==a.data.sourceRef&&null==a.data.targetRef&&(n.css("cursor","move"),j.trigger("shape.drag",r))}else if("sequence_point"===o.type)n.css("cursor","move"),j.trigger("shape.hover",r),j.trigger("connection.drag",r);else if("sequence_text"===o.type)n.css("cursor","text"),j.trigger("shape.hover",r);else if("shape"===o.type?o.element.shape.locked?(n.css("cursor","default"),j.trigger("shape.hover",r)):(n.css("cursor","move"),j.trigger("shape.hover",r),j.trigger("shape.edit",r),j.trigger("shape.drag",r)):(n.css("cursor","crosshair"),j.trigger("shape.hover",r),j.trigger("anchor.hover",r)),o.element.shape.parent){var l=j.on("element.get",o.element.shape.parent);j.trigger("anchor.show",l)}else j.trigger("anchor.show",o.element)}}},{key:"changeState",value:function(e){this.state.state=e}},{key:"resetState",value:function(){this.state.state=null,this.$container.find(".bpd-designer").css("cursor","default")}}])&&le(t.prototype,n),r&&le(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var pe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.group="",this.groupName=null,this.locked=!1,this.orderIndex=0,this.markerSize=14,this.shapeStyle={alpha:1,zindex:0,angle:0},this.fontStyle={fontFamily:"Arial",size:12,color:"50,50,50",bold:!1,italic:!1,underline:!1,textAlign:"center",vAlign:"top",orientation:"vertical"}}var t,n,r;return t=e,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{actions:[{action:"move",x:0,y:0},{action:"line",x:n,y:0},{action:"line",x:n,y:t},{action:"line",x:0,y:t},{action:"close"}]}]}},{key:"getTextBlock",value:function(){var e=this.plane.bounds,t=e.height;return{x:10,y:0,width:e.width-20,height:t}}},{key:"getAnchors",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{x:n/2,y:0},{x:n/2,y:t},{x:0,y:t/2},{x:n,y:t/2}]}}])&&ce(t.prototype,n),r&&ce(t,r),e}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var i=me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(n,e);var t=de(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this)).children=[],r.parent="",r.resizeDir=["tl","tr","br","bl"],r.attribute={container:!1,visible:!0,rotatable:!1,linkable:!0,editable:!0,markerOffset:5},r.lineStyle=Object.assign({},{lineWidth:2,lineColor:"50,50,50",lineStyle:"solid"},e.lineStyle),r.fillStyle=Object.assign({},{type:"solid",color:"255,255,255"},e.fillStyle),r.lightStyle={},r.actions=null,r}return n}(pe);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ke(this,n)}}function ke(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(o,e);var t,n,r,i=Ce(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return we(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||40,e.plane.bounds.height=e.plane.bounds.height||40),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.StartEvent")),t.data=e.data,t.plane=e.plane,t.bpmnName="StartEvent",t.groupName="StartEvent",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}].concat(xe(this.style.content||[]),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&Se(t.prototype,n),r&&Se(t,r),o}(ge);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=De(e);if(t){var i=De(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ne(this,n)}}function Ne(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(n,e);var t=Me(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Te(this,n),r=t.call(this,i),e.data.name||(e.data.name=i.name||j.trigger("i18n","bpmn.MessageStartEvent")),r.eventDefinitionType="MessageEventDefinition",r}return n}(Re);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var i=We(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(o,e);var t,n,r,i=ze(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Le(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||110,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.UserTask")),t.data=e.data,t.plane=e.plane,t.bpmnName="UserTask",t.groupName="Task",t.fontStyle.vAlign="middle",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{action:"move",x:0,y:4},{action:"quadraticCurve",x1:0,y1:0,x:4,y:0},{action:"line",x:n-4,y:0},{action:"quadraticCurve",x1:n,y1:0,x:n,y:4},{action:"line",x:n,y:t-4},{action:"quadraticCurve",x1:n,y1:t,x:n-4,y:t},{action:"line",x:4,y:t},{action:"quadraticCurve",x1:0,y1:t,x:0,y:t-4},{action:"close"}];return[{lineStyle:{lineStyle:"solid"},actions:r}].concat(Be(this.style.content||[{actions:[{action:"font",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"18px",fontFamily:"bpmn",content:"",x:4,y:16}]}]),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:r}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=r-20,o=n;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n/2-o/2,width:i,height:o}}}])&&_e(t.prototype,n),r&&_e(t,r),o}(ge);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var i=Ze(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Qe(this,n)}}function Qe(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(o,e);var t,n,r,i=Je(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xe(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||110,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.ServiceTask")),t.data=e.data,t.plane=e.plane,t.bpmnName="ServiceTask",t.groupName="Task",t.fontStyle.vAlign="middle",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:4},{action:"quadraticCurve",x1:0,y1:0,x:4,y:0},{action:"line",x:n-4,y:0},{action:"quadraticCurve",x1:n,y1:0,x:n,y:4},{action:"line",x:n,y:t-4},{action:"quadraticCurve",x1:n,y1:t,x:n-4,y:t},{action:"line",x:4,y:t},{action:"quadraticCurve",x1:0,y1:t,x:0,y:t-4},{action:"close"}]}].concat(Ve(this.style.content||[{actions:[{action:"font",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"18px",fontFamily:"bpmn",content:"",x:4,y:16}]}]),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:4},{action:"quadraticCurve",x1:0,y1:0,x:4,y:0},{action:"line",x:n-4,y:0},{action:"quadraticCurve",x1:n,y1:0,x:n,y:4},{action:"line",x:n,y:t-4},{action:"quadraticCurve",x1:n,y1:t,x:n-4,y:t},{action:"line",x:4,y:t},{action:"quadraticCurve",x1:0,y1:t,x:0,y:t-4},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=r-20,o=n;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n/2-o/2,width:i,height:o}}}])&&Ke(t.prototype,n),r&&Ke(t,r),o}(ge);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var i=ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return lt(this,n)}}function lt(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pt(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vt(e);if(t){var i=vt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ct(e,t){return(Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Rt(e);if(t){var i=Rt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return At(this,n)}}function At(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tt(e){return function(e){if(Array.isArray(e))return Ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var i=Bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return It(this,n)}}function It(e,t){return!t||"object"!==Pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gt(e);if(t){var i=Gt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(e,t){return!t||"object"!==$t(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=en(e);if(t){var i=en(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Zt(this,n)}}function Zt(e,t){return!t||"object"!==Vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function en(e){return(en=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e){return function(e){if(Array.isArray(e))return rn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return rn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function on(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function an(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t){return(sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cn(e);if(t){var i=cn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return un(this,n)}}function un(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pn={StartEvent:["StartEvent","ConditionalStartEvent","MessageStartEvent","SignalStartEvent","TimerStartEvent"],Task:["UserTask","ServiceTask"],CallActivity:["CallActivity"],Gateway:["ExclusiveGateway","InclusiveGateway","ParallelGateway","ComplexGateway"],EndEvent:["EndEvent","TerminateEndEvent"]},fn={EndEvent:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(o,e);var t,n,r,i=st(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return it(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||40,e.plane.bounds.height=e.plane.bounds.height||40),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.EndEvent")),t.data=e.data,t.plane=e.plane,t.bpmnName="EndEvent",t.groupName="EndEvent",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{lineStyle:{lineStyle:"solid",lineWidth:this.lineStyle.lineWidth+2},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}].concat(nt(this.style.content||[]),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&ot(t.prototype,n),r&&ot(t,r),o}(ge),StartEvent:Re,MessageStartEvent:je,UserTask:He,ServiceTask:et,TerminateEndEvent:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(o,e);var t,n,r,i=mt(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ht(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||40,e.plane.bounds.height=e.plane.bounds.height||40),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.TerminateEndEvent")),t.data=e.data,t.plane=e.plane,t.bpmnName="TerminateEndEvent",t.groupName="EndEvent",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{fillStyle:{type:"solid",color:"50,50,50"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n-.25*n,y:.5*t},{action:"curve",x1:.5*n-.25*n,y1:.5*t-2*t/3*.5,x2:.5*n+.25*n,y2:.5*t-2*t/3*.5,x:.5*n+.25*n,y:.5*t},{action:"curve",x1:.5*n+.25*n,y1:.5*t+2*t/3*.5,x2:.5*n-.25*n,y2:.5*t+2*t/3*.5,x:.5*n-.25*n,y:.5*t},{action:"close"}]}];return[{lineStyle:{lineWidth:this.lineStyle.lineWidth+2,lineStyle:"solid"},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}].concat(pt(this.style.content||r),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:t/2},{action:"curve",x1:0,y1:-t/6,x2:n,y2:-t/6,x:n,y:t/2},{action:"curve",x1:n,y1:t+t/6,x2:0,y2:t+t/6,x:0,y:t/2},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&dt(t.prototype,n),r&&dt(t,r),o}(ge),ExclusiveGateway:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ct(e,t)}(o,e);var t,n,r,i=kt(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return St(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||50,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||""===e.data.name||(e.data.name=n.name||""),t.data=e.data,t.plane=e.plane,t.bpmnName="ExclusiveGateway",t.groupName="Gateway",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n+.5*n*.4-.02*n,y:.5*t-.5*t*.4-.02*t},{action:"line",x:.5*n-.5*n*.4-.02*n,y:.5*t+.5*t*.4-.02*t},{action:"line",x:.5*n-.5*n*.4+.02*n,y:.5*t+.5*t*.4+.02*t},{action:"line",x:.5*n+.5*n*.4+.02*n,y:.5*t-.5*t*.4+.02*t},{action:"line",x:.5*n+.5*n*.4-.02*n,y:.5*t-.5*t*.4-.02*t},{action:"close"}]},{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n,y:.5*t},{action:"move",x:.5*n-.5*n*.4+.02*n,y:.5*t-.5*t*.4-.02*t},{action:"line",x:.5*n+.5*n*.4+.02*n,y:.5*t+.5*t*.4-.02*t},{action:"line",x:.5*n+.5*n*.4-.02*n,y:.5*t+.5*t*.4+.02*t},{action:"line",x:.5*n-.5*n*.4-.02*n,y:.5*t-.5*t*.4+.02*t},{action:"close"}]}];return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}].concat(bt(this.style.content||r),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&Et(t.prototype,n),r&&Et(t,r),o}(ge),InclusiveGateway:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(o,e);var t,n,r,i=jt(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Mt(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||50,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||""===e.data.name||(e.data.name=n.name||""),t.data=e.data,t.plane=e.plane,t.bpmnName="InclusiveGateway",t.groupName="Gateway",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{lineStyle:{lineStyle:"solid",lineColor:"0, 0, 0"},actions:[{action:"move",x:.5*n-.25*n,y:.5*t},{action:"curve",x1:.5*n-.25*n,y1:.5*t-2*t/3*.5,x2:.5*n+.25*n,y2:.5*t-2*t/3*.5,x:.5*n+.25*n,y:.5*t},{action:"curve",x1:.5*n+.25*n,y1:.5*t+2*t/3*.5,x2:.5*n-.25*n,y2:.5*t+2*t/3*.5,x:.5*n-.25*n,y:.5*t},{action:"close"}]}];return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}].concat(Tt(this.style.content||r),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&Nt(t.prototype,n),r&&Nt(t,r),o}(ge),ParallelGateway:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(o,e);var t,n,r,i=Wt(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ft(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||50,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||""===e.data.name||(e.data.name=n.name||""),t.data=e.data,t.plane=e.plane,t.bpmnName="ParallelGateway",t.groupName="Gateway",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n-.04*Math.min(n,t),y:.5*t-.5*t*.5},{action:"line",x:.5*n-.04*Math.min(n,t),y:.5*t+.5*t*.5},{action:"line",x:.5*n+.04*Math.min(n,t),y:.5*t+.5*t*.5},{action:"line",x:.5*n+.04*Math.min(n,t),y:.5*t-.5*t*.5},{action:"line",x:.5*n-.04*Math.min(n,t),y:.5*t-.5*t*.5},{action:"close"},{action:"move",x:.5*n-.5*n*.5,y:.5*t-.04*Math.min(n,t)},{action:"line",x:.5*n-.5*n*.5,y:.5*t+.04*Math.min(n,t)},{action:"line",x:.5*n+.5*n*.5,y:.5*t+.04*Math.min(n,t)},{action:"line",x:.5*n+.5*n*.5,y:.5*t-.04*Math.min(n,t)},{action:"line",x:.5*n-.5*n*.5,y:.5*t-.04*Math.min(n,t)},{action:"close"}]}];return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}].concat(Lt(this.style.content||r),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&zt(t.prototype,n),r&&zt(t,r),o}(ge),ComplexGateway:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(o,e);var t,n,r,i=Qt(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Kt(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||50,e.plane.bounds.height=e.plane.bounds.height||50),e.data.name||""===e.data.name||(e.data.name=n.name||""),t.data=e.data,t.plane=e.plane,t.bpmnName="ComplexGateway",t.groupName="Gateway",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width,r=[{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n-.5*Math.min(n,t)*.3+.02*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.3-.02*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.3+.02*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.3-.03*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.3-.02*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.3+.02*Math.min(n,t)},{action:"line",x:.5*n-.5*Math.min(n,t)*.3-.02*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.3+.02*Math.min(n,t)},{action:"close"}]},{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n+.5*Math.min(n,t)*.3-.02*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.3-.02*Math.min(n,t)},{action:"line",x:.5*n-.5*Math.min(n,t)*.3-.02*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.3-.02*Math.min(n,t)},{action:"line",x:.5*n-.5*Math.min(n,t)*.3+.02*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.3+.02*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.3+.02*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.3+.02*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.3-.02*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.3-.02*Math.min(n,t)},{action:"close"}]},{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n-.027*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.4},{action:"line",x:.5*n-.027*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.4},{action:"line",x:.5*n+.027*Math.min(n,t),y:.5*t+.5*Math.min(n,t)*.4},{action:"line",x:.5*n+.027*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.4},{action:"line",x:.5*n-.027*Math.min(n,t),y:.5*t-.5*Math.min(n,t)*.4},{action:"close"}]},{fillStyle:{type:"solid",color:"0, 0, 0"},lineStyle:{lineWidth:0,lineStyle:"solid"},actions:[{action:"move",x:.5*n-.5*Math.min(n,t)*.4,y:.5*t-.027*Math.min(n,t)},{action:"line",x:.5*n-.5*Math.min(n,t)*.4,y:.5*t+.027*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.4,y:.5*t+.027*Math.min(n,t)},{action:"line",x:.5*n+.5*Math.min(n,t)*.4,y:.5*t-.027*Math.min(n,t)},{action:"line",x:.5*n-.5*Math.min(n,t)*.4,y:.5*t-.027*Math.min(n,t)},{action:"close"}]}];return[{lineStyle:{lineStyle:"solid"},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}].concat(Ut(this.style.content||r),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:.5*t},{action:"line",x:.5*n,y:0},{action:"line",x:n,y:.5*t},{action:"line",x:.5*n,y:t},{action:"line",x:0,y:.5*t},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=120,o=30;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n,width:i,height:o}}}])&&Yt(t.prototype,n),r&&Yt(t,r),o}(ge),CallActivity:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(o,e);var t,n,r,i=ln(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return on(this,o),(t=i.call(this,n)).style=n,e.plane&&e.plane.bounds&&(e.plane.bounds.width=e.plane.bounds.width||110,e.plane.bounds.height=e.plane.bounds.height||55),e.data.name||(e.data.name=n.name||j.trigger("i18n","bpmn.CallActivity")),t.data=e.data,t.plane=e.plane,t.bpmnName="CallActivity",t.groupName="CallActivity",t.fontStyle.vAlign="middle",t.actions=t.getPath(),t}return t=o,(n=[{key:"getPath",value:function(){var e=this.plane.bounds,t=e.height,n=e.width;return[{lineStyle:{lineWidth:this.lineStyle.lineWidth+2,lineStyle:"solid"},actions:[{action:"move",x:0,y:4},{action:"quadraticCurve",x1:0,y1:0,x:4,y:0},{action:"line",x:n-4,y:0},{action:"quadraticCurve",x1:n,y1:0,x:n,y:4},{action:"line",x:n,y:t-4},{action:"quadraticCurve",x1:n,y1:t,x:n-4,y:t},{action:"line",x:4,y:t},{action:"quadraticCurve",x1:0,y1:t,x:0,y:t-4},{action:"close"}]}].concat(nn(this.style.content||[]),[{fillStyle:{type:"none"},lineStyle:{lineWidth:0},actions:[{action:"move",x:0,y:4},{action:"quadraticCurve",x1:0,y1:0,x:4,y:0},{action:"line",x:n-4,y:0},{action:"quadraticCurve",x1:n,y1:0,x:n,y:4},{action:"line",x:n,y:t-4},{action:"quadraticCurve",x1:n,y1:t,x:n-4,y:t},{action:"line",x:4,y:t},{action:"quadraticCurve",x1:0,y1:t,x:0,y:t-4},{action:"close"}]}])}},{key:"getTextBlock",value:function(){var e=this.style.textStyle,t=this.plane.bounds,n=t.height,r=t.width,i=r-20,o=n;return e&&(i=e.width||i,o=e.height||o),{x:r/2-i/2,y:n/2-o/2,width:i,height:o}}}])&&an(t.prototype,n),r&&an(t,r),o}(ge)},hn={createLinearGradient:function(e,t,n){var r=t.bpmnPlane.bounds,i=r.width,o=r.height,a={x:i/2,y:0},s={x:i/2,y:o},l=n.angle;if(i>o&&(a={x:0,y:o/2},s={x:i,y:o/2},l=(h.angle+Math.PI/2)%(2*Math.PI)),0!==l){var u={x:i/2,y:o/2};a=Q.getRotated(u,a,l),s=Q.getRotated(u,s,l),a.x<0&&(a.x=0),a.x>i&&(a.x=i),a.y<0&&(a.y=0),a.y>o&&(a.y=o),s.x<0&&(s.x=0),s.x>i&&(s.x=i),s.y<0&&(s.y=0),s.y>o&&(s.y=o)}var c=e.createLinearGradient(a.x,a.y,s.x,s.y);return c.addColorStop(0,"rgb("+n.beginColor+")"),c.addColorStop(1,"rgb("+n.endColor+")"),c},createRadialGradient:function(e,t,n){var r=t.bpmnPlane.bounds,i=r.width,o=r.height,a=i<o?i:o,s=e.createRadialGradient(i/2,o/2,10,i/2,o/2,a*n.radius);return s.addColorStop(0,"rgb("+n.beginColor+")"),s.addColorStop(1,"rgb("+n.endColor+")"),s}};function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var yn=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.$container=n,j.on("group.get",(function(e){return e?pn[e]:pn}))}var t,n,r;return t=e,(n=[{key:"createShape",value:function(e,t){return new fn[e](t,this.options.bpmnStyle[e])}},{key:"render",value:function(e,t){t.shape||(t.shape=this.createShape(e,t)),this.renderShape(t)}},{key:"renderShape",value:function(e){var t=e.shape,n=e.data,r=e.plane,i=this.$container.find('.shape-box[data-id="'+n.id+'"]');0===i.length&&(i=ee("<div class='shape-box' data-id='"+n.id+"'><canvas class='shape-canvas'></canvas></div>").appendTo(this.$container.find(".bpd-designer")));var o=r.bounds,a=o.x,s=o.y,l=o.width,u=o.height,c=t.shapeStyle,p=c.angle,f=(c.zindex,Q.getShapeBox(e)),h=f.width+20,d=f.height+20,y=i.find(".shape-canvas");y.attr({width:h,height:d}),i.css({left:w(f.x-10)+"px",top:w(f.y-10)+"px",width:h,height:d});var m=y[0].getContext("2d");m.clearRect(0,0,l+20,u+20),m.scale(this.options.scale,this.options.scale),m.translate(10,10),m.translate(a-f.x,s-f.y),m.translate(l/2,u/2),m.rotate(p),m.translate(-l/2,-u/2),m.globalAlpha=t.shapeStyle.alpha,m.lineJoin="round",this.renderShapePath(m,e),this.renderText(t,f)}},{key:"renderShapePath",value:function(e,t,n){var r;r=t.shape.actions?t.shape.actions:t.shape.getPath(),this.renderPath(e,t,r,n)}},{key:"renderPath",value:function(e,t,n,r){for(var i=t.data,o=(t.plane,t.shape),a=0;a<n.length;a+=1){var s=n[a];e.save(),e.beginPath();for(var l=this.options.bpmnStyle[o.bpmnName]||{},u={},c=0;c<this.options.shapeStyle.length;c+=1){var p=this.options.shapeStyle[c];p.id===i.id&&(u=p)}var f=Object.assign({},o.lineStyle,s.lineStyle,l.lineStyle,u.lineStyle,o.lightStyle.lineStyle),h=Object.assign({},o.fillStyle,s.fillStyle,l.fillStyle,u.fillStyle,o.lightStyle.fillStyle);s.fillStyle&&0===s.lineStyle.lineWidth&&(h.color=f.lineColor);for(var d=0;d<s.actions.length;d+=1){var y=s.actions[d];C[y.action](e,y,u)}this.fillShape(e,o,h),f.lineWidth&&(e.lineWidth=f.lineWidth,e.strokeStyle="rgb("+f.lineColor+")","dashed"===f.lineStyle?r?Q.setLineDash(e,[4*f.lineWidth,2*f.lineWidth]):Q.setLineDash(e,[6*f.lineWidth,3*f.lineWidth]):"dot"===f.lineStyle?Q.setLineDash(e,[f.lineWidth,2*f.lineWidth]):"dashdot"===f.lineStyle&&Q.setLineDash(e,[6*f.lineWidth,2*f.lineWidth,f.lineWidth,2*f.lineWidth]),e.stroke()),e.restore()}}},{key:"renderText",value:function(e,t){var n=e.plane.bounds,r=n.x,i=n.y,o=n.width,a=n.height,s=this.$container.find('.shape-box[data-id="'+e.data.id+'"]'),l=s.find(".text-box[data-shape="+e.data.id+"]");if(0===l.length&&(l=ee("<textarea class='text-box' data-shape='"+e.data.id+"'></textarea>").appendTo(s)).on("focus",(function(){ee(this).blur()})),l.attr("readonly","readonly"),null!=e.data.name&&""!==e.data.name.trim()){var u=e.fontStyle;l.css({"line-height":Math.round(1.25*u.size)+"px","font-size":u.size+"px","font-family":u.fontFamily,"font-weight":u.bold?"bold":"normal","font-style":u.italic?"italic":"normal","text-align":u.textAlign,color:"rgb("+u.color+")","text-decoration":u.underline?"underline":"none",opacity:e.shapeStyle.alpha}).show();var c=e.getTextBlock();if("horizontal"===e.fontStyle.orientation){var p={x:c.x+c.width/2,y:c.y+c.height/2};c.x=p.x-c.height/2,c.y=p.y-c.width/2,c.width=c.height,c.height=c.width}l.css({width:c.width}),l.height(0),l.val(e.data.name),l.scrollTop(99999);var f=l.scrollTop(),h=0;switch(u.vAlign){case"middle":h=c.y+c.height/2-f/2;break;case"bottom":h=c.y+c.height-f;break;default:h=c.y+=10}var d={x:c.x+c.width/2,y:h+f/2},y=e.shapeStyle.angle;0!==y&&(d=Q.getRotated({x:o/2,y:a/2},d,y)),"horizontal"===u.orientation&&(y=(1.5*Math.PI+y)%(2*Math.PI));var m="rotate("+Math.round(y/(2*Math.PI)*360)+"deg) scale("+this.options.scale+")",g=c.width,v=f;l.css({width:g,height:v,left:w(d.x+(r-t.x)+10)-g/2,top:w(d.y+(i-t.y)+10)-f/2,"-webkit-transform":m,"-ms-transform":m,"-o-transform":m,"-moz-transform":m,transform:m})}else l.css({height:"0px",width:"0px"}).hide()}},{key:"fillShape",value:function(e,t,n){var r;e.save(),"solid"===n.type?(e.fillStyle="rgb("+n.color+")",e.fill()):"gradient"===n.type&&(r="linear"===n.gradientType?hn.createLinearGradient(e,t,n):hn.createRadialGradient(e,t,n),e.fillStyle=r,e.fill()),e.restore()}}])&&dn(t.prototype,n),r&&dn(t,r),e}();function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bn(e);if(t){var i=bn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xn(this,n)}}function xn(e,t){return!t||"object"!==mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(n,e);var t=vn(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this)).data=e.data,r.plane=e.plane,r.bpmnName="SequenceFlow",r.groupName="SequenceFlow",r.linkerType="broken",r.points=[],r.lineStyle={lineWidth:2,lineColor:"50,50,50",lineStyle:"solid",beginArrowStyle:"none",endArrowStyle:"solidArrow"},r}return n}(pe);function Sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var En=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.$container=n}var t,n,r;return t=e,(n=[{key:"createConnection",value:function(e){return new wn(e)}},{key:"render",value:function(e,t){e.shape||(e.shape=this.createConnection(e)),this.renderConnection(e,t)}},{key:"renderConnection",value:function(e,t){var n=e.shape,r=e.data,i=e.plane,o=r.sourceRef,a=r.targetRef,s=i.waypoint,l=s[0],u=s[s.length-1],c=j.trigger("shape.select.getIds")||[],p=j.trigger("element.get");s.length>2&&n.points.length<=0&&(n.points=s.filter((function(e,t){return 0!==t&&t!==s.length-1}))),t&&(n.points=Q.getConnectionPoints(n,p)),"curve"!==n.linkerType&&"broken"!==n.linkerType||n.points&&0!==n.points.length||(n.points=Q.getConnectionPoints(n,p)),null==l.angle&&(l.angle=Q.getAngle(s[1],s[0])),null==u.angle&&(u.angle=Q.getAngle(s[s.length-2],s[s.length-1]));var f=u.x,h=u.y,d=l.x,y=l.y;u.x>=l.x&&(f=l.x,d=u.x),u.y>=l.y&&(h=l.y,y=u.y),n.points.forEach((function(e,t){e.x<f?f=e.x:e.x>d&&(d=e.x),e.y<h?h=e.y:e.y>y&&(y=e.y)}));var m=f,g=h,v=d-f,x=y-h,b=this.$container.find('.shape-box[data-id="'+r.id+'"]');0===b.length&&(b=ee("<div class='shape-box' data-id='"+r.id+"'><canvas class='shape-canvas'></canvas></div>").appendTo(this.$container.find(".bpd-designer")));var S=b.find(".shape-canvas"),E=w(v+20),C=w(x+20);S.attr({width:E,height:C}),b.css({left:w(m-10)+"px",top:w(g-10)+"px",width:E,height:C});var k=S[0].getContext("2d"),A=this.options.bpmnStyle[n.bpmnName]||{},R=Object.assign({},n.lineStyle,A.lineStyle);k.scale(this.options.scale,this.options.scale),k.translate(10,10),k.lineWidth=R.lineWidth,k.strokeStyle="rgb("+R.lineColor+")",k.fillStyle="rgb("+R.lineColor+")",k.save(),"dashed"===R.lineStyle?Q.setLineDash(k,[8*R.lineWidth,4*R.lineWidth]):"dot"===R.lineStyle?Q.setLineDash(k,[R.lineWidth,2*R.lineWidth]):"dashdot"===R.lineStyle&&Q.setLineDash(k,[8*R.lineWidth,3*R.lineWidth,R.lineWidth,3*R.lineWidth]);var P={x:l.x-m,y:l.y-g},T={x:u.x-m,y:u.y-g};if(k.beginPath(),k.moveTo(P.x,P.y),"curve"===n.linkerType){var O=n.points[0],M=n.points[1];k.bezierCurveTo(O.x-m,O.y-g,M.x-m,M.y-g,T.x,T.y)}else n.points.forEach((function(e,t){k.lineTo(e.x-m,e.y-g)})),k.lineTo(T.x,T.y);c.indexOf(r.id)>=0&&(k.shadowBlur=4,k.shadowColor="#ec5343"),k.stroke(),k.restore();var N=Q.getEndpointAngle(n,"sourceRef");this.renderArrow(P,N,o,R.beginArrowStyle,n,l.angle,k);var D=Q.getEndpointAngle(n,"targetRef");this.renderArrow(T,D,a,R.endArrowStyle,n,u.angle,k),k.restore(),this.renderConnectionText(n)}},{key:"renderArrow",value:function(e,t,n,r,i,o,a){if("solidArrow"===r){var s=Math.PI/10,l=12/Math.cos(s),u={x:e.x-l*Math.cos(t-s),y:e.y-l*Math.sin(t-s)},c={x:e.x-l*Math.sin(Math.PI/2-t-s),y:e.y-l*Math.cos(Math.PI/2-t-s)};a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(u.x,u.y),a.lineTo(c.x,c.y),a.lineTo(e.x,e.y),a.closePath(),a.fill(),a.stroke()}if(n&&"solidCircle"!==r&&"dashedCircle"!==r){var p=j.trigger("element.get",n);if(p){a.save(),a.translate(e.x,e.y),a.rotate(o),a.translate(-e.x,-e.y);for(var f=e.x-p.shape.lineStyle.lineWidth/2,h=e.y-1.2*i.lineStyle.lineWidth,d=2*i.lineStyle.lineWidth,y=1.8*i.lineStyle.lineWidth,m=f;m<=f+d;){for(var g=h;g<=h+y;)a.clearRect(m,g,1.5,1.5),g+=1;m+=1}a.restore()}}}},{key:"renderConnectionText",value:function(e){var t=this.$container.find('.shape-box[data-id="'+e.data.id+'"]'),n=t.find(".text-box[data-shape="+e.data.id+"]");0===n.length&&(n=ee("<div class='text-box connection-text' data-shape='"+e.data.id+"'></div>").appendTo(t));var r=e.fontStyle,i="scale("+this.options.scale+")",o={"line-height":Math.round(1.25*r.size)+"px","font-size":r.size+"px","font-family":r.fontFamily,"font-weight":r.bold?"bold":"normal","font-style":r.italic?"italic":"normal","text-align":r.textAlign,color:"rgb("+r.color+")","text-decoration":r.underline?"underline":"none","-webkit-transform":i,"-ms-transform":i,"-o-transform":i,"-moz-transform":i,transform:i};if(n.css(o),null!=e.data.name&&""!==e.data.name.trim()){n.show();var a=e.data.name;a.length>12&&(a=a.substr(0,12)+"..."),n.html(a),n.attr("title",e.data.name);var s=Q.getConnectionMidpoint(e),l=t.position();n.css({left:w(s.x)-l.left-n.width()/2,top:w(s.y)-l.top-n.height()/2})}else n.hide()}},{key:"move",value:function(e,t,n,r){var i=e.data,o=e.plane,a=(e.shape,o.waypoint[0]),s=o.waypoint[o.waypoint.length-1],l=Q.getShapeByPosition(n,r,this.$container,!0),u=null,c=null;if(j.trigger("anchor.point.hide"),null!=l){var p,f,h=l.element;if(c=h.data.id,"bounds"===l.type)u=l.anchor,j.trigger("anchor.point.show",w(u));else if("shape"===l.type)if("source"===t?(p={x:s.x,y:s.y},f=i.targetRef):(p={x:a.x,y:a.y},f=i.sourceRef),h.data.id===f)j.trigger("anchor.point.hide"),u={x:S(n),y:S(r),angle:null},c=null;else{for(var d,y=h.shape.getAnchors(),m=h.plane.bounds,g={x:m.x+m.width/2,y:m.y+m.height/2},v=-1,x=0;x<y.length;x+=1){var b=y[x],E=Q.getRotated(g,{x:m.x+b.x,y:m.y+b.y},h.shape.shapeStyle.angle),C=Q.measureDistance(E,p);(-1===v||C<v)&&(v=C,d=E)}var k=Q.getPointAngle(this.$container,h.data.id,d.x,d.y,7);u={x:d.x,y:d.y,angle:k},j.trigger("anchor.point.show",w(u))}}else j.trigger("anchor.point.remove"),j.trigger("anchor.remove"),u={x:S(n),y:S(r),angle:null},c=null;"source"===t?(i.sourceRef=c,a.x=u.x,a.y=u.y,a.angle=u.angle,null==c&&(u.x>=s.x-6&&u.x<=s.x+6&&(a.x=s.x),u.y>=s.y-6&&u.y<=s.y+6&&(a.y=s.y))):(i.targetRef=c,s.x=u.x,s.y=u.y,s.angle=u.angle,null==c&&(u.x>=a.x-6&&u.x<=a.x+6&&(s.x=a.x),u.y>=a.y-6&&u.y<=a.y+6&&(s.y=a.y))),this.renderConnection(e,!0)}}])&&Sn(t.prototype,n),r&&Sn(t,r),e}();function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tn(e);if(t){var i=Tn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Pn(this,n)}}function Pn(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(o,e);var t,n,r,i=Rn(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).options=e,n.$container=t,n.definitions=null,n.designer=se(n.options,n.$container,n.definitions),n.drawShape=new yn(n.options,n.$container),n.drawConnection=new En(n.options,n.$container),n.init(),n}return t=o,(n=[{key:"init",value:function(){this.$container.off("mousemove.operate touchstart.operate").on("mousemove.operate touchstart.operate",this.move.bind(this)),this.$container.off("dblclick.element").on("dblclick.element",(function(){j.trigger("edit.shape.name")})),j.on("shape.create",this.createShapeData.bind(this)),j.on("shape.render",this.renderShape.bind(this)),j.on("shape.renderPath",this.renderShapePath.bind(this)),j.on("shape.remove",this.removeShape.bind(this)),j.on("connection.render",this.renderConnection.bind(this)),j.on("connection.move",this.moveConnection.bind(this)),j.trigger("key.bind",{key:"Delete",fun:function(){j.trigger("shape.remove")}}),j.trigger("key.bind",{key:"BackSpace",fun:function(){j.trigger("shape.remove")}})}},{key:"createShapeData",value:function(e){var t=e.type,n=e.element;return n.shape="SequenceFlow"===t?this.drawConnection.createConnection(n):this.drawShape.createShape(t,n),n}},{key:"render",value:function(e){if(""!==e){this.designer.removeShapes(),this.designer.definitions=this.definitions=e;var t=this.definitions,n=t.diagrams,r=t.rootElements,i={};r?r.forEach((function(e,t){e.flowElements&&e.flowElements.forEach((function(e,r){var o=n[t].plane.planeElement;o&&o.length>0&&o.forEach((function(t,n){if(t.id===e.id+"_di"){var r=l(e);e.extensionElements&&(r.extensionElements.values=e.extensionElements.values||[]),"SequenceFlow"!==E(e.$type)?(r.incoming=e.incoming?e.incoming.id:"",r.outgoing=e.outgoing?e.outgoing.id:""):(r.sourceRef=e.sourceRef?e.sourceRef.id:"",r.targetRef=e.targetRef?e.targetRef.id:""),i[e.id]={data:r,plane:l(t)}}}))}))})):this.designer.setProcessModel(),this.renderPage();var o=0,a=0;for(var s in i){var u=i[s],c=E(u.data.$type);"SequenceFlow"!==c?(this.renderShape({type:c,element:u}),o++):this.renderConnection({element:u}),u.shape.shapeStyle.zindex=a,this.designer.addData(u,!1),a++}0===o&&this.designer.build()}}},{key:"renderPage",value:function(){var e=this.options.pageStyle,t=e.width,n=e.height,r=e.backgroundColor,i=Q.getDarkerColor(r);Q.getDarkestColor(r),this.$container.find(".bpd-designer").css({"background-color":"rgb("+i+")"}),this.$container.find(".bpd-layout").css({width:t,height:n})}},{key:"renderShape",value:function(e){var t=e.type,n=e.element;this.drawShape.render(t,n)}},{key:"renderShapePath",value:function(e){var t=e.shape2D,n=e.element,r=e.render;this.drawShape.renderShapePath(t,n,r)}},{key:"renderConnection",value:function(e){var t=e.element,n=e.rendered;this.drawConnection.render(t,n)}},{key:"moveConnection",value:function(e){var t=e.element,n=e.type,r=e.x,i=e.y;this.drawConnection.move(t,n,r,i)}},{key:"updataLineStyle",value:function(e,t){if(e){var n=j.trigger("element.get",e);"SequenceFlow"===n.shape.bpmnName||(n.shape.lightStyle={lineStyle:t},this.drawShape.renderShape(n))}else{var r=j.trigger("element.get");for(var i in r){var o=r[i];"SequenceFlow"===o.shape.bpmnName||(o.shape.lightStyle={},this.drawShape.renderShape(o))}}}},{key:"removeShape",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.elements,r=t.isRemove;n||(n=j.trigger("shape.select.get")),void 0===r&&(r=!0),r&&(n=this.beforeRemove(n));var i=[],o=[],a=[],s=[],l=[],u=null;return 0!==n.length&&(n.forEach((function(e){"SequenceFlow"===e.shape.bpmnName?l.push(e.data.id):s.push(e.data.id)})),n.forEach((function(t){i.push(b(t));var n=t.data,r=t.shape;if(e.$container.find('.shape-box[data-id="'+n.id+'"]').remove(),u=b(t),delete e.designer.elements[n.id],delete e.designer.oriElements[n.id],"SequenceFlow"===r.bpmnName)n.sourceRef,n.targetRef;else{r.parent&&s.indexOf(r.parent);var c=e.designer.connections[n.id];if(c&&c.length>0)for(var p=0;p<c.length;p++){var f=c[p];if(l.indexOf(f)<0){var h=j.trigger("element.get",f);null!=h.data.sourceRef&&h.data.sourceRef===n.id&&(h.data.sourceRef=null),null!=h.data.targetRef&&h.data.targetRef===n.id&&(h.data.targetRef=null),o.indexOf(f)<0&&(o.push(f),a.push(h))}}delete e.designer.connections[n.id]}})),this.designer.build(),j.trigger("shape.select.remove"),j.trigger("record.start"),j.trigger("record.push",{action:"remove",content:i}),a.length>0&&this.designer.updateMulti(a),j.trigger("record.end"),this.removed(u),!0)}},{key:"createShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=null;j.trigger("data.create",e,(function(e){n=e,j.trigger("shape.select",{ids:n.data.id}),t(n)}))}},{key:"beforeRemove",value:function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];t[r.data.id]=r}for(var i in e=[],t)e.push(t[i]);return e}},{key:"removed",value:function(e){var t=this.options.config;t.remove&&t.remove.onRemoved&&t.remove.onRemoved(A(e))}}])&&kn(t.prototype,n),r&&kn(t,r),o}(ue),Mn=function(e,t){return new On(e,t)};function Nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dn=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e(t);t=t||[128,36,1],this._seed=t.length?this.rack(t[0],t[1],t[2]):t}var t,n,r;return t=e,(n=[{key:"createId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(e<=0)return"0";for(var n=Math.log(Math.pow(2,e))/Math.log(t),r=2;n===1/0;r*=2)n=Math.log(Math.pow(2,e/r))/Math.log(t)*r;for(var i=n-Math.floor(n),o="",a=0;a<Math.floor(n);a++){var s=Math.floor(Math.random()*t).toString(t);o=s+o}if(i){var l=Math.pow(t,i),u=Math.floor(Math.random()*l).toString(t);o=u+o}var c=parseInt(o,t);return c!==1/0&&c>=Math.pow(2,e)?this.createId(e,t):o}},{key:"rack",value:function(e,t,n){var r=function(r){var o,a=0;do{if(a++>10){if(!n)throw new Error("too many ID collisions, use more bits");e+=n}o=this.createId(e,t)}while(Object.hasOwnProperty.call(i,o));return i[o]=r,o},i=r.hats={};return r.get=function(e){return r.hats[e]},r.set=function(e,t){return r.hats[e]=t,r},r.bits=e||128,r.base=t||16,r}},{key:"next",value:function(e){return this._seed(e||!0)}},{key:"nextPrefixed",value:function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n}},{key:"claim",value:function(e,t){this._seed.set(e,t||!0)}},{key:"assigned",value:function(e){return this._seed.get(e)||!1}},{key:"unclaim",value:function(e){delete this._seed.hats[e]}},{key:"clear",value:function(){var e=this._seed.hats;for(var t in e)this.unclaim(t)}}])&&Nn(t.prototype,n),r&&Nn(t,r),e}(),jn=n(0),In=n.n(jn);function Bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return this.$model.properties.get(this,e)}},{key:"set",value:function(e,t){this.$model.properties.set(this,e,t)}}])&&Bn(t.prototype,n),r&&Bn(t,r),e}();function Ln(e,t){this.model=e,this.properties=t}Ln.prototype.createType=function(e){var t=this.model,n=this.properties,r=Object.create($n.prototype);e.properties.forEach((function(e){e.isMany||void 0===e.default||(r[e.name]=e.default)})),n.defineModel(r,t),n.defineDescriptor(r,e);var i=e.ns.name;function o(e){for(var t in n.define(this,"$type",{value:i,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),e)this.set(t,e[t])}return o.prototype=r,o.hasType=r.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var _n={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},Fn={String:function(e){return e},Boolean:function(e){return"true"===e},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e,10)}},zn={xsi:"http://www.w3.org/2001/XMLSchema-instance"},qn=function(e,t){var n=Fn[e];return n?n(t):t},Wn=function(e){return!!_n[e]},Hn=function(e){return!!Fn[e]},Gn=function(e){return e.xml&&"lowerCase"===e.xml.tagAlias},Vn=function(e){return e.xml&&e.xml.serialize},Un=function(e){return"xsi:type"===Vn(e)},Xn=function(e,t){var n,r,i=e.split(/:/);if(1===i.length)n=e,r=t;else{if(2!==i.length)throw new Error("expected <prefix:localName> or <localName>, got "+e);n=i[1],r=i[0]}return{name:e=(r?r+":":"")+n,prefix:r,localName:n}};function Kn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}function Yn(e,t){var n=this;this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,Object.keys(e).forEach((function(t){n.registerPackage(e[t])}))}function Jn(e,t,n){var r=t[n];if(r in e)throw new Error("package with "+n+" <"+r+"> already defined")}function Qn(e){this.model=e}function Zn(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Kn.prototype.build=function(){return e=this,t=["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"],n={},r=Object(e),t.forEach((function(t){t in r&&(n[t]=e[t])})),n;var e,t,n,r},Kn.prototype.addProperty=function(e,t,n){"boolean"==typeof t&&(n=t,t=void 0),this.addNamedProperty(e,!1!==n);var r=this.properties;void 0!==t?r.splice(t,0,e):r.push(e)},Kn.prototype.replaceProperty=function(e,t,n){var r=e.ns,i=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=i.indexOf(e);if(-1===s)throw new Error("property <"+r.name+"> not found in property list");i.splice(s,1),this.addProperty(t,n?void 0:s,a),o[r.name]=o[r.localName]=t},Kn.prototype.redefineProperty=function(e,t,n){var r=e.ns.prefix,i=t.split("#"),o=Xn(i[0],r),a=Xn(i[1],o.prefix).name,s=this.propertiesByName[a];if(!s)throw new Error("refined property <"+a+"> not found");this.replaceProperty(s,e,n),delete e.redefines},Kn.prototype.addNamedProperty=function(e,t){var n=e.ns,r=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),r[n.name]=r[n.localName]=e},Kn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},Kn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},Kn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},Kn.prototype.assertNotDefined=function(e,t){var n=e.name,r=this.propertiesByName[n];if(r)throw new Error("property <"+n+"> already defined; override of <"+r.definedBy.ns.name+"#"+r.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},Kn.prototype.hasProperty=function(e){return this.propertiesByName[e]},Kn.prototype.addTrait=function(e,t){var n=this,r=this.allTypesByName,i=this.allTypes,o=e.name;o in r||(e.properties&&e.properties.forEach((function(r){r=Object.assign({},r,{name:r.ns.localName,inherited:t}),Object.defineProperty(r,"definedBy",{value:e});var i=r.replaces,o=r.redefines;i||o?n.redefineProperty(r,i||o,i):(r.isBody&&n.setBodyProperty(r),r.isId&&n.setIdProperty(r),n.addProperty(r))})),i.push(e),r[o]=e)},Yn.prototype.getPackage=function(e){return this.packageMap[e]},Yn.prototype.getPackages=function(){return this.packages},Yn.prototype.registerPackage=function(e){var t=this;e=Object.assign({},e);var n=this.packageMap;Jn(n,e,"prefix"),Jn(n,e,"uri"),e.types.forEach((function(n){t.registerType(n,e)})),n[e.uri]=n[e.prefix]=e,this.packages.push(e)},Yn.prototype.registerType=function(e,t){var n=this;e=Object.assign({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:Object.assign(e.meta||{})});var r=Xn(e.name,t.prefix),i=r.name,o={};e.properties.forEach((function(e){var t=Xn(e.name,r.prefix),n=t.name;Wn(e.type)||(e.type=Xn(e.type,t.prefix).name),Object.assign(e,{ns:t,name:n}),o[n]=e})),Object.assign(e,{ns:r,name:i,propertiesByName:o}),e.extends.forEach((function(e){var t=n.typeMap[e];t.traits=t.traits||[],t.traits.push(i)})),this.definePackage(e,t),this.typeMap[i]=e},Yn.prototype.mapTypes=function(e,t,n){var r=Wn(e.name)?{name:e.name}:this.typeMap[e.name],i=this;function o(e){return a(e,!0)}function a(n,r){var o=Xn(n,Wn(n)?"":e.prefix);i.mapTypes(o,t,r)}if(!r)throw new Error("unknown type <"+e.name+">");r.superClass&&r.superClass.forEach((function(e){n?o(e):a(e)})),t(r,!n),r.traits&&r.traits.length>0&&r.traits.forEach((function(e){o(e)}))},Yn.prototype.getEffectiveDescriptor=function(e){var t=Xn(e),n=new Kn(t);this.mapTypes(t,(function(e,t){n.addTrait(e,t)}));var r=n.build();return this.definePackage(r,r.allTypes[r.allTypes.length-1].$pkg),r},Yn.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})},Qn.prototype.set=function(e,t,n){var r=this.model.getPropertyDescriptor(e,t),i=r&&r.name;!function(e){return void 0===e}(n)?r?i in e?e[i]=n:Zn(e,r,n):e.$attrs[t]=n:r?delete e[i]:delete e.$attrs[t]},Qn.prototype.get=function(e,t){var n=this.model.getPropertyDescriptor(e,t);if(!n)return e.$attrs[t];var r=n.name;return!e[r]&&n.isMany&&Zn(e,n,[]),e[r]},Qn.prototype.define=function(e,t,n){Object.defineProperty(e,t,n)},Qn.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Qn.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})};var nr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.properties=new Qn(this),this.factory=new Ln(this,this.properties),this.registry=new Yn(t,this.properties),this.typeCache={}}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)}},{key:"getType",value:function(e){var t=this.typeCache,n="string"==typeof e&&e.constructor===String?e:e.ns.name,r=t[n];return r||(e=this.registry.getEffectiveDescriptor(n),r=t[n]=this.factory.createType(e)),r}},{key:"createAny",value:function(e,t,n){var r=Xn(e),i={$type:e,$instanceOf:function(e){return e===this.$type}},o={name:e,isGeneric:!0,ns:{prefix:r.prefix,localName:r.localName,uri:t}};for(var s in this.properties.defineDescriptor(i,o),this.properties.defineModel(i,this),this.properties.define(i,"$parent",{enumerable:!1,writable:!0}),n){var l=n[s];"object"===er(l)&&l.constructor===Object&&void 0!==l.value?i[l.name]=a.value:i[s]=l}return i}},{key:"getPackage",value:function(e){return this.registry.getPackage(e)}},{key:"getPackages",value:function(){return this.registry.getPackages()}},{key:"getElementDescriptor",value:function(e){return e.$descriptor}},{key:"hasType",value:function(e,t){return void 0===t&&(t=e,e=this),t in e.$model.getElementDescriptor(e).allTypesByName}},{key:"getPropertyDescriptor",value:function(e,t){return this.getElementDescriptor(e).propertiesByName[t]}},{key:"getTypeDescriptor",value:function(e){return this.registry.typeMap[e]}}])&&tr(t.prototype,n),r&&tr(t,r),e}(),rr=n(1),ir=n.n(rr);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ar=String.fromCharCode,sr=Object.prototype.hasOwnProperty,lr=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,ur={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function cr(e,t,n,r){return r?sr.call(ur,r)?ur[r]:"&"+r+";":ar(t||parseInt(n,16))}function pr(e){return e.length>3&&-1!==e.indexOf("&")?e.replace(lr,cr):e}Object.keys(ur).forEach((function(e){ur[e.toUpperCase()]=ur[e]}));function fr(e){return new Error(e)}function hr(e){return"missing namespace for prefix <"+e+">"}function dr(e){return{get:e,enumerable:!0}}function yr(e){var t,n={};for(t in e)n[t]=e[t];return n}function mr(e){return e+"$uri"}function gr(){return{line:0,column:0}}function vr(e){throw e}var xr=function e(t){if(!this)return new e(t);var n,r,i,o,a,s,l,u,c,p=t&&t.proxy,f=vr,h=gr,d=!1,y=!1,m=null,g=!1;function v(e){e instanceof Error||(e=fr(e)),m=e,f(e,h)}function x(e){a&&(e instanceof Error||(e=fr(e)),a(e,h))}this.on=function(e,t){if("function"!=typeof t)throw fr("required args <name, cb>");switch(e){case"openTag":r=t;break;case"text":n=t;break;case"closeTag":i=t;break;case"error":f=t;break;case"warn":a=t;break;case"cdata":o=t;break;case"attention":u=t;break;case"question":l=t;break;case"comment":s=t;break;default:throw fr("unsupported event: "+e)}return this},this.ns=function(e){if(void 0===e&&(e={}),"object"!==or(e))throw fr("required args <nsMap={}>");var t,n={};for(t in e)n[t]=e[t];return n["http://www.w3.org/2001/XMLSchema-instance"]="xsi",y=!0,c=n,this},this.parse=function(e){if("string"!=typeof e)throw fr("required args <xml=string>");return m=null,function(e){var t,a,f,m,b,w,S,E,C,k,A=y?[]:null,R=y?function(e){var t,n,r={};for(t in e)r[n=e[t]]=n,r[mr(n)]=t;return r}(c):null,P=[],T=0,O=!1,M=!1,N=0,D=0,j="",I=0;function B(){if(null!==k)return k;var e,t,n,r,i,o,a,s,l,u,p,f=y&&R.xmlns,h=y&&d?[]:null,m=I,g=j,v=g.length,b={},w={};e:for(;m<v;m++)if(l=!1,!(32===(u=g.charCodeAt(m))||u<14&&u>8)){for((u<65||u>122||u>90&&u<97)&&95!==u&&58!==u&&(x("illegal first char attribute name"),l=!0),p=m+1;p<v;p++)if(!((u=g.charCodeAt(p))>96&&u<123||u>64&&u<91||u>47&&u<59||46===u||45===u||95===u)){if(32===u||u<14&&u>8){x("missing attribute value"),m=p;continue e}if(61===u)break;x("illegal attribute name char"),l=!0}if("xmlns:xmlns"===(s=g.substring(m,p))&&(x("illegal declaration of xmlns"),l=!0),34===(u=g.charCodeAt(p+1)))-1===(p=g.indexOf('"',m=p+2))&&-1!==(p=g.indexOf("'",m))&&(x("attribute value quote missmatch"),l=!0);else if(39===u)-1===(p=g.indexOf("'",m=p+2))&&-1!==(p=g.indexOf('"',m))&&(x("attribute value quote missmatch"),l=!0);else for(x("missing attribute value quotes"),l=!0,p+=1;p<v&&!(32===(u=g.charCodeAt(p+1))||u<14&&u>8);p++);for(-1===p&&(x("missing closing quotes"),p=v,l=!0),l||(o=g.substring(m,p)),m=p;p+1<v&&!(32===(u=g.charCodeAt(p+1))||u<14&&u>8);p++)m===p&&(x("illegal character after attribute end"),l=!0);if(m=p+1,!l)if(s in w)x("attribute <"+s+"> already defined");else if(w[s]=!0,y)if(d){if(null!==(i="xmlns"===s?"xmlns":120===s.charCodeAt(0)&&"xmlns:"===s.substr(0,6)?s.substr(6):null)){if(e=pr(o),t=mr(i),!(a=c[e])){if("xmlns"===i||t in R&&R[t]!==e)do{a="ns"+T++}while(void 0!==R[a]);else a=i;c[e]=a}R[i]!==a&&(r||(R=yr(R),r=!0),R[i]=a,"xmlns"===i&&(R[mr(a)]=e,f=a),R[t]=e),b[s]=o;continue}h.push(s,o)}else-1!==(u=s.indexOf(":"))?(n=R[s.substring(0,u)])?("xsi:type"===(s=f===n?s.substr(u+1):n+s.substr(u))&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=R[n]||n)+o.substring(u)):o=f+":"+o),b[s]=o):x(hr(s.substring(0,u))):b[s]=o;else b[s]=o}if(d)for(m=0,v=h.length;m<v;m++){if(s=h[m++],o=h[m],-1!==(u=s.indexOf(":"))){if(!(n=R[s.substring(0,u)])){x(hr(s.substring(0,u)));continue}"xsi:type"===(s=f===n?s.substr(u+1):n+s.substr(u))&&(-1!==(u=o.indexOf(":"))?(n=o.substring(0,u),o=(n=R[n]||n)+o.substring(u)):o=f+":"+o)}b[s]=o}return k=b}function $(){for(var t,n,r=/(\r\n|\r|\n)/g,i=0,o=0,a=0,s=D;N>=a&&(t=r.exec(e))&&!((s=t[0].length+t.index)>N);)i+=1,a=s;return-1===N?(o=s,n=e.substring(D)):0===D?n=e.substring(D,N):(o=N-a,n=-1===D?e.substring(N):e.substring(N,D+1)),{data:n,line:i,column:o}}h=$,p&&(C=Object.create({},{name:dr((function(){return S})),originalName:dr((function(){return E})),attrs:dr(B),ns:dr((function(){return R}))}));for(;-1!==D;){if(-1===(N=60===e.charCodeAt(D)?D:e.indexOf("<",D)))return P.length?v("unexpected end of file"):0===D?v("missing start tag"):void(D<e.length&&e.substring(D).trim()&&x("non-whitespace outside of root node"));if(D!==N)if(P.length){if(n&&(n(e.substring(D,N),pr,h),g))return}else if(e.substring(D,N).trim()&&(x("non-whitespace outside of root node"),g))return;if(33!==(b=e.charCodeAt(N+1)))if(63!==b){if(-1===(D=e.indexOf(">",N+1)))return v("unclosed tag");if(k={},47===b){if(O=!1,M=!0,!P.length)return v("missing open tag");if(a=S=P.pop(),m=N+2+a.length,e.substring(N+2,m)!==a)return v("closing tag mismatch");for(;m<D;m++)if(!(32===(b=e.charCodeAt(m))||b>8&&b<14))return v("close tag")}else{if(47===e.charCodeAt(D-1)?(a=S=e.substring(N+1,D-1),O=!0,M=!0):(a=S=e.substring(N+1,D),O=!0,M=!1),!(b>96&&b<123||b>64&&b<91||95===b||58===b))return v("illegal first char nodeName");for(m=1,f=a.length;m<f;m++)if(!((b=a.charCodeAt(m))>96&&b<123||b>64&&b<91||b>47&&b<59||45===b||95===b||46===b)){if(32===b||b<14&&b>8){S=a.substring(0,m),k=null;break}return v("invalid nodeName")}M||P.push(S)}if(y){if(t=R,O&&(M||A.push(t),null===k&&(d=-1!==a.indexOf("xmlns",m))&&(I=m,j=a,B(),d=!1)),E=S,-1!==(b=S.indexOf(":"))){if(!(w=R[S.substring(0,b)]))return v("missing namespace on <"+E+">");S=S.substr(b+1)}else w=R.xmlns;w&&(S=w+":"+S)}if(O&&(I=m,j=a,r&&(p?r(C,pr,M,h):r(S,B,pr,M,h),g)))return;if(M){if(i&&(i(p?C:S,pr,O,h),g))return;y&&(R=O?t:A.pop())}D+=1}else{if(-1===(D=e.indexOf("?>",N)))return v("unclosed question");if(l&&(l(e.substring(N,D+2),h),g))return;D+=2}else{if(91===(b=e.charCodeAt(N+2))&&"CDATA["===e.substr(N+3,6)){if(-1===(D=e.indexOf("]]>",N)))return v("unclosed cdata");if(o&&(o(e.substring(N+9,D),h),g))return;D+=3;continue}if(45===b&&45===e.charCodeAt(N+3)){if(-1===(D=e.indexOf("--\x3e",N)))return v("unclosed comment");if(s&&(s(e.substring(N+4,D),pr,h),g))return;D+=3;continue}if(-1===(D=e.indexOf(">",N+1)))return v("unclosed tag");if(u&&(u(e.substring(N,D+1),pr,h),g))return;D+=1}}}(e),h=gr,g=!1,m},this.stop=function(){g=!0}},br=xr;function wr(e,t){var n;return t="function"==typeof t&&t.constructor===Function?t:function(e){return e===t},e.forEach((function(e,r){if(t(e,r))return n=e,!1})),n}function Sr(e,t){return Gn(t)?e.prefix+":"+function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(e.localName):e.name}function Er(e){return new Error(e)}function Cr(e){return e.$descriptor}function kr(e){Object.assign(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(e){this.references.push(e)},this.addElement=function(e){if(!e)throw Er("expected element");var t,n=this.elementsById,r=Cr(e).idProperty;if(r&&(t=e.get(r.name))){if(n[t])throw Er("duplicate ID <"+t+">");n[t]=e}},this.addWarning=function(e){this.warnings.push(e)}}function Ar(){}function Rr(){}function Pr(){}function Tr(e,t){this.property=e,this.context=t}function Or(e,t){this.element=t,this.propertyDesc=e}function Mr(){}function Nr(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}function Dr(e,t,n){Nr.call(this,e,t,n)}function jr(e,t,n){this.model=e,this.context=n}function Ir(e){e instanceof nr&&(e={model:e}),Object.assign(this,{lax:!1},e)}Ar.prototype.handleEnd=function(){},Ar.prototype.handleText=function(){},Ar.prototype.handleNode=function(){},Rr.prototype=Object.create(Ar.prototype),Rr.prototype.handleNode=function(){return this},Pr.prototype=Object.create(Ar.prototype),Pr.prototype.handleText=function(e){this.body=(this.body||"")+e},Tr.prototype=Object.create(Pr.prototype),Tr.prototype.handleNode=function(e){if(this.element)throw Er("expected no sub nodes");return this.element=this.createReference(e),this},Tr.prototype.handleEnd=function(){this.element.id=this.body},Tr.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}},Or.prototype=Object.create(Pr.prototype),Or.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=qn(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)},Mr.prototype=Object.create(Pr.prototype),Mr.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t},Nr.prototype=Object.create(Mr.prototype),Nr.prototype.addReference=function(e){this.context.addReference(e)},Nr.prototype.handleText=function(e){if(!Cr(this.element).bodyProperty)throw Er("unexpected body text <"+e+">");Pr.prototype.handleText.call(this,e)},Nr.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Cr(t).bodyProperty;n&&void 0!==e&&(e=qn(n.type,e),t.set(n.name,e))},Nr.prototype.createElement=function(e){var t,n=e.attributes,r=this.type,i=Cr(r),o=this.context,a=new r({}),s=this.model;return Object.keys(n).forEach((function(e){var r=n[e],l=i.propertiesByName[e];l&&l.isReference?l.isMany?r.split(" ").forEach((function(e){o.addReference({element:a,property:l.ns.name,id:e})})):o.addReference({element:a,property:l.ns.name,id:r}):(l?r=qn(l.type,r):"xmlns"!==e&&(t=Xn(e,i.ns.prefix),s.getPackage(t.prefix)&&o.addWarning({message:"unknown attribute <"+e+">",element:a,property:e,value:r})),a.set(e,r))})),a},Nr.prototype.getPropertyForNode=function(e){var t,n,r=e.name,i=Xn(r),o=this.type,a=this.model,s=Cr(o),l=i.name,u=s.propertiesByName[l];if(u)return Un(u)&&(t=e.attributes["xsi:type"])?(t=function(e,t){var n=Xn(e);return function(e,t){var n=e.name,r=e.localName,i=t.xml&&t.xml.typePrefix;return i&&0===r.indexOf(i)?e.prefix+":"+r.slice(i.length):n}(n,t.getPackage(n.prefix))}(t,a),n=a.getType(t),Object.assign({},u,{effectiveType:Cr(n).name})):u;var c=a.getPackage(i.prefix);if(c){if(t=Sr(i,c),n=a.getType(t),u=wr(s.properties,(function(e){return!e.isVirtual&&!e.isReference&&!e.isAttribute&&n.hasType(e.type)})))return Object.assign({},u,{effectiveType:Cr(n).name})}else if(u=wr(s.properties,(function(e){return!e.isReference&&!e.isAttribute&&"Element"===e.type})))return u;throw Er("unrecognized element <"+i.name+">")},Nr.prototype.toString=function(){return"ElementDescriptor["+Cr(this.type).name+"]"},Nr.prototype.valueHandler=function(e,t){return new Or(e,t)},Nr.prototype.referenceHandler=function(e){return new Tr(e,this.context)},Nr.prototype.handler=function(e){return"Element"===e?new jr(this.model,e,this.context):new Nr(this.model,e,this.context)},Nr.prototype.handleChild=function(e){var t,n,r,i;if(t=this.getPropertyForNode(e),r=this.element,n=t.effectiveType||t.type,Hn(n))return this.valueHandler(t,r);var o=(i=t.isReference?this.referenceHandler(t).handleNode(e):this.handler(n).handleNode(e)).element;return void 0!==o&&(t.isMany?r.get(t.name).push(o):r.set(t.name,o),t.isReference?(Object.assign(o,{element:r}),this.context.addReference(o)):o.$parent=r),i},Dr.prototype=Object.create(Nr.prototype),Dr.prototype.createElement=function(e){var t=e.name,n=Xn(t),r=this.model,i=this.type,o=r.getPackage(n.prefix),a=o&&Sr(n,o)||t;if(!i.hasType(a))throw Er("unexpected element <"+e.originalName+">");return Nr.prototype.createElement.call(this,e)},jr.prototype=Object.create(Mr.prototype),jr.prototype.createElement=function(e){var t=e.name,n=Xn(t).prefix,r=e.ns[n+"$uri"],i=e.attributes;return this.model.createAny(t,r,i)},jr.prototype.handleChild=function(e){var t=new jr(this.model,"Element",this.context).handleNode(e),n=this.element,r=t.element;return void 0!==r&&((n.$children=n.$children||[]).push(r),r.$parent=n),t},jr.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)},Ir.prototype.fromXML=function(e,t,n){var r=t.rootHandler;t instanceof Nr?(r=t,t={}):"string"==typeof t?(r=this.handler(t),t={}):"string"==typeof r&&(r=this.handler(r));var i=this.model,o=this.lax,a=new kr(Object.assign({},t,{rootHandler:r})),s=new br({proxy:!0}),l=new ir.a;function u(e,t,n){var r=t(),i=r.line,o=r.column,s=r.data;"<"===s.charAt(0)&&-1!==s.indexOf(" ")&&(s=s.slice(0,s.indexOf(" "))+">");var l="unparsable content "+(s?s+" ":"")+"detected\n\tline: "+i+"\n\tcolumn: "+o+"\n\tnested error: "+e.message;if(n)return a.addWarning({message:l,error:e}),!0;throw Er(l)}function c(e,t){return u(e,t,!0)}r.context=a,l.push(r);var p=/^<\?xml /i,f=/ encoding="([^"]+)"/i,h=/^utf-8$/i;function d(e,t){try{l.peek().handleText(e)}catch(e){c(e,t)}}var y=i.getPackages().reduce((function(e,t){return e[t.uri]=t.prefix,e}),{});s.ns(y).on("openTag",(function(e,t,n,r){var i=e.attrs||{},a=Object.keys(i).reduce((function(e,n){var r=t(i[n]);return e[n]=r,e}),{});!function(e,t){var n=l.peek();try{l.push(n.handleNode(e))}catch(e){u(e,t,o)&&l.push(new Rr)}}({name:e.name,originalName:e.originalName,attributes:a,ns:e.ns},r)})).on("question",(function(e){if(p.test(e)){var t=f.exec(e),n=t&&t[1];n&&!h.test(n)&&a.addWarning({message:"unsupported document encoding <"+n+">, falling back to UTF-8"})}})).on("closeTag",(function(){l.pop().handleEnd()})).on("cdata",d).on("text",(function(e,t,n){!function(e,t){(e=e.trim())&&d(e,t)}(t(e),n)})).on("error",u).on("warn",c),setTimeout((function(){var t;try{s.parse(e),function(){var e,t,n=a.elementsById,r=a.references;for(e=0;t=r[e];e++){var i=t.element,o=n[t.id],s=Cr(i).propertiesByName[t.property];if(o||a.addWarning({message:"unresolved reference <"+t.id+">",element:t.element,property:t.property,value:t.id}),s.isMany){var l=i.get(s.name),u=l.indexOf(t);-1===u&&(u=l.length),o?l[u]=o:l.splice(u,1)}else i.set(s.name,o)}}()}catch(e){t=e}var i=r.element;t||i||(t=Er("failed to parse document as <"+r.type.$descriptor.name+">")),n(t,t?void 0:i,a)}),0)},Ir.prototype.handler=function(e){return new Dr(this.model,e)};var Br=/<|>|'|"|&|\n\r|\n/g,$r=/<|>|&/g;function Lr(e,t){var n=[];return e.forEach((function(e,r){t(e,r)&&n.push(e)})),n}function _r(e){var t={},n={},r={},i=[],o=[];this.byUri=function(t){return n[t]||e&&e.byUri(t)},this.add=function(e,t){n[e.uri]=e,t?i.push(e):o.push(e),this.mapPrefix(e.prefix,e.uri)},this.uriByPrefix=function(e){return t[e||"xmlns"]},this.mapPrefix=function(e,n){t[e||"xmlns"]=n},this.logUsed=function(e){var t=e.uri;r[t]=this.byUri(t)},this.getUsed=function(e){return[].concat(i,o).filter((function(e){return r[e.uri]}))}}function Fr(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function zr(e){return"string"==typeof e&&e.constructor===String?e:(e.prefix?e.prefix+":":"")+e.localName}var qr={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},Wr={"<":"lt",">":"gt","&":"amp"};function Hr(e,t,n){return(e="string"==typeof e&&e.constructor===String?e:""+e).replace(t,(function(e){return"&"+n[e]+";"}))}function Gr(e){this.tagName=e}function Vr(){}function Ur(e){this.tagName=e}function Xr(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}function Kr(e,t){Xr.call(this,e,t)}function Yr(){this.value="",this.write=function(e){this.value+=e}}function Jr(e,t){var n=[""];this.append=function(t){return e.write(t),this},this.appendNewLine=function(){return t&&e.write("\n"),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function Qr(e){return e=Object.assign({format:!1,preamble:!0},e||{}),{toXML:function(t,n){var r=n||new Yr,i=new Jr(r,e.format);if(e.preamble&&i.append('<?xml version="1.0" encoding="UTF-8"?>\n'),(new Xr).build(t).serializeTo(i),!n)return r.value}}}function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e,t){return(ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oi(e);if(t){var i=oi(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ri(this,n)}}function ri(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?ii(e):t}function ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Gr.prototype.build=function(e){return this.element=e,this},Gr.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()},Vr.prototype.serializeValue=Vr.prototype.serializeTo=function(e){e.append(this.escape?function(e){return Hr(e,$r,Wr)}(this.value):this.value)},Vr.prototype.build=function(e,t){return this.value=t,"String"===e.type&&-1!==t.search($r)&&(this.escape=!0),this},Fr(Ur,Vr),Ur.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()},Xr.prototype.build=function(e){this.element=e;var t,n,r=e.$descriptor,i=this.propertyDescriptor,o=r.isGeneric;return t=o?this.parseGeneric(e):this.parseNsAttributes(e),this.ns=i?this.nsPropertyTagName(i):this.nsTagName(r),this.tagName=this.addTagName(this.ns),o||(n=function(e){return Lr(e.$descriptor.properties,(function(t){var n=t.name;if(t.isVirtual)return!1;if(!e.hasOwnProperty(n))return!1;var r=e[n];return r!==t.default&&(null!==r&&(!t.isMany||r.length))}))}(e),this.parseAttributes(Lr(n,(function(e){return e.isAttr}))),this.parseContainments(function(e){return Lr(e,(function(e){return!e.isAttr}))}(n))),this.parseGenericAttributes(e,t),this},Xr.prototype.nsTagName=function(e){return function(e,t){return t.isGeneric?Object.assign({localName:t.ns.localName},e):Object.assign({localName:(n=t.ns.localName,r=t.$pkg,Gn(r)?(i=n).charAt(0).toLowerCase()+i.slice(1):n)},e);var n,r,i}(this.logNamespaceUsed(e.ns),e)},Xr.prototype.nsPropertyTagName=function(e){return function(e,t){return Object.assign({localName:t.ns.localName},e)}(this.logNamespaceUsed(e.ns),e)},Xr.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Xr.prototype.nsAttributeName=function(e){var t;if(t="string"==typeof e&&e.constructor===String?Xn(e):e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:Object.assign({localName:t.localName},n)},Xr.prototype.parseGeneric=function(e){var t=this,n=this.body,r=[];for(var i in e){"$body"===i?n.push((new Vr).build({type:"String"},e[i])):"$children"===i?val.forEach((function(e){n.push(new Xr(t).build(e))})):0!==i.indexOf("$")&&t.parseNsAttribute(e,i,e[i])&&r.push({name:i,value:e[i]})}return r},Xr.prototype.parseNsAttribute=function(e,t,n){var r,i=e.$model,o=Xn(t);if("xmlns"===o.prefix&&(r={prefix:o.localName,uri:n}),o.prefix||"xmlns"!==o.localName||(r={uri:n}),!r)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(r,!0,!0);else{var a=this.logNamespaceUsed(r,!0);this.getNamespaces().logUsed(a)}},Xr.prototype.parseNsAttributes=function(e,t){var n=e.$attrs,r=[];for(var i in n){var o=this.parseNsAttribute(e,i,n[i]);o&&r.push(o)}return r},Xr.prototype.parseGenericAttributes=function(e,t){var n=this;t.forEach((function(e){if("xsi:type"!==e.name)try{n.addAttribute(n.nsAttributeName(e.name),e.value)}catch(e){}}))},Xr.prototype.parseContainments=function(e){var t=this,n=this.body,r=this.element;e.forEach((function(e){var i=r.get(e.name),o=e.isReference;if(e.isMany||(i=[i]),e.isBody)n.push((new Vr).build(e,i[0]));else if(Hn(e.type))i.forEach((function(r){n.push(new Ur(t.addTagName(t.nsPropertyTagName(e))).build(e,r))}));else if(o)i.forEach((function(r){n.push(new Gr(t.addTagName(t.nsPropertyTagName(e))).build(r))}));else{var a=Un(e),s=function(e){return"property"===Vn(e)}(e);i.forEach((function(r){var i;i=a?new Kr(t,e):s?new Xr(t,e):new Xr(t),n.push(i.build(r))}))}}))},Xr.prototype.getNamespaces=function(e){var t,n=this.namespaces,r=this.parent;return n||(t=r&&r.getNamespaces(),e||!t?this.namespaces=n=new _r(t):n=t),n},Xr.prototype.logNamespace=function(e,t,n){var r=this.getNamespaces(n),i=e.uri,o=e.prefix;return r.byUri(i)||r.add(e,t),r.mapPrefix(o,i),e},Xr.prototype.logNamespaceUsed=function(e,t){var n,r,i,o=this.element.$model,a=this.getNamespaces(t),s=e.prefix,l=e.uri;if(!s&&!l)return{localName:e.localName};if(i=zn[s]||o&&(o.getPackage(s)||{}).uri,!(l=l||i||a.uriByPrefix(s)))throw new Error("no namespace uri given for prefix <"+s+">");if(!(e=a.byUri(l))){for(n=s,r=1;a.uriByPrefix(n);)n=s+"_"+r++;e=this.logNamespace({prefix:n,uri:l},i===l)}return s&&a.mapPrefix(s,l),e},Xr.prototype.parseAttributes=function(e){var t=this,n=this.element;e.forEach((function(e){var r=n.get(e.name);if(e.isReference)if(e.isMany){var i=[];forEach(r,(function(e){i.push(e.id)})),r=i.join(" ")}else r=r.id;t.addAttribute(t.nsAttributeName(e),r)}))},Xr.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),zr(e)},Xr.prototype.addAttribute=function(e,t){var n=this.attrs;"string"==typeof t&&t.constructor===String&&(t=function(e){return Hr(e,Br,qr)}(t)),n.push({name:e,value:t})},Xr.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=function(e){return e.getUsed().map((function(e){return{name:"xmlns"+(e.prefix?":"+e.prefix:""),value:e.uri}}))}(n).concat(t)),t.forEach((function(t){e.append(" ").append(zr(t.name)).append('="').append(t.value).append('"')}))},Xr.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Vr;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),this.body.forEach((function(t){t.serializeTo(e)})),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()},Fr(Kr,Xr),Kr.prototype.parseNsAttributes=function(e){var t=Xr.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var r=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var i=e.$model.getPackage(r.uri),o=i.xml&&i.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName("xsi:type"),(r.prefix?r.prefix+":":"")+o+n.ns.localName),t},Kr.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};var ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ti(e,t)}(o,e);var t,n,r,i=ni(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,e,t),j.on("model.import",n.fromXML.bind(ii(n))),j.on("model.export",n.toXML.bind(ii(n))),j.on("model.create",n.createModel.bind(ii(n))),n}return t=o,(n=[{key:"createModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};t(this.create(e.descriptor,e.attrs))}},{key:"fromXML",value:function(e,t,n,r){"string"==typeof t&&t.constructor===String||(r=n,n=t,t="bpmn:Definitions"),"function"==typeof n&&n.constructor===Function&&(r=n,n={});var i=new Ir(Object.assign({model:this,lax:!0},n)),o=i.handler(t);i.fromXML(e,o,r)}},{key:"toXML",value:function(e,t,n){"function"==typeof t&&t.constructor===Function&&(n=t,t={});var r,i,o=new Qr(t);try{r=o.toXML(e)}catch(e){i=e}return n(i,r)}}])&&ei(t.prototype,n),r&&ei(t,r),o}(nr),si={bpmn:n(2),bpmndi:n(3),dc:n(4),di:n(5)},li=function(e,t){var n=Object.assign({},si,e);return new ai(n,t)};function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ci={show:!0,size:15},pi=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.options=n,this.config=Object.assign({},ci,r),this.renderBG()}var t,n,r;return t=e,(n=[{key:"renderBG",value:function(){var e=this.$container,t=this.options,n=this.config;if(n.show){var r=t.pageStyle.width,i=t.pageStyle.height,o=t.pageStyle.backgroundColor,a=Q.getDarkerColor(o),s=Q.getDarkestColor(o),l=e.find(".bpd-designer"),u=l.find(".shape-background");0===u.length&&(u=ee('<canvas class="shape-background"></canvas>').appendTo(l)),u.attr({width:r,height:i});var c=u[0].getContext("2d");c.clearRect(0,0,r,i);var p=r-0,f=i-0;c.fillStyle="rgb("+o+")",c.beginPath(),c.rect(0,0,p,f),c.fill();var h=Math.round(w(n.size));h<10&&(h=10),c.translate(0,0),c.lineWidth=1,c.save();for(var d=.5,y=0;d<=f;)c.restore(),c.strokeStyle=y%4==0?"rgb("+s+")":"rgb("+a+")",c.beginPath(),c.moveTo(0,d),c.lineTo(p,d),d+=h,y++,c.stroke();for(d=.5,y=0;d<=p;)c.restore(),c.strokeStyle=y%4==0?"rgb("+s+")":"rgb("+a+")",c.beginPath(),c.moveTo(d,0),c.lineTo(d,f),d+=h,y++,c.stroke()}}}])&&ui(t.prototype,n),r&&ui(t,r),e}();function fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var hi={filter:[],suffix:"副本"},di=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=Object.assign({},hi,n),this.copyElements=[],this.presetedIds={},this.ids=t.ids,this.plus=!0,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.trigger("key.bind",{key:"Ctrl+C",fun:this.copy.bind(this)}),j.trigger("key.bind",{key:"Ctrl+V",fun:this.paste.bind(this)}),j.on("clipboard.copy",this.copy.bind(this)),j.on("clipboard.paste",this.paste.bind(this))}},{key:"presetIds",value:function(){this.presetedIds={};for(var e=0;e<this.copyElements.length;e+=1){var t=this.copyElements[e];this.presetedIds[t.data.id]="obj_"+this.ids.next()}}},{key:"copy",value:function(){var e=this;this.copyElements=[],j.trigger("shape.select.get").forEach((function(t){var n=E(t.data.$type);if(!e.config.filter.includes(n)){var r=b(t);e.copyElements.push(r)}})),this.copyElements.sort((function(e,t){return e.shape.shapeStyle.zindex-t.shape.shapeStyle.zindex})),this.presetIds(),this.plus=!0}},{key:"paste",value:function(){if(0!==this.copyElements.length){for(var e=[],t=[],n=j.trigger("element.get"),r=0;r<this.copyElements.length;r+=1){var i=this.copyElements[r];if("SequenceFlow"!==i.shape.bpmnName){i.shape.shapeStyle.zindex=Object.keys(n).length+1,this.plus&&(i.plane.bounds.x+=15,i.plane.bounds.y+=15);var o=b(i);o.data.name+=this.config.suffix,o.data.id=this.presetedIds[i.data.id],e.push(o),t.push(o.data.id)}}j.trigger("element.add",e);for(var a=0;a<e.length;a+=1){var s=e[a],l=s.shape.bpmnName;"SequenceFlow"===l?j.trigger("connection.render",{element:s}):j.trigger("shape.render",{type:l,element:s})}j.trigger("element.build"),this.presetIds(),j.trigger("shape.select.remove"),j.trigger("shape.select",{ids:t}),this.plus=!0}}}])&&fi(t.prototype,n),r&&fi(t,r),e}();function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var mi={},gi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},mi,n),this.interval=null,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("direction.show",this.showDirection.bind(this)),j.on("direction.hide",this.hideDirection.bind(this)),j.on("select.clear",this.hideDirection.bind(this))}},{key:"showDirection",value:function(){this.hideDirection();var e=j.trigger("shape.select.getIds");if(1===e.length){var t=j.trigger("element.get",e[0]),n=t.data;if(t.plane,"SequenceFlow"!==t.shape.bpmnName){var r=j.trigger("connections.get",n.id);if(r&&r.length){for(var i=[],o=0;o<r.length;o+=1){var a=j.trigger("element.get",r[o]);if(n.id===a.data.sourceRef&&a.data.targetRef){var s=w(Q.getConnectionLength(a)),l=[];if("broken"===a.shape.linkerType){var u=a.plane.waypoint;l.push({x:w(u[0].x),y:w(u[0].y),t:0});for(var c=0;c<a.shape.points.length;c+=1){var p=a.shape.points[c];l.push({x:w(p.x),y:w(p.y)})}l.push({x:w(u[u.length-1].x),y:w(u[u.length-1].y)});for(var f=0,h=1;h<l.length;h+=1){var d=l[h-1],y=l[h];f+=Q.measureDistance(d,y),y.t=f/s}}for(var m=3/s,g=120*Math.ceil(s/120)/s,v=0;v<s;)i.push({t:v/s,step:m,connection:a,points:l,maxT:g}),v+=120}}this.playDirection(i)}}}}},{key:"playDirection",value:function(e){for(var t=this.$container,n=(this.options,t.find(".bpd-designer")),r=0;r<e.length;r+=1){var i=e[r],o=i.connection,a=o.data,s=(o.plane,o.shape),l=ee("<div class='connection-direction'></div>").appendTo(n),u=w(s.lineStyle.lineWidth+2);u<5&&(u=5);var c=u/2;i.half=c,i.dom=l,l.css({width:u,height:u,"-webkit-border-radius":c,"-moz-border-radius":c,"-ms-border-radius":c,"-o-border-radius":c,"border-radius":c,"z-index":ee("#"+a.id).css("z-index")})}this.interval=setInterval((function(){for(var t=0;t<e.length;t+=1){var n=e[t],r=n.connection,i=(r.data,r.plane),o=r.shape;n.t>=n.maxT&&(n.t=0,n.dom.show());var a=n.t;if("broken"===o.linkerType)for(var s=1;s<n.points.length;s++){var l=n.points[s-1],u=n.points[s];if(a>=l.t&&a<u.t){var c=(a-l.t)/(u.t-l.t),p=(1-c)*l.x+c*u.x,f=(1-c)*l.y+c*u.y;n.dom.css({left:p-n.half,top:f-n.half});break}}else{var h=i.waypoint[0],d=i.waypoint[i.waypoint.length-1];if("curve"===o.linkerType){var y=o.points[0],m=o.points[1],g=w(h.x)*Math.pow(1-a,3)+w(y.x)*a*Math.pow(1-a,2)*3+w(m.x)*Math.pow(a,2)*(1-a)*3+w(d.x)*Math.pow(a,3),v=w(h.y)*Math.pow(1-a,3)+w(y.y)*a*Math.pow(1-a,2)*3+w(m.y)*Math.pow(a,2)*(1-a)*3+w(d.y)*Math.pow(a,3);n.dom.css({left:g-n.half,top:v-n.half})}else{var x=(1-a)*w(h.x)+a*w(d.x),b=(1-a)*w(h.y)+a*w(d.y);n.dom.css({left:x-n.half,top:b-n.half})}}n.t+=n.step,n.t>=1&&n.dom.hide()}}),30)}},{key:"hideDirection",value:function(){this.interval&&clearInterval(this.interval),this.$container.find(".connection-direction").remove()}}])&&yi(t.prototype,n),r&&yi(t,r),e}();function vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xi={borderColor:"#999999",onEdited:function(){}},bi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},xi,n),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("edit.shape.name",this.editShapeName.bind(this))}},{key:"editShapeName",value:function(){var e=this,t=this.$container,n=this.config,r=j.trigger("shape.select.getIds")||[];if(1===r.length){var i=j.trigger("element.get",r[0]),o=i.data,a=i.plane,s=i.shape;if("SequenceFlow"===s.bpmnName)return this.editConnectionName(i),!0;var l=t.find(".shape-name-edit");0===l.length&&(l=ee("<textarea class='shape-name-edit'></textarea>").appendTo(t.find(".bpd-designer")));var u=t.find(".shape-name-temp");0===u.length&&(u=ee("<textarea class='shape-name-temp'></textarea>").appendTo(t.find(".bpd-designer"))),ee(".text-box[data-shape="+o.id+"]").hide();var c=j.trigger("orders.get"),p=s.fontStyle,f=s.getTextBlock(),h={width:f.width+"px","border-color":n.borderColor,"line-height":Math.round(1.25*p.size)+"px","font-size":p.size+"px","font-family":p.fontFamily,"font-weight":p.bold?"bold":"normal","font-style":p.italic?"italic":"normal","text-align":p.textAlign,color:"rgb("+p.color+")","text-decoration":p.underline?"underline":"none","z-index":c.length+10};l.css(h).show(),u.css(h),f.x+=a.bounds.x,f.y+=a.bounds.y,l.val(o.name),l.off().on("keyup",(function(){u.val(l.val()),u.scrollTop(99999);var e=u.scrollTop();l.css({height:e}),f.x,f.width;var t=f.y+f.height/2,n=0,r=0,i=f.height;switch(p.vAlign){case"middle":e>i?(n=t-(i=e)/2-5,r=0):(n=t-f.height/2-5,r=(f.height-e)/2,i=f.height-r);break;default:n=t-f.height/2+5,i=e>i?e:f.height}var o=10+i,a={x:f.x+f.width/2-5,y:n+o/2};l.css({width:f.width,height:i,"padding-top":r,padding:5,left:w(a.x)-f.width/2-1,top:w(a.y)-o/2-1})})).on("blur",(function(t){e.updateShapeName(i)})).on("mousemove",(function(e){e.stopPropagation()})).on("mousedown",(function(e){e.stopPropagation()})),l.trigger("keyup"),l.select()}}},{key:"updateShapeName",value:function(e){var t=e.data,n=this.$container.find(".shape-name-edit"),r=n.val();n.length&&n.is(":visible")&&(r!==t.name&&(t.name=r,j.trigger("element.update",e),this.config.onEdited(A(e))),j.trigger("shape.render",{type:e.shape.bpmnName,element:e}),n.remove())}},{key:"editConnectionName",value:function(e){var t=this,n=this.$container,r=this.config,i=e.data,o=(e.plane,e.shape),a=n.find(".shape-box[data-id="+i.id+"]").find(".text-box[data-shape="+i.id+"]"),s=n.find(".connection-name-edit");0===s.length&&(s=ee("<textarea class='connection-name-edit'></textarea>").appendTo(n.find(".bpd-designer"))),a.hide();var l=j.trigger("orders.get"),u=o.fontStyle,c=Math.round(1.25*u.size),p={"border-color":r.borderColor,"line-height":c+"px","font-size":u.size+"px","font-family":u.fontFamily,"font-weight":u.bold?"bold":"normal","font-style":u.italic?"italic":"normal","text-align":u.textAlign,color:"rgb("+u.color+")","text-decoration":u.underline?"underline":"none",padding:5,"z-index":l.length+10};s.css(p),s.val(i.name).show().select();var f=Q.getConnectionMidpoint(o);s.off().on("keyup",(function(){var e=s.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br/>");a.html(e+"<br />");var t=a.width();t<50&&(t=50);var n=a.height();n<c&&(n=c),s.css({left:f.x-t/2-1-5,top:f.y-n/2-1-5,width:t,height:n})})).on("blur",(function(){t.updateConnectionName(e)})).on("mousemove",(function(e){e.stopPropagation()})).on("mousedown",(function(e){e.stopPropagation()})),s.trigger("keyup")}},{key:"updateConnectionName",value:function(e){var t=e.data,n=this.$container.find(".connection-name-edit"),r=n.val();n.length&&n.is(":visible")&&(r!==t.name&&(t.name=r,j.trigger("element.update",e),this.config.onEdited(A(e))),j.trigger("connection.render",{element:e}),n.remove())}}])&&vi(t.prototype,n),r&&vi(t,r),e}();function wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Si=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.status=!0,this.stack=[]}var t,n,r;return t=e,(n=[{key:"push",value:function(e){this.stack.push(e)}},{key:"pop",value:function(){return this.stack.pop()}},{key:"top",value:function(){return this.stack[this.stack.length-1]}},{key:"size",value:function(){return this.stack.length}},{key:"clear",value:function(){return this.stack=[],!0}},{key:"setStatus",value:function(e){this.status=e}}])&&wi(t.prototype,n),r&&wi(t,r),e}();function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ci=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.batSize=0,this.records=[],this.undoStack=new Si,this.redoStack=new Si,this.initStatus=!1,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.trigger("key.bind",{key:"Ctrl+Z",fun:this.undo.bind(this)}),j.trigger("key.bind",{key:"Ctrl+Y",fun:this.redo.bind(this)}),j.on("record.initStatus",this.setInitStatus.bind(this)),j.on("record.start",this.start.bind(this)),j.on("record.end",this.end.bind(this)),j.on("record.push",this.push.bind(this)),j.on("record.execute",this.execute.bind(this))}},{key:"start",value:function(){this.initStatus&&this.batSize++}},{key:"end",value:function(){this.initStatus&&(this.batSize--,this.execute())}},{key:"push",value:function(e){this.initStatus&&(this.records.push(e),this.execute())}},{key:"execute",value:function(){this.initStatus&&0===this.batSize&&0!==this.records.length&&(this.undoStack.status&&this.undoStack.push(this.records),this.records=[])}},{key:"setInitStatus",value:function(e){this.initStatus=e}},{key:"undo",value:function(){this.undoStack.setStatus(!1);var e=this.undoStack.size();if(this.initStatus&&e>0){var t=this.undoStack.top();this.undoStack.pop(),this.redoStack.push(t),this.start();for(var n=t.length-1;n>=0;n-=1){var r=t[n];switch(r.action){case"create":j.trigger("shape.select.remove"),j.trigger("shape.remove",{elements:r.content,isRemove:!1});break;case"update":var i=r.content.elements;j.trigger("element.update",i);for(var o=0;o<i.length;o+=1){var a=i[o],s=a.shape.bpmnName;"SequenceFlow"===s?j.trigger("connection.render",{element:a}):j.trigger("shape.render",{type:s,element:a})}var l=j.trigger("shape.select.getIds");j.trigger("shape.select.remove"),j.trigger("shape.select",{ids:l});break;case"remove":j.trigger("element.add",r.content);for(var u=0;u<r.content.length;u+=1){var c=r.content[u],p=c.shape.bpmnName;"SequenceFlow"===p?j.trigger("connection.render",{element:c}):j.trigger("shape.render",{type:p,element:c})}}}this.end()}this.undoStack.setStatus(!0)}},{key:"redo",value:function(){this.undoStack.setStatus(!1);var e=this.redoStack.size();if(this.initStatus&&e>0){var t=this.redoStack.top();this.redoStack.pop(),this.undoStack.push(t),this.start(),t.forEach((function(e){switch(e.action){case"create":j.trigger("element.add",e.content);for(var t=0;t<e.content.length;t+=1){var n=e.content[t],r=n.shape.bpmnName;"SequenceFlow"===r?j.trigger("connection.render",{element:n}):j.trigger("shape.render",{type:r,element:n})}break;case"update":var i=e.content.updates;j.trigger("element.update",i);for(var o=0;o<i.length;o+=1){var a=i[o],s=a.shape.bpmnName;"SequenceFlow"===s?j.trigger("connection.render",{element:a}):j.trigger("shape.render",{type:s,element:a})}var l=j.trigger("shape.select.getIds");j.trigger("shape.select.remove"),j.trigger("shape.select",{ids:l});break;case"remove":j.trigger("shape.select.remove"),j.trigger("shape.remove",{elements:e.content})}})),this.end()}this.undoStack.setStatus(!1)}}])&&Ei(t.prototype,n),r&&Ei(t,r),e}();function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ai={size:8,color:"#ec5343"},Ri=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},Ai,n),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("anchor.show",this.showAnchors.bind(this)),j.on("anchor.remove",this.removeAnchors.bind(this)),j.on("anchor.hover",this.hoverAnchors.bind(this)),j.on("anchor.point.show",this.showAnchorPoint.bind(this)),j.on("anchor.point.remove",this.hideAnchorPoint.bind(this)),j.on("shape.move",this.moveAnchors.bind(this)),j.on("shape.select.remove",this.removeAnchors.bind(this)),j.on("select.clear",this.removeAnchors.bind(this)),j.on("destroy",this.destroy.bind(this))}},{key:"showAnchors",value:function(e){var t=this.config,n=this.$container,r=e.data,i=e.plane,o=e.shape,a=j.trigger("orders.get"),s=j.trigger("shape.select.getIds"),l=(n.find(".bpd-layout"),n.find(".bpd-designer")),u=n.find('.shape-contour[data-id="'+r.id+'"]');if(!(u.length>0)){(u=ee("<div class='shape-contour' data-id='"+r.id+"'></div>").appendTo(l)).css({left:w(i.bounds.x),top:w(i.bounds.y),"z-index":a.length+1}),s.indexOf(r.id)>=0||u.addClass("shape-contour-hover");for(var c=t.size-2,p={"border-color":t.color,"border-radius":t.size/2,width:c,height:c},f=o.getAnchors(),h={x:i.bounds.width/2,y:i.bounds.height/2},d=0;d<f.length;d+=1){var y=f[d],m=ee("<div class='shape-anchor'></div>").appendTo(u),g=Q.getRotated(h,y,o.shapeStyle.angle);p.left=w(g.x)-t.size/2,p.top=w(g.y)-t.size/2,m.css(p)}}}},{key:"moveAnchors",value:function(e){for(var t=e.elements,n=(e.pos,0);n<t.length;n++){var r=t[n],i=r.data,o=r.plane;"SequenceFlow"!==r.shape.bpmnName&&this.$container.find(".shape-contour[data-id="+i.id+"]").css({left:w(o.bounds.x),top:w(o.bounds.y)})}}},{key:"hideAnchors",value:function(){this.$container.find(".shape-contour-hover").remove()}},{key:"removeAnchors",value:function(){this.$container.find(".shape-contour").remove()}},{key:"hoverAnchors",value:function(e){var t=e.state,n=e.element,r=e.anchor,i=(this.config,this.$container),o=n.data,a=(n.plane,n.shape,i.find(".bpd-layout")),s=i.find(".bpd-designer"),l=this;a.off("mousedown.connection").on("mousedown.connection",(function(e){t.change("link_shape");var u,c=null;if(n)(u=r).id=o.id;else{var p=Q.getRelativePos(e.pageX,e.pageY,s);u={x:S(p.x),y:S(p.y),id:null,angle:null}}a.on("mousemove.connection",(function(e){a.css("cursor","default");var t=Q.getRelativePos(e.pageX,e.pageY,s);null==c&&(c=l.createConnection(u,t)),j.trigger("connection.move",{element:c,type:"target",x:t.x,y:t.y}),ee(document).off("mouseup.dropConnection").on("mouseup.dropConnection",(function(){Math.abs(t.x-u.x)>20||Math.abs(t.y-u.y)>20?(j.trigger("element.add",c),null==c.data.targetRef&&null!=c.data.sourceRef&&j.trigger("group.connection.show",c)):i.find('.shape-box[data-id="'+c.data.id+'"]').remove(),ee(document).off("mouseup.dropConnection")}))})),ee(document).on("mouseup.connection",(function(){j.trigger("anchor.point.remove"),t.reset(),a.off("mousedown.connection"),a.off("mousemove.connection"),ee(document).off("mouseup.connection")}))}))}},{key:"showAnchorPoint",value:function(e){var t=this.config,n=this.$container,r=j.trigger("orders.get"),i=n.find(".bpd-designer"),o=i.find(".anchor-point");if(0===o.length){var a=(o=ee("<canvas class='anchor-point' width=32 height=32></canvas>").appendTo(i))[0].getContext("2d");a.translate(1,1),a.lineWidth=1,a.globalAlpha=.3,a.strokeStyle=t.color,a.fillStyle=t.color,a.beginPath(),a.moveTo(0,15),a.bezierCurveTo(0,-5,30,-5,30,15),a.bezierCurveTo(30,35,0,35,0,15),a.closePath(),a.fill(),a.stroke()}o.css({left:e.x-16,top:e.y-16,"z-index":r.length}).show()}},{key:"hideAnchorPoint",value:function(){this.$container.find(".anchor-point").remove()}},{key:"createConnection",value:function(e,t){var n=j.trigger("element.create",{name:"",type:"SequenceFlow",prefix:"obj"}),r=n.data,i=n.plane;return r.sourceRef=e.id,i.waypoint.length>1?i.waypoint[i.waypoint.length-1]={$type:"dc:Point",x:t.x,y:t.y,angle:null}:(i.waypoint[0]={$type:"dc:Point",x:e.x,y:e.y,angle:e.angle},i.waypoint[1]={$type:"dc:Point",x:t.x,y:t.y,angle:null}),j.trigger("connection.render",{element:n}),n}},{key:"destroy",value:function(){this.hideAnchors()}}])&&ki(t.prototype,n),r&&ki(t,r),e}();function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ti={color:"#ec5343",onSelected:function(){}},Oi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},Ti,n),this.selectIds=[],this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("shape.hover",this.selectable.bind(this)),j.on("shape.multiSelect",this.multiSelectable.bind(this)),j.on("shape.select.getIds",this.getSelectedIds.bind(this)),j.on("shape.select.get",this.getSelected.bind(this)),j.on("shape.select",this.selectShape.bind(this)),j.on("shape.move",this.moveSelect.bind(this)),j.on("shape.select.remove",this.unselect.bind(this)),j.on("shape.select.check",this.isSelected.bind(this)),j.on("destroy",this.destroy.bind(this))}},{key:"selectable",value:function(e){var t=this,n=e.state,r=e.element,i=this.$container.find(".bpd-designer"),o=this;i.on("mousedown.select",(function(e){n.change("select_shapes");var a=r.data.id;e.ctrlKey?(t.isSelected(a)||t.selectIds.push(a),t.unselect(),t.selectIds.length):t.isSelected(a)||(t.unselect(),t.selectShape({ids:a,select:!1})),r.shape.groupName&&"CallActivity"!==r.shape.groupName&&j.trigger("group.show",t.getSelected()),ee(document).on("mouseup.select",(function(){"select_shapes"===n.state?o.handleSelectCallback():"drag_shapes"===n.state&&o.unselect(),n.reset(),i.off("mousedown.select"),ee(document).off("mouseup.select")}))}))}},{key:"multiSelectable",value:function(e){var t=e.state,n=this.$container.find(".bpd-layout"),r=this.$container.find(".bpd-designer"),i=j.trigger("orders.get"),o=this;n.off("mousedown.multiselect").on("mousedown.multiselect",(function(e){var a=null;if(e.ctrlKey||o.unselect(),"multiSelect"===t.state){var s=Q.getRelativePos(e.pageX,e.pageY,r);n.on("mousemove.multiselect",(function(e){null==a&&(a=ee("<div class='multiselect-box'></div>").appendTo(r));var t=Q.getRelativePos(e.pageX,e.pageY,r),n={"z-index":i.length,left:t.x,top:t.y};t.x>s.x&&(n.left=s.x),t.y>s.y&&(n.top=s.y),n.width=Math.abs(t.x-s.x),n.height=Math.abs(t.y-s.y),a.css(n)})),ee(document).off("mouseup.multiselect").on("mouseup.multiselect",(function(e){if(null!=a){var r={x:S(a.position().left),y:S(a.position().top),width:S(a.width()),height:S(a.height())},i=Q.getElementIdsByRange(r);if(e.ctrlKey){var s=o.getSelectedIds();x(i,s)}o.unselect(),o.selectShape({ids:i}),a.remove()}t.reset(),ee(document).off("mouseup.multiselect"),n.off("mousemove.multiselect")}))}n.off("mousedown.multiselect")}))}},{key:"getSelectedIds",value:function(){return this.selectIds}},{key:"getSelected",value:function(){for(var e=[],t=0;t<this.selectIds.length;t+=1){var n=this.selectIds[t],r=j.trigger("element.get",n);r.shape.locked||e.push(r)}return e}},{key:"selectShape",value:function(e){var t=e.ids,n=e.select,r=void 0===n||n;if("string"==typeof t&&(t=[t]),!(t.length<=0)){x([],t);for(var i=[],o=0;o<t.length;o+=1){var a=t[o],s=j.trigger("element.get",a);s.shape.parent&&0===s.shape.resizeDir.length&&i.indexOf(s.shape.parent)<0?i.push(s.shape.parent):i.indexOf(a)<0&&i.push(a)}t=i,j.trigger("anchor.remove"),this.selectIds=[];for(var l=0;l<t.length;l+=1){var u=t[l],c=j.trigger("element.get",u);this.selectIds.push(u),"SequenceFlow"===c.shape.bpmnName?j.trigger("connection.render",{element:c}):j.trigger("anchor.show",c)}var p=this.selectIds,f=!1;1===p.length&&"SequenceFlow"===j.trigger("element.get",p[0]).shape.bpmnName&&(f=!0),p.length>0&&!f&&this.renderSelectBox(p),j.trigger("direction.show"),r&&this.handleSelectCallback()}}},{key:"renderSelectBox",value:function(e){var t=this.$container,n=(t.find(".bpd-layout"),t.find(".bpd-designer")),r=j.trigger("orders.get"),i=n.find(".shape-select");0===i.length&&(i=ee("<div class='shape-select'><canvas class='shape-bound'></canvas></div>").appendTo(n)),i.show(),j.trigger("group.hide",i);var o=0,a={};if(1===e.length){var s=j.trigger("element.get",e[0]);a.angle=o=s.shape.shapeStyle.angle,a.zindex=s.shape.shapeStyle.zindex,a.height=s.plane.bounds.height,a.width=s.plane.bounds.width,a.x=s.plane.bounds.x,a.y=s.plane.bounds.y,s.shape.groupName&&"CallActivity"!==s.shape.groupName&&j.trigger("group.show",this.getSelected())}else a=Q.getElementsBox(e);var l=Q.getRotatedBox(a,o);this.renderControlBound(i,a,l,o),i.css({left:w(l.x),top:w(l.y),width:w(l.width),height:w(l.height),"z-index":r.length,display:"block"})}},{key:"renderControlBound",value:function(e,t,n,r){var i=this.config,o=w(n.width)+20,a=w(n.height)+20,s=e.find(".shape-bound");s.attr({width:o,height:a});var l=s[0].getContext("2d");l.lineJoin="round",l.lineWidth=1,l.strokeStyle=i.color,l.globalAlpha=.5,l.save(),l.clearRect(0,0,o,a),l.translate(o/2,a/2),l.rotate(r),l.translate(-o/2,-a/2),l.translate(9.5,9.5);var u={x:w(Math.round(t.x-n.x)),y:w(Math.round(t.y-n.y)),width:Math.floor(w(t.width)+1),heigth:Math.floor(w(t.height)+1)};l.strokeRect(u.x,u.y,u.width,u.heigth),l.restore()}},{key:"moveSelect",value:function(e){var t=e.elements,n=e.pos,r=Q.getSelectedConnectionIds();if(1!==t.length||1!==r.length)if(r.length>0){var i=j.trigger("shape.select.getIds");this.renderSelectBox(i)}else{var o=this.$container.find(".shape-select");o.css({left:parseFloat(o.css("left"))+n.x,top:parseFloat(o.css("top"))+n.y})}}},{key:"unselect",value:function(){var e=this.selectIds;this.selectIds=[];for(var t=0;t<e.length;t+=1){var n=e[t],r=j.trigger("element.get",n);r&&"SequenceFlow"===r.shape.bpmnName&&j.trigger("connection.render",{element:r})}this.$container.find(".shape-select").hide(),j.trigger("select.clear")}},{key:"isSelected",value:function(e){return this.selectIds.indexOf(e)>=0}},{key:"handleSelectCallback",value:function(){this.config.onSelected&&(1===this.selectIds.length?this.config.onSelected(A(this.getSelected()[0])):this.config.onSelected(null))}},{key:"destroy",value:function(){var e=this.$container.find(".bpd-layout");this.$container.find(".bpd-designer").off("mousedown.select"),e.off("mousedown.multiselect")}}])&&Pi(t.prototype,n),r&&Pi(t,r),e}();function Mi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ni=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.$container=n,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("shape.drag",this.dragShape.bind(this)),j.on("connection.drag",this.dragConnection.bind(this)),j.on("destroy",this.destroy.bind(this))}},{key:"dragShape",value:function(e){var t=this,n=e.state,r=(e.element,this.$container),i=(this.options,r.find(".bpd-layout")),o=r.find(".bpd-designer");o.on("mousedown.drag",(function(e){j.trigger("direction.hide");var r=Q.getRelativePos(e.pageX,e.pageY,o),a=j.trigger("shape.select.get"),s=!0;1===a.length&&"SequenceFlow"===a[0].shape.bpmnName&&(s=!1);var u=null;s&&(u=Q.getBounding(a));var c=[];if(s)for(var p=0;p<a.length;p+=1){var f=a[p],h=f.data;"SequenceFlow"===f.shape.bpmnName&&(h.sourceRef&&c.indexOf(h.sourceRef)<0&&c.push(h.sourceRef),h.targetRef&&c.indexOf(h.targetRef)<0&&c.push(h.targetRef)),c.indexOf(h.id)<0&&c.push(h.id)}var d=Q.getOutConnections(a);a=a.concat(d),i.on("mousemove.drag",(function(e){var i=Q.getRelativePos(e.pageX,e.pageY,o),p={x:i.x-r.x,y:i.y-r.y};if(s){var f=l(u);f.x+=p.x,f.y+=p.y,j.trigger("shape.snapline.show",{size:f,ids:c}),p={x:f.x-u.x,y:f.y-u.y},i={x:r.x+p.x,y:r.y+p.y},u.x+=p.x,u.y+=p.y}0===p.x&&0===p.y||(n.change("drag_shapes"),t.moveShape(a,p),r=i,ee(document).off("mouseup.drop").on("mouseup.drop",(function(){j.trigger("element.update",a),ee(document).off("mouseup.drop")})))})),ee(document).on("mouseup.drag",(function(){n.reset(),i.off("mousemove.drag"),o.off("mousedown.drag"),ee(document).off("mouseup.drag"),j.trigger("shape.snapline.hide"),j.trigger("shape.tooltip.hide"),j.trigger("direction.show")}))}))}},{key:"dragConnection",value:function(e){var t=this,n=e.state,r=e.element,i=e.point,o=this.$container,a=(this.options,o.find(".bpd-layout")),s=o.find(".bpd-designer");s.on("mousedown.dragconnection",(function(){n.change("drag_connection");var e=j.trigger("shape.select.getIds");e.length,a.on("mousemove.dragconnection",(function(e){a.css("cursor","default");var n=Q.getRelativePos(e.pageX,e.pageY,s);t.moveLinker(r,i,n.x,n.y),ee(document).off("mouseup.dropconnection").on("mouseup.dropconnection",(function(){ee(document).off("mouseup.dropconnection"),j.trigger("element.update",r)}))})),ee(document).on("mouseup.dragconnection",(function(){j.trigger("anchor.point.remove"),n.reset(),s.off("mousedown.dragconnection"),a.off("mousemove.dragconnection"),ee(document).off("mouseup.dragconnection")}))}))}},{key:"moveShape",value:function(e,t){for(var n=[],r=j.trigger("shape.select.getIds"),i=0;i<e.length;i++){var o=e[i];n.push(o.data.id)}for(var a=S(t),s=0;s<e.length;s++){var l=e[s];if("SequenceFlow"===l.shape.bpmnName){var u=l.data,c=l.plane,p=l.shape,f=!1,h=!1;if(!r.indexOf(u.id)>=0?(null!=u.sourceRef&&n.indexOf(u.sourceRef)>=0&&(c.waypoint[0].x+=a.x,c.waypoint[0].y+=a.y,f=!0),null!=u.targetRef&&n.indexOf(u.targetRef)>=0&&(c.waypoint[c.waypoint.length-1].x+=a.x,c.waypoint[c.waypoint.length-1].y+=a.y,h=!0)):((null==u.sourceRef||n.indexOf(u.sourceRef)>=0)&&(c.waypoint[0].x+=a.x,c.waypoint[0].y+=a.y,f=!0),(null==u.targetRef||n.indexOf(u.targetRef)>=0)&&(c.waypoint[c.waypoint.length-1].x+=a.x,c.waypoint[c.waypoint.length-1].y+=a.y,h=!0)),f&&h){for(var d=0;d<p.points.length;d+=1){var y=p.points[d];y.x+=a.x,y.y+=a.y}var m=this.$container.find('.shape-box[data-id="'+u.id+'"]'),g=m.position();m.css({left:g.left+=t.x,top:g.top+=t.y})}else(f||h)&&j.trigger("connection.render",{element:l,rendered:!0})}else this.moveDom(l,a,t)}j.trigger("shape.move",{elements:e,pos:t}),j.trigger("shape.tooltip.show")}},{key:"moveLinker",value:function(e,t,n,r){var i=e.plane.waypoint,o=i[0],a=i[i.length-1],s=Q.getShapeByPosition(n,r,this.$container,!0),l=null,u=null;if(j.trigger("anchor.point.remove"),null!=s){var c,p,f=s.element,h=f.data,d=f.plane,y=f.shape;if(j.trigger("anchor.show",f),u=h.id,"bounds"===s.type)l=s.anchor,j.trigger("anchor.point.show",w(l));else if("shape"===s.type)if("source"===t?(c={x:a.x,y:a.y},p=e.data.targetRef):(c={x:o.x,y:o.y},p=e.data.sourceRef),h.id===p)j.trigger("anchor.point.remove"),l={x:S(n),y:S(r),angle:null},u=null;else{for(var m,g=y.getAnchors(),v={x:d.bounds.x+d.bounds.width/2,y:d.bounds.y+d.bounds.height/2},x=-1,b=0;b<g.length;b+=1){var E=g[b],C=Q.getRotated(v,{x:d.bounds.x+E.x,y:d.bounds.y+E.y},y.shapeStyle.angle),k=Q.measureDistance(C,c);(-1===x||k<x)&&(x=k,m=C)}var A=Q.getPointAngle(this.$container,h.id,m.x,m.y,7);l={x:m.x,y:m.y,angle:A},j.trigger("anchor.point.show",w(l))}}else j.trigger("anchor.point.remove"),j.trigger("anchor.remove"),l={x:S(n),y:S(r),angle:null},u=null;"source"===t?(e.data.sourceRef=u,o.x=l.x,o.y=l.y,o.angle=l.angle,null==u&&(l.x>=a.x-6&&l.x<=a.x+6&&(o.x=a.x),l.y>=a.y-6&&l.y<=a.y+6&&(o.y=a.y))):(e.data.targetRef=u,a.x=l.x,a.y=l.y,a.angle=l.angle,null==u&&(l.x>=o.x-6&&l.x<=o.x+6&&(a.x=o.x),l.y>=o.y-6&&l.y<=o.y+6&&(a.y=o.y))),j.trigger("connection.render",{element:e,rendered:!0})}},{key:"moveDom",value:function(e,t,n){var r=e.data,i=e.plane;e.shape,i.bounds.x+=t.x,i.bounds.y+=t.y;var o=this.$container.find('.shape-box[data-id="'+r.id+'"]');o.css({left:parseFloat(o.css("left"))+n.x,top:parseFloat(o.css("top"))+n.y})}},{key:"destroy",value:function(){this.$container.find(".bpd-designer").off("mousedown.drag").off("mousedown.dragconnection")}}])&&Mi(t.prototype,n),r&&Mi(t,r),e}();function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ji={},Ii=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},ji,n),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("shape.snapline.show",this.showSnapLine.bind(this)),j.on("shape.snapline.hide",this.hideSnapLine.bind(this))}},{key:"renderSnapLine",value:function(e,t,n,r){var i=this.$container,o=j.trigger("orders.get"),a=i.find(".bpd-layout"),s=i.find(".bpd-designer"),l=(a.offset(),e.y),u=e.y+e.height,c=e.x,p=e.x+e.width,f=e.x+e.width/2,h=e.y+e.height/2,d={v:null,h:null,attach:null};if(n||(r=j.trigger("element.get",t[0])),1===t.length&&r.shape.groupName,null==d.attach)for(var y=o.length-1;y>=0;y--){var m=o[y].id,g=j.trigger("element.get",m),v=(g.data,g.plane),x=g.shape;if(!("SequenceFlow"===x.bpmnName||t.indexOf(m)>=0||x.parent)){var b=v.bounds;if(null==d.h){var S=b.y,E=b.y+b.height/2,C=b.y+b.height;E>=h-2&&E<=h+2?(d.h={type:"middle",y:E},e.y=E-e.height/2):S>=l-2&&S<=l+2?(d.h={type:"top",y:S},e.y=S):C>=u-2&&C<=u+2?(d.h={type:"bottom",y:C},e.y=C-e.height):C>=l-2&&C<=l+2?(d.h={type:"top",y:C},e.y=C):S>=u-2&&S<=u+2&&(d.h={type:"bottom",y:S},e.y=S-e.height)}if(null==d.v){var k=b.x,A=b.x+b.width/2,R=b.x+b.width;A>=f-2&&A<=f+2?(d.v={type:"center",x:A},e.x=A-e.width/2):k>=c-2&&k<=c+2?(d.v={type:"left",x:k},e.x=k):R>=p-2&&R<=p+2?(d.v={type:"right",x:R},e.x=R-e.width):R>=c-2&&R<=c+2?(d.v={type:"left",x:R},e.x=R):k>=p-2&&k<=p+2&&(d.v={type:"right",x:k},e.x=k-e.width)}if(null!=d.h&&null!=d.v)break}}if(this.hideSnapLine(),null!=d.attach){var P=s.find(".snapline-attach");0===P.length&&(P=ee("<div class='snapline-attach'></div>").appendTo(s));var T=d.attach,O=T.lineStyle.lineWidth;P.css({width:w(T.props.w+O),height:w(T.props.h+O),left:w(T.props.x-O/2)-2,top:w(T.props.y-O/2)-2,"z-index":ee("#"+T.id).css("z-index")}).show()}if(null!=d.h){var M=s.find(".snapline-attach-h");0===M.length&&(M=ee("<div class='snapline-attach-h'></div>").appendTo(s)),M.css({width:s.width(),left:0,top:Math.round(w(d.h.y)),"z-index":o.length+1}).show()}if(null!=d.v){var N=s.find(".snapline-attach-v");0===N.length&&(N=ee("<div class='snapline-attach-v'></div>").appendTo(s)),N.css({height:s.height(),top:0,left:Math.round(w(d.v.x)),"z-index":o.length+1}).show()}return d}},{key:"showSnapLine",value:function(e){var t=e.size,n=e.ids,r=e.render,i=e.element;this.renderSnapLine(t,n,r,i)}},{key:"hideSnapLine",value:function(){var e=this.$container.find(".bpd-designer");e.find(".snapline-attach-h").hide(),e.find(".snapline-attach-v").hide(),e.find(".snapline-attach").hide()}}])&&Di(t.prototype,n),r&&Di(t,r),e}();function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $i={},Li=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.config=Object.assign({},$i,n),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("shape.tooltip.show",this.showTooltip.bind(this)),j.on("shape.tooltip.hide",this.hideTooltip.bind(this))}},{key:"showTooltip",value:function(e){var t=this.$container.find(".bpd-designer"),n=t.find(".shape-select"),r=n.position(),i=j.trigger("orders.get"),o=t.find(".shape-tooltip");0===o.length&&(o=ee("<div class='shape-tooltip'></div>").appendTo(t)),e||(e="X: "+Math.round(S(r.left))+"&nbsp;&nbsp;Y: "+Math.round(S(r.top))),o.html(e),o.css({top:r.top+n.height()+5,left:r.left+n.width()/2-o.outerWidth()/2,"z-index":i.length}).show()}},{key:"hideTooltip",value:function(){this.$container.find(".shape-tooltip").hide()}}])&&Bi(t.prototype,n),r&&Bi(t,r),e}();function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.pageStyle=n,this.flag=!1,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("hand.activate",this.activateHand.bind(this)),j.on("hand.move",this.moveHand.bind(this)),j.on("hand.destroy",this.destroyHand.bind(this))}},{key:"activateHand",value:function(e){var t=this,n=e.e,r=e.state;n&&"touchstart"===n.type?this.startHand(n):this.$container.off("touchstart.hand mousedown.hand").on("touchstart.hand mousedown.hand",(function(e){t.startHand(e),r.change("hand_move")})),ee(document).off("touchend.hand mouseup.hand").on("touchend.hand mouseup.hand",(function(){t.flag=!1,r.reset()}))}},{key:"startHand",value:function(e){var t={top:this.$container.scrollTop(),left:this.$container.scrollLeft()},n={x:0,y:0};this.flag=!0,n.x=e.clientX,n.y=e.clientY,e.type.indexOf("touch")>=0&&(n.x=e.originalEvent.targetTouches[0].clientX,n.y=e.originalEvent.targetTouches[0].clientY),this.moveHand(t,n)}},{key:"moveHand",value:function(e,t){var n=this,r=this.pageStyle,i=this.$container;this.$container.off("touchmove.hand mousemove.hand").on("touchmove.hand mousemove.hand",(function(o){if(n.flag){var a=o.clientX-t.x,s=o.clientY-t.y;o.type.indexOf("touch")>=0&&(a=o.originalEvent.targetTouches[0].clientX-t.x,s=o.originalEvent.targetTouches[0].clientY-t.y);var l=e.top-s;l<0?l=0:l>r.height-i.height()&&(l=r.height-i.height());var u=e.left-a;u<0?u=0:u>r.width-i.width()&&(u=r.width-i.width()),n.$container.scrollTop(l),n.$container.scrollLeft(u)}}))}},{key:"destroyHand",value:function(){this.$container.off("mousedown.hand touchstart.hand mousemove.hand touchmove.hand"),ee(document).off("mouseup.hand touchend.hand")}}])&&_i(t.prototype,n),r&&_i(t,r),e}();function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qi={width:30,height:30,onChanged:function(){}},Wi={data:{},plane:{bounds:{}}},Hi=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=t,this.bpmns=n.bpmns,this.bpmnStyle=n.bpmnStyle,this.filter=n.filter,this.config=Object.assign({},qi,n.config.groupPanel),this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("group.show",this.showGroup.bind(this)),j.on("group.hide",this.hideGroup.bind(this)),j.on("group.connection.show",this.showConnectionGroup.bind(this))}},{key:"showGroup",value:function(e){if(1===e.length){var t=this.$container,n=this.bpmns,r=this.filter,i=t.find(".bpd-designer").find(".shape-select"),o=e[0],a=(o.data,o.plane,o.shape),s=this;if(i.length>0){var l=i.find(".group-icon");l.length<=0&&(l=ee("<div class='group-icon' data-group='"+a.groupName+"'></div>").appendTo(i));for(var u=j.trigger("group.get",a.groupName)||[],c=[],p=0;p<u.length;p+=1){var f=u[p];k(n,r,f)||c.push(f)}c.length<=1&&c[0]===a.bpmnName?l.hide():l.show(),l.attr("data-group",a.groupName),l.off("mousedown").on("mousedown",(function(t){t.stopPropagation();var n=ee(this).attr("data-group"),r=ee(this).parent(),i=r.position(),o=i.left+r.width(),a=i.top+r.height()+10;s.groupPanel(n,o,a,(function(t){e[0].shape.bpmnName!==t&&(j.trigger("element.change",{target:e[0],type:t}),s.config.onChanged&&s.config.onChanged(A(e[0])))}))}))}}}},{key:"groupPanel",value:function(e,t,n,r){var i=this.$container,o=this.config,a=this.bpmns,s=this.filter,u=i.find(".bpd-designer"),c=j.trigger("orders.get");i.find(".group-panel").hide();var p=i.find('.group-panel[data-group="'+e+'"]');if(0===p.length){p=ee('<div class="group-panel" data-group="'+e+'"></div>').appendTo(u);for(var f=j.trigger("group.get",e),h=0;h<f.length;h+=1){var d=f[h],y=j.trigger("shape.create",{type:d,element:l(Wi)});if(!k(a,s,d)){y.data.text=this.getShapeName(y.shape.bpmnName);var m=ee('<div class="group-item" data-type="'+d+'" data-shape="'+y.shape.bpmnName+'"><canvas title="'+y.data.text+'" width="'+o.width+'" height="'+o.height+'"></canvas></div>').appendTo(p);this.renderItem(m.children("canvas")[0],y)}}p.on("mousedown",(function(e){e.stopPropagation()}))}return p.css({left:t,top:n,"z-index":c.length+1}).show(),p.children(".group-item").off().on("click",(function(){var e=ee(this).attr("data-shape");r(e),p.hide(),ee(document).off("mousedown.group-panel")})),ee(document).on("mousedown.group-panel",(function(){p.hide(),ee(document).off("mousedown.group-panel")})),p}},{key:"hideGroup",value:function(e){(e||this.$container).find(".group-icon").hide()}},{key:"showConnectionGroup",value:function(e){var t=this.$container,n=(this.config,this.bpmns),r=(this.bpmnStyle,this.filter),i=(e.data,e.plane),o=(e.shape,this),a=j.trigger("orders.get"),s=t.find(".bpd-designer");t.find(".connection-group-panel").hide();var u=t.find('.connection-group-panel[data-group="bpmn"]');if(0===u.length){u=ee("<div class='connection-group-panel' data-group='bpmn'></div>").appendTo(s);var c=j.trigger("group.get");for(var p in c){for(var f=[],h=0;h<c[p].length;h+=1)k(n,r,c[p][h])||f.push(c[p][h]);if(f.length>0){var d=c[p][0],y=j.trigger("shape.create",{type:d,element:l(Wi)});y.data.text=this.getShapeName(y.shape.bpmnName),this.renderConnectionItem(y,f,u)}}u.on("mousemove",(function(e){e.stopPropagation()})).on("mousedown",(function(e){e.stopPropagation()}))}u.css({left:w(i.waypoint[i.waypoint.length-1].x),top:w(i.waypoint[i.waypoint.length-1].y),"z-index":a.length}).show(),u.find(".group-icon").off().on("mousedown",(function(t){t.stopPropagation();var n=ee(this).data("group"),r=ee(this).parent().position(),i=u.position(),a=i.left+r.left+ee(this).parent().outerWidth()-10,s=i.top+r.top+ee(this).parent().outerHeight();o.groupPanel(n,a,s,(function(t){o.renderShape(e,t),u.hide(),ee(document).off("mousedown.dashboard")}))})).on("click",(function(e){e.stopPropagation()})),u.children(".group-item").off().on("click",(function(){u.hide(),ee(document).off("mousedown.dashboard"),o.renderShape(e,ee(this).data("shape"))})),ee(document).on("mousedown.dashboard",(function(){u.hide(),ee(document).off("mousedown.dashboard")}))}},{key:"renderShape",value:function(e,t){var n,r=e.plane.waypoint,i=Q.getEndpointAngle(e.shape,"targetRef"),o=Q.getAngleDir(i),a=this.getShapeName(t),s=j.trigger("element.create",{name:a,type:t,prefix:"obj"}),l=s.shape.getAnchors(),u=null;switch(o){case 1:u=null;for(var c=0;c<l.length;c+=1){var p=l[c];(null==u||p.y<u)&&(u=p.y,n=p)}break;case 2:u=null;for(var f=0;f<l.length;f+=1){var h=l[f];(null==u||h.x>u)&&(u=h.x,n=h)}break;case 3:u=null;for(var d=0;d<l.length;d+=1){var y=l[d];(null==u||y.y>u)&&(u=y.y,n=y)}break;case 4:u=null;for(var m=0;m<l.length;m+=1){var g=l[m];(null==u||g.x<u)&&(u=g.x,n=g)}}s.plane.bounds.x=r[r.length-1].x-n.x,s.plane.bounds.y=r[r.length-1].y-n.y,j.trigger("record.start"),j.trigger("shape.render",{type:t,element:s}),j.trigger("element.add",s);var v=Q.getPointAngle(this.$container,s.data.id,r[r.length-1].x,r[r.length-1].y,7);j.trigger("element.get",e.data.id)&&(e.data.targetRef=s.data.id,r[r.length-1].angle=v,j.trigger("connection.render",{element:e,rendered:!0}),j.trigger("element.update",e)),j.trigger("record.end"),j.trigger("shape.select.remove"),j.trigger("shape.select",{ids:s.data.id})}},{key:"renderConnectionItem",value:function(e,t,n){var r=this.config,i=(this.bpmnStyle,this.getShapeName(e.shape.bpmnName)),o=ee("<div class='group-item' data-group='"+e.shape.groupName+"'  data-shape='"+e.shape.bpmnName+"'><canvas title='"+i+"' width='"+r.width+"' height='"+r.height+"'></canvas></div>").appendTo(n);this.renderItem(o.children("canvas")[0],e),t.length>1&&o.append("<div class='group-icon' data-group='"+e.shape.groupName+"'></div>")}},{key:"renderItem",value:function(e,t){var n=this.config,r=(t.data,t.plane),i=t.shape,o=e.getContext("2d"),a={x:0,y:0,width:r.bounds.width,height:r.bounds.height};o.clearRect(0,0,n.width,n.height),(a.width>=n.width||a.height>=n.width)&&(r.bounds.width>=r.bounds.height?(a.width=n.width-2*i.lineStyle.lineWidth,a.height=parseInt(r.bounds.height/r.bounds.width*a.width),a.height<20&&(a.height=20)):(a.height=n.height-2*i.lineStyle.lineWidth,a.width=parseInt(r.bounds.width/r.bounds.height*a.height),a.width<20&&(a.width=20))),r.bounds=a;for(var s=l(i.getPath()),u={x:a.x+a.width/2,y:a.y+a.height/2},c=0;c<s.length;c+=1)for(var p=s[c],f=0;f<p.actions.length;f+=1){var h=p.actions[f];"font"===h.action&&(h.textAlign="center",h.textBaseline="middle",h.fontSize="14px",h.x=u.x,h.y=u.y)}i.actions=s,o.save(),o.lineJoin="round",o.globalAlpha=i.shapeStyle.alpha;var d=(n.width-a.width)/2,y=(n.height-a.height)/2;o.translate(d,y),o.translate(a.width/2,a.height/2),o.rotate(i.shapeStyle.angle),o.translate(-a.width/2,-a.height/2),j.trigger("shape.renderPath",{shape2D:o,element:t,render:!0}),o.restore()}},{key:"getShapeName",value:function(e){var t=this.bpmnStyle;return t[e]&&t[e].name?t[e].name:j.trigger("i18n","bpmn."+e)}}])&&zi(t.prototype,n),r&&zi(t,r),e}(),Gi={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Esc:27,BackSpace:8,Tab:9,Spacebar:32,Shift:16,Enter:13,Control:17,Alt:18,Left:37,Up:38,Right:39,Down:40,Insert:45,Delete:46,End:35,Home:36,PageUp:33,PageDown:34};function Vi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ui=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.funs={Ctrl:{},Alt:{},Shift:{}},this.init(),this.keyEvent()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("key.bind",this.bindKey.bind(this)),j.on("key.clear",this.clearKey.bind(this))}},{key:"keyEvent",value:function(){var e=this;ee(document).off("keydown.hotkey").on("keydown.hotkey",(function(t){var n=[];n=t.ctrlKey?e.funs.Ctrl[t.keyCode]||[]:t.altKey?e.funs.Alt[t.keyCode]||[]:t.shiftKey?e.funs.Shift[t.keyCode]||[]:e.funs[t.keyCode]||[];for(var r=0;r<n.length;r+=1)n[r](t)})),ee(document).off("keydown.hotkey","input,textarea,select").on("keydown.hotkey","input,textarea,select",(function(e){e.stopPropagation()}))}},{key:"bindKey",value:function(e){var t=e.key,n=e.fun,r=t.split("+");if(1===r.length)if("Ctrl"===r[0]||"Alt"===r[0]||"Shift"===r[0]);else{var i=Gi[r[0]];this.funs[i]||(this.funs[i]=[]),this.funs[i].push(n)}else if(2===r.length&&("Ctrl"===r[0]||"Alt"===r[0]||"Shift"===r[0])&&"Ctrl"!==r[1]&&"Alt"!==r[1]&&"Shift"!==r[1]){var o=this.funs[r[0]],a=Gi[r[1]];o[a]||(o[a]=[]),o[a].push(n)}}},{key:"clearKey",value:function(){this.cancel(),this.funs={Ctrl:{},Alt:{},Shift:{}}}},{key:"cancel",value:function(){ee(document).off("keydown.hotkey")}}])&&Vi(t.prototype,n),r&&Vi(t,r),e}(),Xi={zh_CN:{bpmn:{StartEvent:"开始事件",MessageStartEvent:"消息开始事件",TimerStartEvent:"时间开始事件",SignalStartEvent:"信号开始事件",UserTask:"人工任务",ServiceTask:"系统任务",ScriptTask:"脚本任务",ManualTask:"手工任务",BusinessRuleTask:"业务规则任务",SendTask:"发送任务",ReceiveTask:"接收任务",ParallelGateway:"并行网关",InclusiveGateway:"包容网关",ExclusiveGateway:"排他网关",EventBasedGateway:"事件网关",ComplexGateway:"复杂网关",IntermediateCatchEvent:"捕获中间事件",TimerIntermediateCatchEvent:"捕获时间事件",MessageIntermediateCatchEvent:"捕获消息事件",SignalIntermediateCatchEvent:"捕获信号事件",IntermediateThrowingEvent:"抛出中间事件",MessageIntermediateThrowingEvent:"抛出消息事件",SignalIntermediateThrowingEvent:"抛出信号事件",CompensateIntermediateThrowingEvent:"抛出补偿事件",BoundaryEvent:"边界事件",CancelBoundaryEvent:"边界取消事件",CompensateBoundaryEvent:"边界补偿事件",ErrorBoundaryEvent:"边界错误事件",MessageBoundaryEvent:"边界消息事件",SignalBoundaryEvent:"边界信号事件",TimerBoundaryEvent:"边界时间事件",CallActivity:"调用子流程",SubProcess:"子流程",Transaction:"事务",TextAnnotation:"注释",HorizontalPool:"泳池",HorizontalLane:"泳道",VerticalPool:"泳池",VerticalLane:"泳道",EndEvent:"结束事件",TerminateEndEvent:"终止事件",MessageEndEvent:"消息结束事件",SignalEndEvent:"信号结束事件",ErrorEndEvent:"错误结束事件",CancelEndEvent:"结束取消事件",CompensateEndEvent:"结束补偿事件"}},zh_TW:{bpmn:{StartEvent:"開始事件",MessageStartEvent:"消息開始事件",TimerStartEvent:"時間開始事件",SignalStartEvent:"信號開始事件",UserTask:"人工任務",ServiceTask:"系統任務",ScriptTask:"腳本任務",ManualTask:"手工任務",BusinessRuleTask:"業務規則任務",SendTask:"發送任務",ReceiveTask:"接收任務",ParallelGateway:"並行網關",InclusiveGateway:"包容網關",ExclusiveGateway:"排他網關",EventBasedGateway:"事件網關",ComplexGateway:"復雜網關",IntermediateCatchEvent:"捕獲中間事件",TimerIntermediateCatchEvent:"捕獲時間事件",MessageIntermediateCatchEvent:"捕獲消息事件",SignalIntermediateCatchEvent:"捕獲信號事件",IntermediateThrowingEvent:"拋出中間事件",MessageIntermediateThrowingEvent:"拋出消息事件",SignalIntermediateThrowingEvent:"拋出信號事件",CompensateIntermediateThrowingEvent:"拋出補償事件",BoundaryEvent:"邊界事件",CancelBoundaryEvent:"邊界取消事件",CompensateBoundaryEvent:"邊界補償事件",ErrorBoundaryEvent:"邊界錯誤事件",MessageBoundaryEvent:"邊界消息事件",SignalBoundaryEvent:"邊界信號事件",TimerBoundaryEvent:"邊界時間事件",CallActivity:"調用子流程",SubProcess:"子流程",Transaction:"事務",TextAnnotation:"註釋",HorizontalPool:"泳池",HorizontalLane:"泳道",VerticalPool:"泳池",VerticalLane:"泳道",EndEvent:"結束事件",TerminateEndEvent:"終止事件",MessageEndEvent:"消息結束事件",SignalEndEvent:"信號結束事件",ErrorEndEvent:"錯誤結束事件",CancelEndEvent:"結束取消事件",CompensateEndEvent:"結束補償事件"}},en_US:{bpmn:{StartEvent:"Start Event",MessageStartEvent:"Message Start Event",TimerStartEvent:"Timer Start Event",SignalStartEvent:"Signal Start Event",UserTask:"User Task",ServiceTask:"Service Task",ScriptTask:"Script Task",ManualTask:"Manual Task",BusinessRuleTask:"Business Rule Task",SendTask:"Send Task",ReceiveTask:"Receive Task",ParallelGateway:"Parallel Gateway",InclusiveGateway:"Inclusive Gateway",ExclusiveGateway:"Exclusive Gateway",EventBasedGateway:"Event based Gateway",ComplexGateway:"Complex Gateway",IntermediateCatchEvent:"Intermediate CatchEvent",TimerIntermediateCatchEvent:"Timer Intermediate Catch Event",MessageIntermediateCatchEvent:"Message Intermediate Catch Event",SignalIntermediateCatchEvent:"Signal Intermediate Catch Event",IntermediateThrowingEvent:"Intermediate Throwing Event",MessageIntermediateThrowingEvent:"Message Intermediate Throwing Event",SignalIntermediateThrowingEvent:"Signal Intermediate Throwing Event",CompensateIntermediateThrowingEvent:"Compensate Intermediate Throwing Event",BoundaryEvent:"Boundary Event",CancelBoundaryEvent:"Cancel Boundary Event",CompensateBoundaryEvent:"Compensate Boundary Event",ErrorBoundaryEvent:"Error Boundary Event",MessageBoundaryEvent:"Message Boundary Event",SignalBoundaryEvent:"Signal Boundary Event",TimerBoundaryEvent:"Timer Boundary Event",CallActivity:"Call Activity",SubProcess:"SubProcess",Transaction:"Transaction",TextAnnotation:"TextAnnotation",HorizontalPool:"HorizontalPool",HorizontalLane:"HorizontalLane",VerticalPool:"VerticalPool",VerticalLane:"VerticalLane",EndEvent:"End Event",TerminateEndEvent:"Terminate End Event",MessageEndEvent:"Message End Event",SignalEndEvent:"Signal End Event",ErrorEndEvent:"Error End Event",CancelEndEvent:"Cancel End Event",CompensateEndEvent:"Compensate End Event"}}};function Ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ji=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zh_CN";Ki(this,e),this.local=t,this.init()}var t,n,r;return t=e,(n=[{key:"init",value:function(){j.on("i18n",this.t.bind(this)),j.on("i18n.change",this.change.bind(this))}},{key:"t",value:function(e){for(var t=e.split("."),n=Xi[this.local],r=0;r<t.length;r+=1)n=n[t[r]];return n}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"zh_CN";this.local=e}}])&&Yi(t.prototype,n),r&&Yi(t,r),e}();function Qi(e){return function(e){if(Array.isArray(e))return Zi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var no={ids:new Dn([32,36,1]),container:"",width:"100%",height:"100%",scale:1,readonly:!1,pageStyle:{backgroundColor:"255,255,255",height:5e3,width:5e3},config:{},bpmnStyle:{},shapeStyle:[],definition:'<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn"></bpmn:definitions>',extensions:{},filter:[],bpmns:["StartEvent","UserTask","ServiceTask","ReceiveTask","CallActivity","ExclusiveGateway","InclusiveGateway","ParallelGateway","ComplexGateway","EndEvent","TerminateEndEvent"]},ro=!1,io=function(e){var t=ee(e.container);if(!e.container||t.length<=0)throw new Error("Can not find container: "+e.container);var n=ee('<div class="bpd-container"><div class="bpd-layout"><div class="bpd-designer"></div></div></div>');return n.css({width:e.width,height:e.height}),t.append(n),n},oo=function(e,t){new Ui,new Ji(t.local),new li(t.extensions),new pi(e,t,t.config.background),new Fi(e,t.pageStyle);if(!t.readonly)new Ri(e,t.config.anchor),new Ii(e,t.config.snapline),new gi(e,t.config.direction),new Oi(e,t.config.select),new Ci,new di(t,t.config.clipboard),new bi(e,t.config.editName),new Li(e,t.config.tooltip),new Ni(t,e),new Hi(e,t)},ao=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};eo(this,e),this.version="1.1.0-beta.5",this.options=Object.assign({},no,t),this.$container=io(this.options),oo(this.$container,this.options),this.draw=Mn(this.options,this.$container),y("bpmn",(function(){ro=!0})),this.init(n)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this;this.importBpmn(this.options.definition,(function(){e()})),In.a.bind(this.$container[0],(function(){t.resizeContainer()}))}},{key:"resizeContainer",value:function(){var e=this.$container,t=this.options,n=t.pageStyle,r=n.width,i=n.height,o=e.width(),a=e.height(),s={top:(t.pageStyle.height-a)/2,left:(t.pageStyle.width-o)/2};if(this.getAllElement().length>0){var l={top:this.$container.scrollTop(),left:this.$container.scrollLeft()},u={x:S(0),y:S(0),width:S(r),height:S(i)},c=Q.getElementIdsByRange(u),p=Q.getElementsBox(c),f={x:Math.abs(l.left),y:Math.abs(l.top),width:e.width(),height:e.height()};if(p&&!Q.checkRang(f,{x:p.x-p.width/2,y:p.y-p.height/2})){var h=p.y-f.height/2+p.height/2,d=p.x-f.width/2+p.width/2;this.$container.scrollTop(h),this.$container.scrollLeft(d)}}else this.$container.scrollTop(s.top),this.$container.scrollLeft(s.left)}},{key:"createShape",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=ee(e.target);if(!n.hasClass("readonly")&&!this.options.readonly){var r=n.attr("shapeName");if(!r||""===r)throw new Error("shapeName error");this.draw.createShape(r,t)}}},{key:"getAllElement",value:function(){var e=[],t=j.trigger("element.get");for(var n in t){var r=A(t[n]);e.push(r)}return e}},{key:"getRootElement",value:function(){var e=j.trigger("process.get");return e?A(e):null}},{key:"getCurrentElements",value:function(){for(var e=j.trigger("shape.select.get"),t=0;t<e.length;t+=1)e[t]=A(e[t]);return e}},{key:"getFrontElementsByBpmn",value:function(e,t){return this.getFrontElements(j.trigger("element.get",e.id)).filter((function(e){return e.bpmnName===t}))}},{key:"getFrontElement",value:function(e){if(!e)throw new Error("select element error");var t=null;return this.getFrontElements(j.trigger("element.get",e.id)).forEach((function(e){t||"SequenceFlow"===e.bpmnName||(t=e)})),t}},{key:"getFrontElements",value:function(e){if(!e)throw new Error("select element error");for(var t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];return r?n:(t.forEach((function(e){if("SequenceFlow"===e.shape.bpmnName){if(e.data.sourceRef&&""!==e.sourceRef){var t=j.trigger("element.get",e.data.sourceRef)||[],r=!1;n.forEach((function(e){e.data.id===t.data.id&&(r=!0)})),r||(i.push(t),n.push(t))}}else(j.trigger("connections.get",e.data.id)||[]).forEach((function(t){var r=j.trigger("element.get",t);if(r.data.targetRef===e.data.id){var o=!1;n.forEach((function(e){e.data.id===r.data.id&&(o=!0)})),o||(i.push(r),n.push(r))}}))})),i.length<=0?e(i,n,!0):e(i,n))}([e]),n=0;n<t.length;n+=1)t[n]=A(t[n]);return t}},{key:"handleClipboardEvent",value:function(e){"copy"!==e&&"paste"!==e||j.trigger("clipboard.".concat(e))}},{key:"updateProperties",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t.extensions.forEach((function(e){e.$type=e.name,delete e.name}));var r=j.trigger("element.get",e);if(r){var i=Object.assign({},t.original);for(var o in i)r.data[o]=i[o];var a=r.data.extensionElements,s=[];a.values||(a.values=[]),a.values.forEach((function(e){var n=!1;t.extensions.forEach((function(t){t.$type===e.$type&&(n=!0)})),n||s.push(e)})),a.values=[].concat(s,Qi(t.extensions)),"SequenceFlow"===r.shape.bpmnName||j.trigger("shape.render",{type:r.shape.bpmnName,element:r}),n()}}},{key:"updateProcessProperties",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};e.extensions.forEach((function(e){e.$type=e.name,delete e.name}));var n=j.trigger("process.get");if(n){var r=Object.assign({},e.original);for(var i in r)n[i]=r[i];var o=[];n.extensionElements.values||(n.extensionElements.values=[]),n.extensionElements.values.forEach((function(t){var n=!1;e.extensions.forEach((function(e){e.$type===t.$type&&(n=!0)})),n||o.push(t)})),n.extensionElements.values=[].concat(o,Qi(e.extensions)),t()}}},{key:"updataLineStyle",value:function(e,t){this.draw.updataLineStyle(e,t)}},{key:"destroy",value:function(){In.a.remove(this.$container[0]),this.$container.remove(),this.draw.cancel(),j.trigger("key.clear"),j.destroy()}},{key:"activateHand",value:function(){j.trigger("hand.activate"),this.draw.resetState()}},{key:"activateSelect",value:function(){this.options.readonly||(j.trigger("hand.destroy"),j.trigger("shape.multiSelect",{state:this.draw.state}),this.draw.changeState("multiSelect"))}},{key:"importBpmn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this,r=setInterval((function(){ro&&(clearInterval(r),j.trigger("record.initStatus",!1),j.trigger("model.import",e,(function(e,r){e||(j.trigger("record.start"),n.draw.render(r),j.trigger("record.end"),j.trigger("record.initStatus",!0),n.resizeContainer(),t())})))}),1e3)}},{key:"exportBpmn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=this.draw.designer.createDefinition();j.trigger("model.export",t,(function(t,n){e(n)}))}}])&&to(t.prototype,n),r&&to(t,r),e}();t.default=ao;window.BPDCore=ao}]);